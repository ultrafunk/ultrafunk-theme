import{B as he,G as M,H as J,I as U,J as A,K as me,Ka as w,L as R,M as j,N as P,Na as ge,O as fe,P as y,Q as T,R as k,S as pe,T as H,Ta as ye,U as X,V as _,W as Q,X as q,i as S,l as le,m as ce,o as f,p as G,q as ue,r as x,s as W,t as E,u as g,w as de,x as I}from"./chunk-5UCYYTRH.js";var ke=S("share-modal"),Ye=()=>{let e=/\s{1,}[\u002D\u00B7\u2013]\s{1,}/i,t,i,n,s,a,r,o;return{show:l};function l(p){return{title:t="Share / Play Track",bodyText:i=null,filterBodyText:n=!1,bodyHtml:s=null,url:a=null,sourceUid:r=null,verb:o="Play"}=p,q(t,m(),"share",c)}function m(){let p=[{clickId:"copyToClipboardId",icon:"content_copy",content:"<b>Copy Link</b> to Clipboard"},{clickId:"shareOnEmailId",icon:"share",content:"<b>Share</b> on Email"},{clickId:"amazonMusicId",icon:"link",content:`<b>${o}</b> on Amazon Music`},{clickId:"appleMusicId",icon:"link",content:`<b>${o}</b> on Apple Music`},{clickId:"spotifyId",icon:"link",content:`<b>${o}</b> on Spotify`},{clickId:"tidalId",icon:"link",content:`<b>${o}</b> on Tidal`},{clickId:"youTubeMusicId",icon:"link",content:`<b>${o}</b> on YouTube Music`}];return s!==null&&p.unshift({class:"track-share-entry",content:s}),p}function c(p){ke.log(`singleChoiceListClick(): ${p} - title: "${t}" - bodyText: "${i}" - filterBodyText: ${n} - url: ${a} - sourceUid: ${r} - verb: ${o}`);let v=encodeURIComponent(n?i.replace(e," "):i);switch(p){case"copyToClipboardId":ee(a,"Track link copied to clipboard","Unable to copy Track link to clipboard");break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(i)}&body=${encodeURI(a)}%0d%0a`;break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${v}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${v}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${v}`,"_blank");break;case"tidalId":window.open(`https://google.com/search?q=${v}%20site:tidal.com`,"_blank");break;case"youTubeMusicId":r!==null?window.open(`https://music.youtube.com/watch?v=${r}`,"_blank"):window.open(`https://music.youtube.com/search?q=${v}`,"_blank");break}}},B=Ye();function ee(e,t="Text copied to clipboard",i="Unable to copy text to clipboard"){navigator.clipboard.writeText(e).then(()=>{I(t,3)},n=>{ke.error(`copyTextToClipboard() failed because ${n}`),I(i,5)})}var re=S("site-interaction"),b=document.documentElement.classList,be={metaUiElements:null,listUiElements:null},F={},Y={};function Ce(){re.log("init()"),be.metaUiElements=new te("div.track-meta",!0),be.listUiElements=new ne("#tracklist"),F=new ie("footer-site-theme-toggle"),Y=new se("footer-gallery-layout-toggle"),window.addEventListener("load",()=>{document.querySelector(".widget ul.uf_channel")?.addEventListener("click",O),document.querySelector(".widget ul.uf_artist")?.addEventListener("click",O),document.querySelector(".widget.widget_archive ul")?.addEventListener("click",O)})}function Te(){F.setCurrent(),Y.setCurrent()}var te=class extends _{elementClicked(){if(this.clicked("div.track-share-control"))return ve(this.closest("single-track, gallery-track"));if(this.clicked("span.term-links"))return O(this.event)}},ne=class extends _{elementClicked(){if(this.clicked("div.share-play-button"))return ve(this.closest("div.track-entry"));if(this.clicked("div.details-button"))return Ne(this.closest("div.track-entry"))}};function O(e){e.target.matches("a")&&(e?.preventDefault(),T(k(e.target.href)))}function ve(e){let t=y(e,"data-track-artist"),i=y(e,"data-track-title"),n=B.show({bodyText:`${t} - ${i}`,filterBodyText:!0,bodyHtml:Q(e,t,i),url:y(e,"data-track-url"),sourceUid:y(e,"data-track-source-uid")});Se(n,`${t} - ${i}`)}function Ne(e){let t=y(e,"data-track-artist"),i=y(e,"data-track-title"),n=parseInt(e.getAttribute("data-track-duration")),s=e.querySelector(".track-artists-links").querySelectorAll("a"),a=e.querySelector(".track-channels-links").querySelectorAll("a"),r=[];r.push({class:"track-details-entry",content:Q(e,t,i)}),r.push({class:"header-entry",content:"Artists"}),s.forEach(l=>{r.push({clickId:`entry-${r.length}`,class:`icon-text ${l.classList[0]}`,title:"Go to Artist",content:l.innerText,link:l.href,icon:"link"})}),r.push({class:"header-entry",content:"Channels"}),a.forEach(l=>{r.push({clickId:`entry-${r.length}`,title:"Go to Channel",content:l.innerText,link:l.href,icon:"link"})});let o=q(`Track Details<span class="light-text lowercase-text">${n>0?fe(n):"N / A"}</span>`,r,"track-details",l=>{T(r.find(m=>m.clickId===l).link)});Se(o,`${t} - ${i}`)}function Se(e,t){document.getElementById(e).querySelector(".modal-track").title="Click / tap to Copy Artist & Title",document.getElementById(e)?.querySelector("img")?.addEventListener("click",()=>{ee(t,"Artist &amp Title copied to clipboard","Unable to copy Artist &amp Title to clipboard")})}function Ee(e,t,i){let n=Object.values(e).find(s=>s.id===t);return n!==void 0?n:i}function we(e,t){let i=Object.values(e).findIndex(s=>s.id===t.id),n=Object.keys(e);return i+1<n.length?e[n[i+1]]:e[n[0]]}var ie=class extends X{constructor(t){super(t,!1),this.themes={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}},this.setCurrent(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>this.matchMediaPrefColorScheme())}setCurrent(){this.currentTheme=Ee(this.themes,g.site.theme,this.themes.auto),this.update()}matchMediaPrefColorScheme(){this.currentTheme.id===this.themes.auto.id&&this.update()}toggle(){this.currentTheme=we(this.themes,this.currentTheme),g.site.theme=this.currentTheme.id}update(){let t=this.currentTheme;this.currentTheme.id===this.themes.auto.id&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?this.themes.dark:this.themes.light),W(f.UF_SITE_THEME,t.id),b.contains(t.class)===!1&&(re.log(`SiteThemeToggle.update() - newSiteTheme: ${t.id}`),b.remove(this.themes.light.class,this.themes.dark.class),b.add(t.class)),this.value=this.currentTheme.text}},se=class extends X{constructor(t){super(t,!1),this.minWidth=`(max-width: ${me("--gallery-layout-min-width")})`,this.layouts={oneColumn:{id:"1-column",text:"1 column",class:"gallery-1-col"},twoColumn:{id:"2-column",text:"2 column",class:"gallery-2-col"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"gallery-3-col"}},this.setCurrent(),window.matchMedia(this.minWidth).addEventListener("change",i=>this.matchMediaMinWidth(i))}setCurrent(){this.currentLayout=Ee(this.layouts,g.gallery.layout,this.layouts.threeColumn),this.update()}matchMediaMinWidth(t){b.contains("gallery-layout")&&(t.matches?(b.remove(this.currentLayout.class),b.add(this.layouts.oneColumn.class)):(b.remove(this.layouts.oneColumn.class),b.add(this.currentLayout.class)))}toggle(){this.currentLayout=we(this.layouts,this.currentLayout),g.gallery.layout=this.currentLayout.id}update(t){this.value=this.currentLayout.text,W(f.UF_GALLERY_LAYOUT,this.currentLayout.id),!window.matchMedia(this.minWidth).matches&&(b.contains("gallery-layout")&&b.contains(this.currentLayout.class)===!1&&(re.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`),b.remove(this.layouts.oneColumn.class,this.layouts.twoColumn.class,this.layouts.threeColumn.class),b.add(this.currentLayout.class)),t?.type==="click"&&this.element.scrollIntoView())}};function Le(e,t,i){let n=`<b>${e}</b>`;return i.forEach((s,a)=>{let r=pe(s.meta);n+=`
    <div class="track">
      <div class="thumbnail ${r.class}"
        data-term-url="${s.link}"
        data-term-slug="${t}"
        data-track-num="${a+1}"
        data-track-type="${s.meta.track_source_type}"
        data-track-id="track-${s.id}"
        data-track-source-uid="${r.uid}" title="Play Track"
        >
        <img src="${r.src}">
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${s.link}" title="Go to track"><span><b>${s.meta.track_artist}</b></span><br><span>${s.meta.track_title}</span></a>
      </div>
    </div>`}),n}function $e(e,t){let i=`<b>${e}</b><br>`;return t.forEach(n=>i+=`<a href="${k(n.link)}">${n.name}</a>, `),i.slice(0,i.length-2)}function xe(e,t,i){let n=`<b>${e}</b><br>`;return t.forEach(s=>{n+=`<a href="${k(`${M}/artist/${s.artist_slug}/?channel=${i}`)}">${s.artist_name}</a> (${s.track_count})<br>`}),n}var d={termCache:{}};function ae(e,t,i){let n=y(e,"data-term-type"),s=parseInt(t.getAttribute("data-term-id")),a=y(t,"data-term-slug"),r=n==="channels";Ve(n,s,r?10:50,async o=>{let l=r?"Latest Tracks":"All Tracks",m=i.querySelector(".body-left");if(o!==null?(m.innerHTML=Le(l,a,o),t.classList.add("data-fetched")):I("Failed to fetch track data!",30,"retry",()=>ae(e,t,i)),!r&&o!==null)ze(o,s,50,(c,p)=>{l=c==="artists"?"Related Artists":"In Channels",m=c==="artists"?i.querySelector(".artists"):i.querySelector(".channels"),p!==null?m.innerHTML=$e(l,p):m.innerHTML=`<b>${l}</b><br>None found`});else if(o!==null){if(!("topArtists"in d.termCache[s])){let c=await H("top-artists",`channelId=${s}`,!0,"/wp-json/ultrafunk/v1/");c!==null&&c.status.code===200&&(d.termCache[s].topArtists=c.data)}i.querySelector(".top-artists").innerHTML=xe("Top Artists (tracks)",d.termCache[s].topArtists,a)}})}async function Ve(e,t,i,n){if(!(t in d.termCache)){let s=await H("tracks",`${e}=${t}&per_page=${i}&_fields=id,link,artists,channels,meta`,!0);s!==null&&s.status.code===200&&(d.termCache[t]={tracks:s.data})}n(d.termCache[t]!==void 0?d.termCache[t].tracks:null)}function ze(e,t,i,n){if("channels"in d.termCache[t]&&"artists"in d.termCache[t])n("channels",d.termCache[t].channels),n("artists",d.termCache[t].artists);else{let s=[],a=[];e.forEach(r=>{s.push.apply(s,r.channels),a.push.apply(a,r.artists)}),a=a.filter(r=>r!==t),Ie("channels",t,[...new Set(s)],i,n),Ie("artists",t,[...new Set(a)],i,n)}}async function Ie(e,t,i,n,s){if(i.length>0){let a=await H(e,`include=${i}&per_page=${n}&_fields=link,name`,!0);a!==null&&a.status.code===200&&(d.termCache[t][e]=a.data)}s(e,d.termCache[t][e]!==void 0?d.termCache[t][e]:null)}function Ae(){d.termCache=JSON.parse(sessionStorage.getItem(f.UF_TERMLIST_CACHE)),d.termCache===null&&(d.termCache={})}function Pe(){sessionStorage.setItem(f.UF_TERMLIST_CACHE,JSON.stringify(d.termCache))}function _e(){sessionStorage.removeItem(f.UF_TERMLIST_CACHE)}function Me(){return Object.keys(d.termCache).length>0}var We=S("termlist-controls"),N={listContainer:null,uiElements:null};function Ue(){We.log("init()"),N.listContainer=document.getElementById("termlist-container"),N.uiElements=new oe("#termlist-container"),Je()}function Re(){if(Me()){let e={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(t=>{t.classList.contains("open")&&e.openTermIds.push(t.id)}),sessionStorage.setItem(f.UF_TERMLIST_STATE,JSON.stringify(e)),Pe()}}function Je(){if(Ae(),performance.getEntriesByType("navigation")[0].type!=="reload"){let e=JSON.parse(sessionStorage.getItem(f.UF_TERMLIST_STATE));e!==null&&e.pageUrl===window.location.href?(history.scrollRestoration="manual",e.openTermIds.forEach(t=>{document.getElementById(t).querySelector("div.termlist-header").click()}),window.scroll({top:e.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(f.UF_TERMLIST_STATE),_e()}var oe=class extends _{elementClicked(){if(this.clicked("div.play-button"))return K(this.event,k(this.querySelector("a").href));if(this.clicked("div.shuffle-button"))return je(this.event,k(this.querySelector("a").href));if(this.clicked("div.share-find-button"))return Xe(this.element);if(this.clicked("div.termlist-header"))return et(this.event);if(this.clicked("div.thumbnail"))return Qe(this.event,this.element);if(this.clicked("a"))return Ze(this.event,this.element)}};function K(e,t,i=null){e?.preventDefault(),Re(),sessionStorage.setItem(f.UF_AUTOPLAY,JSON.stringify({autoplay:e.shiftKey===!1,trackId:i,position:0})),T(t)}function je(e,t){x(f.UF_RESHUFFLE,"true"),K(e,t)}function Xe(e){let t=y(e,"data-term-name");B.show({title:`Share / Find ${y(e,"data-term-path")}`,bodyText:t,bodyHtml:`<b>${t}</b>`,url:k(e.getAttribute("data-term-url")),verb:"Find"})}function Qe(e,t){let i=N.listContainer.getAttribute("data-term-type")==="channels"?"channel":"artist",n=y(t,"data-term-slug"),s=parseInt(t.getAttribute("data-track-type")),a=t.getAttribute("data-track-source-uid");if(g.playback.preferredPlayer===ce.GALLERY||s===he.SOUNDCLOUD)K(e,t.getAttribute("data-term-url"),null);else{let r=parseInt(t.getAttribute("data-track-num")),o="";r>E.listPerPage&&(o=`page/${Math.ceil(r/E.listPerPage)}/`),K(e,`${M}/list/${i}/${n}/${o}`,a)}}function Ze(e,t){Re(),t.closest("div.permalink")!==null&&(e?.preventDefault(),T(k(t.href)))}function et(e){let t=e.target.closest("div.termlist-entry"),i=t.querySelector("div.expand-toggle span"),n=t.querySelector("div.termlist-body"),s=n.style.display.length!==0,a=t.classList.contains("data-fetched");P(t,s?"open":"closed",s?"closed":"open"),i.textContent=s?"expand_more":"expand_less",n.style.display=s?"":"flex",!s&&!a&&ae(N.listContainer,t,n)}var nt=()=>{let e=new ResizeObserver(l),t=null,i=null,n=null,s=!1;return window.addEventListener("load",()=>{U("#menu-primary-menu .menu-item-reshuffle a","click",ge),document.getElementById("menu-primary-menu")?.addEventListener("click",r)}),{isVisible(){return s},scrolledTop(){i.style.display=""},init:a,toggle:o};function a(){t=document.getElementById("site-header"),i=document.querySelector("#site-navigation .nav-menu-outer"),n=document.getElementById("nav-menu-modal-overlay"),A(".nav-menu-toggle","click",o),n.addEventListener("click",o),n.addEventListener("transitionend",m),e.observe(i.querySelector(".menu-primary-menu-container"))}function r(c){let p=c.target.closest("li.menu-item.menu-item-object-uf_channel");p!==null&&(ye()||w())&&(c?.preventDefault(),T(k(p.querySelector("a").href)))}function o(){t.classList.contains("sticky-nav-up")?s?i.style.display="none":i.style.display="flex":t.classList.contains("sticky-nav-down")===!1&&t.classList.toggle("hide-nav-menu")}function l(c){s=c[0].contentRect.height!==0,s?(n.className="",n.style.backgroundColor=`rgba(0, 0, 0, ${Math.round(10*(g.site.modalOverlayOpacity/100))/10})`,n.classList.add("show"),setTimeout(()=>n.classList.add("fadein"),50)):n.classList.add("fadeout")}function m(){s===!1&&(n.className="",i.style.display="")}},L=nt();var it=()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),i=null,n=null,s=null,a=null,r=!1;return{isVisible(){return r},init:o,toggle:l,hide:m};function o(){i=document.getElementById("site-header"),n=document.getElementById("search-container"),s=n.querySelector(".search-field"),a=i.querySelector("div.site-branding-container"),A(".nav-search-toggle","click",l),A(".nav-search-toggle","mousedown",h=>h.preventDefault()),s.addEventListener("blur",m),s.addEventListener("keydown",h=>{h.key==="Escape"&&(h.stopPropagation(),m())})}function l(){c()?p():m()}function m(){r&&v(!1,e,"","search")}function c(){return n.style.display.length===0?!(i.offsetHeight===0||j(J.SITE_MAX_WIDTH_MOBILE)&&i.querySelector(".navbar-container-mobile-top").offsetHeight===0&&i.querySelector(".navbar-container-mobile-up").offsetHeight===0):!1}function p(){Be(),v(!0,t,"flex","clear"),s.focus(),s.setSelectionRange(9999,9999)}function v(h,C,Oe,De){r=h,document.dispatchEvent(C),n.style.display=Oe,document.querySelectorAll("div.nav-search-toggle span").forEach(Fe=>Fe.textContent=De),r?document.getElementById("playback-controls").classList.add("hide"):document.getElementById("playback-controls").classList.remove("hide")}function Be(){let h={};if(j(J.SITE_MAX_WIDTH_MOBILE))a.offsetHeight!==0?h.top=a.offsetTop:h.top=i.querySelector(".navbar-container-mobile-up").offsetTop,h=new DOMRect(63,h.top+3,document.body.clientWidth-60,30);else if(a.offsetHeight!==0){let C=a.getBoundingClientRect();h=new DOMRect(C.left,C.top+7,C.right,C.height-15)}else{let C=i.querySelector(".navbar-container").getBoundingClientRect();h=new DOMRect(C.left+88,C.top,C.right-90,C.height-1)}n.style.left=`${h.left}px`,n.style.top=`${h.top}px`,n.style.width=`${h.width-h.left}px`,n.style.height=`${h.height}px`}},$=it();var qe=S("index"),u={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{qe.log("DOMContentLoaded"),st(),u.introBanner!==null&&ot(),document.getElementById("termlist-container")!==null&&Ue(),u.siteContentSearch!==null&&(u.siteContentSearch.focus(),u.siteContentSearch.setSelectionRange(9999,9999)),lt(),le()});function st(){qe.log("initIndex()"),u.siteHeader=document.getElementById("site-header"),u.introBanner=document.getElementById("intro-banner"),u.siteContent=document.getElementById("site-content"),u.siteContentSearch=document.querySelector("#site-content form input.search-field"),Ce(),$.init(),L.init(),z.addEventListener(),ct.addEventListener(),document.addEventListener("fullscreenElement",e=>u.fullscreenTarget=e.fullscreenTarget),document.addEventListener("keydown",rt)}document.addEventListener("settingsUpdated",()=>{de(),Te(),x(f.UF_GALLERY_PER_PAGE,g.gallery.tracksPerPage,G*5),x(f.UF_PREFERRED_PLAYER,g.playback.preferredPlayer,G*5)});function rt(e){if(e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":L.isVisible()&&(e.preventDefault(),L.toggle());return}if(g.site.keyboardShortcuts&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":V()&&(e.preventDefault(),L.toggle());break;case"L":V()&&He()&&(Y.toggle(e),z.trigger());break;case"s":case"S":V()&&at()&&(e.preventDefault(),$.toggle());break;case"T":V()&&He()&&F.toggle(e);break;case"ArrowLeft":e.shiftKey&&w()&&(e.preventDefault(),T(E.prevPage));break;case"ArrowRight":e.shiftKey&&w()&&(e.preventDefault(),T(E.nextPage));break}}function V(){return $.isVisible()===!1&&u.siteContentSearch!==document.activeElement}function He(){return document.body.classList.contains("page-settings")===!1}function at(){return u.fullscreenTarget===null}function ot(){ue("localStorage")&&bannerProperty&&g.banners[bannerProperty]&&(u.introBanner.style.display="block",z.trigger(),U("#intro-banner .intro-banner-close-button","click",()=>{u.introBanner.style.display="",u.siteContent.style.marginTop="",g.banners[bannerProperty]=!1}))}function lt(){if(document.querySelector(".navbar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let i=t.pathname.slice(-1)==="/"?1:0,n=t.pathname.slice(1,t.pathname.length-i).replace(/-/gi," ").split("/");n.forEach((s,a)=>{e+=a+1<n.length?s+" / ":s})}}document.querySelectorAll("#site-navigation .navbar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}var z=(()=>{let e=0;return{getSiteHeaderYOffset(){return e},addEventListener:t,trigger:i};function t(){i(),window.addEventListener("resize",i)}function i(){let n=0;w()?n=R("--site-header-height-no-playback"):n=R("--site-header-height"),e=Math.round(n>150?n/2:n/3),u.introBanner!==null&&u.introBanner.style.display.length!==0&&(u.introBanner.style.marginTop=`${n}px`,u.siteContent.style.marginTop=`${R("--site-content-margin-top",document.body)}px`)}})(),ct=(()=>{let e=0,t=0,i=0,n=!1,s=44;return{addEventListener:a};function a(){r(),window.addEventListener("scroll",r)}function r(){let c=window.pageYOffset;c===0&&o(),c>e?(i+=c-e,i>s&&c>z.getSiteHeaderYOffset()&&(t=0,l())):(t+=e-c,t>s&&(i=0,m())),e=c}function o(){u.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),u.siteHeader.classList.add("hide-nav-menu"),$.hide(),L.scrolledTop()}function l(){n===!1&&(n=!0,P(u.siteHeader,"sticky-nav-up","sticky-nav-down"),$.hide())}function m(){n===!0&&(n=!1,P(u.siteHeader,"sticky-nav-down","sticky-nav-up"))}})();
//# sourceMappingURL=index.js.map
