import{B as pe,G as O,Ga as x,H as M,I as _,J as U,Ja as be,K as ge,L as w,M as R,N as H,O as ye,P as y,Pa as Ce,Q as T,R as C,S as ke,T as B,Ta as ve,U as ee,V as q,W as te,X as D,i as E,l as de,m as he,o as p,p as Q,q as me,r as A,s as Z,t as L,u as g,w as fe,x as P}from"./chunk-OZ5BLUG6.js";var Te=E("share-modal"),Ne=()=>{let e=/\s{1,}[\u002D\u00B7\u2013]\s{1,}/i,t,n,i,s,r,a,l,o;return{show:m};function m(k){return{title:t="Share / Play Track",bodyText:n=null,filterBodyText:i=!1,bodyHtml:s=null,url:r=null,sourceUid:a=null,verb:l="Play",icon:o="link"}=k,D(t,d(),"share",S)}function d(){let k=[{clickId:"copyToClipboardId",icon:"content_copy",content:"<b>Copy Link</b> to Clipboard"},{clickId:"shareOnEmailId",icon:"share",content:"<b>Share</b> on Email"},{clickId:"searchOnGoogleId",icon:"search",content:"<b>Search</b> on Google"},{clickId:"amazonMusicId",icon:o,content:`<b>${l}</b> on Amazon Music`},{clickId:"appleMusicId",icon:o,content:`<b>${l}</b> on Apple Music`},{clickId:"spotifyId",icon:o,content:`<b>${l}</b> on Spotify`},{clickId:"youTubeMusicId",icon:o,content:`<b>${l}</b> on YouTube Music`}];return s!==null&&k.unshift({class:"track-share-entry",content:s}),k}function S(k){Te.log(`singleChoiceListClick(): ${k} - title: "${t}" - bodyText: "${n}" - filterBodyText: ${i} - url: ${r} - sourceUid: ${a} - verb: ${l}`);let f=encodeURIComponent(i?n.replace(e," "):n);switch(k){case"copyToClipboardId":ie(r,"Track link copied to clipboard","Unable to copy Track link to clipboard");break;case"shareOnEmailId":window.location.href=`mailto:?subject=${encodeURIComponent(n)}&body=${encodeURI(r)}%0d%0a`;break;case"searchOnGoogleId":window.open(`https://www.google.com/search?q=${f}`,"_blank");break;case"amazonMusicId":window.open(`https://music.amazon.com/search/${f}`,"_blank");break;case"appleMusicId":window.open(`https://music.apple.com/ca/search?term=${f}`,"_blank");break;case"spotifyId":window.open(`https://open.spotify.com/search/${f}`,"_blank");break;case"youTubeMusicId":a!==null?window.open(`https://music.youtube.com/watch?v=${a}`,"_blank"):window.open(`https://music.youtube.com/search?q=${f}`,"_blank");break}}},F=Ne();function ie(e,t="Text copied to clipboard",n="Unable to copy text to clipboard"){navigator.clipboard.writeText(e).then(()=>{P(t,3)},i=>{Te.error(`copyTextToClipboard() failed because ${i}`),P(n,5)})}var le=E("site-interaction"),v=document.documentElement.classList,Se={metaUiElements:null,listUiElements:null},K={},V={};function Ee(){le.log("init()"),Se.metaUiElements=new se("div.track-meta",!0),Se.listUiElements=new re("#tracklist"),K=new ae("footer-site-theme-toggle"),V=new oe("footer-gallery-layout-toggle"),window.addEventListener("load",()=>{document.querySelector(".widget ul.uf_channel")?.addEventListener("click",Y),document.querySelector(".widget ul.uf_artist")?.addEventListener("click",Y),document.querySelector(".widget.widget_archive ul")?.addEventListener("click",Y)})}function we(){K.setCurrent(),V.setCurrent()}var se=class extends q{elementClicked(){if(this.clicked("div.track-share-control"))return Le(this.closest("single-track, gallery-track"));if(this.clicked("span.term-links"))return Y(this.event)}},re=class extends q{elementClicked(){if(this.clicked("div.share-play-button"))return Le(this.closest("div.track-entry"));if(this.clicked("div.details-button"))return Ke(this.closest("div.track-entry"))}};function Y(e){e.target.matches("a")&&(e?.preventDefault(),T(C(e.target.href)))}function Le(e){let t=y(e,"data-track-artist"),n=y(e,"data-track-title"),i=F.show({bodyText:`${t} - ${n}`,filterBodyText:!0,bodyHtml:te(e,t,n),url:y(e,"data-track-url"),sourceUid:y(e,"data-track-source-uid")});xe(i,`${t} - ${n}`)}function Ke(e){let t=y(e,"data-track-artist"),n=y(e,"data-track-title"),i=parseInt(e.getAttribute("data-track-duration")),s=e.querySelector(".track-artists-links").querySelectorAll("a"),r=e.querySelector(".track-channels-links").querySelectorAll("a"),a=[];a.push({class:"track-details-entry",content:te(e,t,n)}),a.push({class:"header-entry",content:"Artists"}),s.forEach(o=>{a.push({clickId:`entry-${a.length}`,class:`icon-text ${o.classList[0]}`,title:"Go to Artist",content:o.innerText,link:o.href,icon:"link"})}),a.push({class:"header-entry",content:"Channels"}),r.forEach(o=>{a.push({clickId:`entry-${a.length}`,title:"Go to Channel",content:o.innerText,link:o.href,icon:"link"})});let l=D(`Track Details<span class="light-text lowercase-text">${i>0?ye(i):"N / A"}</span>`,a,"track-details",o=>{T(a.find(m=>m.clickId===o).link)});xe(l,`${t} - ${n}`)}function xe(e,t){document.getElementById(e).querySelector(".modal-track").title="Click / tap to Copy Artist & Title",document.getElementById(e)?.querySelector("img")?.addEventListener("click",()=>{ie(t,"Artist &amp Title copied to clipboard","Unable to copy Artist &amp Title to clipboard")})}function Ie(e,t,n){let i=Object.values(e).find(s=>s.id===t);return i!==void 0?i:n}function $e(e,t){let n=Object.values(e).findIndex(s=>s.id===t.id),i=Object.keys(e);return n+1<i.length?e[i[n+1]]:e[i[0]]}var ae=class extends ee{constructor(t){super(t,!1),this.themes={light:{id:"light",text:"light",class:"site-theme-light"},dark:{id:"dark",text:"dark",class:"site-theme-dark"},auto:{id:"auto",text:"auto"}},this.setCurrent(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>this.matchMediaPrefColorScheme())}setCurrent(){this.currentTheme=Ie(this.themes,g.site.theme,this.themes.auto),this.update()}matchMediaPrefColorScheme(){this.currentTheme.id===this.themes.auto.id&&this.update()}toggle(){this.currentTheme=$e(this.themes,this.currentTheme),g.site.theme=this.currentTheme.id}update(){let t=this.currentTheme;this.currentTheme.id===this.themes.auto.id&&(t=window.matchMedia("(prefers-color-scheme: dark)").matches?this.themes.dark:this.themes.light),Z(p.UF_SITE_THEME,t.id),v.contains(t.class)===!1&&(le.log(`SiteThemeToggle.update() - newSiteTheme: ${t.id}`),v.remove(this.themes.light.class,this.themes.dark.class),v.add(t.class)),this.value=this.currentTheme.text}},oe=class extends ee{constructor(t){super(t,!1),this.minWidth=`(max-width: ${ge("--gallery-layout-min-width")})`,this.layouts={oneColumn:{id:"1-column",text:"1 column",class:"gallery-1-col"},twoColumn:{id:"2-column",text:"2 column",class:"gallery-2-col"},threeColumn:{id:"3-column",text:"3 / 4 column",class:"gallery-3-col"}},this.setCurrent(),window.matchMedia(this.minWidth).addEventListener("change",n=>this.matchMediaMinWidth(n))}setCurrent(){this.currentLayout=Ie(this.layouts,g.gallery.layout,this.layouts.threeColumn),this.update()}matchMediaMinWidth(t){v.contains("gallery-layout")&&(t.matches?(v.remove(this.currentLayout.class),v.add(this.layouts.oneColumn.class)):(v.remove(this.layouts.oneColumn.class),v.add(this.currentLayout.class)))}toggle(){this.currentLayout=$e(this.layouts,this.currentLayout),g.gallery.layout=this.currentLayout.id}update(t){this.value=this.currentLayout.text,Z(p.UF_GALLERY_LAYOUT,this.currentLayout.id),!window.matchMedia(this.minWidth).matches&&(v.contains("gallery-layout")&&v.contains(this.currentLayout.class)===!1&&(le.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`),v.remove(this.layouts.oneColumn.class,this.layouts.twoColumn.class,this.layouts.threeColumn.class),v.add(this.currentLayout.class)),t?.type==="click"&&this.element.scrollIntoView())}};function Ae(e,t,n){let i=`<b>${e}</b>`;return n.forEach((s,r)=>{let a=ke(s.meta);i+=`
    <div class="track">
      <div class="thumbnail ${a.class}"
        data-term-url="${s.link}"
        data-term-slug="${t}"
        data-track-num="${r+1}"
        data-track-type="${s.meta.track_source_type}"
        data-track-id="track-${s.id}"
        data-track-source-uid="${a.uid}" title="Play Track"
        >
        <img src="${a.src}">
      </div>
      <div class="artist-title text-nowrap-ellipsis">
        <a href="${s.link}" title="Go to track"><span><b>${s.meta.track_artist}</b></span><br><span>${s.meta.track_title}</span></a>
      </div>
    </div>`}),i}function Pe(e,t){let n=`<b>${e}</b><br>`;return t.forEach(i=>n+=`<a href="${C(i.link)}">${i.name}</a>, `),n.slice(0,n.length-2)}function Me(e,t,n){let i=`<b>${e}</b><br>`;return t.forEach(s=>{i+=`<a href="${C(`${O}/artist/${s.artist_slug}/?channel=${n}`)}">${s.artist_name}</a> (${s.track_count})<br>`}),i}var h={termCache:{}};function ce(e,t,n){let i=y(e,"data-term-type"),s=parseInt(t.getAttribute("data-term-id")),r=y(t,"data-term-slug"),a=i==="channels";Ge(i,s,a?10:50,async l=>{let o=a?"Latest Tracks":"All Tracks",m=n.querySelector(".body-left");if(l!==null?(m.innerHTML=Ae(o,r,l),t.classList.add("data-fetched")):P("Failed to fetch track data!",30,"retry",()=>ce(e,t,n)),!a&&l!==null)ze(l,s,50,(d,S)=>{o=d==="artists"?"Related Artists":"In Channels",m=d==="artists"?n.querySelector(".artists"):n.querySelector(".channels"),S!==null?m.innerHTML=Pe(o,S):m.innerHTML=`<b>${o}</b><br>None found`});else if(l!==null){if(!("topArtists"in h.termCache[s])){let d=await B("top-artists",`channelId=${s}`,!0,"/wp-json/ultrafunk/v1/");d!==null&&d.status.code===200&&(h.termCache[s].topArtists=d.data)}n.querySelector(".top-artists").innerHTML=Me("Top Artists (tracks)",h.termCache[s].topArtists,r)}})}async function Ge(e,t,n,i){if(!(t in h.termCache)){let s=await B("tracks",`${e}=${t}&per_page=${n}&_fields=id,link,artists,channels,meta`,!0);s!==null&&s.status.code===200&&(h.termCache[t]={tracks:s.data})}i(h.termCache[t]!==void 0?h.termCache[t].tracks:null)}function ze(e,t,n,i){if("channels"in h.termCache[t]&&"artists"in h.termCache[t])i("channels",h.termCache[t].channels),i("artists",h.termCache[t].artists);else{let s=[],r=[];e.forEach(a=>{s.push.apply(s,a.channels),r.push.apply(r,a.artists)}),r=r.filter(a=>a!==t),_e("channels",t,[...new Set(s)],n,i),_e("artists",t,[...new Set(r)],n,i)}}async function _e(e,t,n,i,s){if(n.length>0){let r=await B(e,`include=${n}&per_page=${i}&_fields=link,name`,!0);r!==null&&r.status.code===200&&(h.termCache[t][e]=r.data)}s(e,h.termCache[t][e]!==void 0?h.termCache[t][e]:null)}function Ue(){h.termCache=JSON.parse(sessionStorage.getItem(p.UF_TERMLIST_CACHE)),h.termCache===null&&(h.termCache={})}function Re(){sessionStorage.setItem(p.UF_TERMLIST_CACHE,JSON.stringify(h.termCache))}function He(){sessionStorage.removeItem(p.UF_TERMLIST_CACHE)}function qe(){return Object.keys(h.termCache).length>0}var Je=E("termlist-controls"),G={listContainer:null,uiElements:null};function Oe(){Je.log("init()"),G.listContainer=document.getElementById("termlist-container"),G.uiElements=new ue("#termlist-container"),je()}function Be(){if(qe()){let e={pageUrl:window.location.href,scrollPos:Math.round(window.pageYOffset),openTermIds:[]};document.querySelectorAll(".termlist-entry").forEach(t=>{t.classList.contains("open")&&e.openTermIds.push(t.id)}),sessionStorage.setItem(p.UF_TERMLIST_STATE,JSON.stringify(e)),Re()}}function je(){if(Ue(),performance.getEntriesByType("navigation")[0].type!=="reload"){let e=JSON.parse(sessionStorage.getItem(p.UF_TERMLIST_STATE));e!==null&&e.pageUrl===window.location.href?(history.scrollRestoration="manual",e.openTermIds.forEach(t=>{document.getElementById(t).querySelector("div.termlist-header").click()}),window.scroll({top:e.scrollPos,left:0,behavior:"auto"})):history.scrollRestoration="auto"}sessionStorage.removeItem(p.UF_TERMLIST_STATE),He()}var ue=class extends q{elementClicked(){if(this.clicked("div.play-button"))return z(this.event,C(this.querySelector("a").href));if(this.clicked("div.shuffle-button"))return Xe(this.event,C(this.querySelector("a").href));if(this.clicked("div.share-find-button"))return Qe(this.element);if(this.clicked("div.termlist-header"))return tt(this.event);if(this.clicked("div.thumbnail"))return Ze(this.event,this.element);if(this.clicked("a"))return et(this.event,this.element)}};function z(e,t,n=null){e?.preventDefault(),Be(),sessionStorage.setItem(p.UF_AUTOPLAY,JSON.stringify({autoplay:e.shiftKey===!1,trackId:n,position:0})),T(t)}function Xe(e,t){A(p.UF_RESHUFFLE,"true"),z(e,t)}function Qe(e){let t=y(e,"data-term-name");F.show({title:`Share / Find ${y(e,"data-term-path")}`,bodyText:t,bodyHtml:`<b>${t}</b>`,url:C(e.getAttribute("data-term-url")),verb:"Find",icon:"search"})}function Ze(e,t){let n=G.listContainer.getAttribute("data-term-type")==="channels"?"channel":"artist",i=y(t,"data-term-slug"),s=parseInt(t.getAttribute("data-track-type")),r=t.getAttribute("data-track-source-uid");if(g.playback.preferredPlayer===he.GALLERY||s===pe.SOUNDCLOUD)z(e,t.getAttribute("data-term-url"),null);else{let a=parseInt(t.getAttribute("data-track-num")),l="";a>L.listPerPage&&(l=`page/${Math.ceil(a/L.listPerPage)}/`),z(e,`${O}/list/${n}/${i}/${l}`,r)}}function et(e,t){Be(),t.closest("div.permalink")!==null&&(e?.preventDefault(),T(C(t.href)))}function tt(e){let t=e.target.closest("div.termlist-entry"),n=t.querySelector("div.expand-toggle span"),i=t.querySelector("div.termlist-body"),s=i.style.display.length!==0,r=t.classList.contains("data-fetched");H(t,s?"open":"closed",s?"closed":"open"),n.textContent=s?"expand_more":"expand_less",i.style.display=s?"":"flex",!s&&!r&&ce(G.listContainer,t,i)}var it=()=>{let e=new ResizeObserver(d),t=null,n=null,i=null,s=null,r=!1,a=0;return window.addEventListener("load",()=>{_("#menu-primary-sections .menu-item-reshuffle a","click",be),_("#menu-primary-sections .menu-item-pref-player","click",()=>Ce.toggle()),document.getElementById("menu-primary-channels")?.addEventListener("click",m)}),{isVisible(){return r},scrolledTop(){n.style.display=""},init:l,toggle:o};function l(){t=document.getElementById("site-header"),n=document.querySelector("#site-navigation .nav-menu-outer"),i=document.querySelector("#site-navigation .nav-menu-inner"),s=document.getElementById("nav-menu-modal-overlay"),U("div.nav-menu-toggle","click",o),s.addEventListener("click",o),e.observe(n)}function o(){a=t.offsetHeight,t.classList.contains("sticky-nav-up")?n.style.display=r?"none":"flex":t.classList.contains("sticky-nav-down")===!1&&t.classList.toggle("hide-nav-menu")}function m(f){let c=f.target.closest("li.menu-item.menu-item-object-uf_channel");c!==null&&(ve()||x())&&(f?.preventDefault(),T(C(c.querySelector("a").href)))}function d(f){r=f[0].contentRect.height!==0,r?s.className===""&&(S(),s.style.backgroundColor=`rgba(0, 0, 0, ${Math.round(10*(g.site.modalOverlayOpacity/100))/10})`,s.classList.add("show")):(s.className="",n.style.display="",k())}function S(){if(R(M.SITE_MAX_WIDTH_MOBILE)){let f=w("margin-top",i)+w("margin-bottom",i);k("hidden","close","100vh",`overflow-y: auto; max-height: ${window.innerHeight-(a+f)}px`)}}function k(f="",c="menu",b="",j=""){document.documentElement.style.overflowY=f,t.querySelectorAll(".nav-menu-toggle span")?.forEach(X=>X.textContent=c),t.style.height=b,i.style=j}},I=it();var st=()=>{let e=new Event("allowKeyboardShortcuts"),t=new Event("denyKeyboardShortcuts"),n=null,i=null,s=null,r=null,a=!1;return{isVisible(){return a},init:l,toggle:o,hide:m};function l(){n=document.getElementById("site-header"),i=document.getElementById("search-container"),s=i.querySelector(".search-field"),r=n.querySelector("div.site-branding-container"),U(".nav-search-toggle","click",o),U(".nav-search-toggle","mousedown",c=>c.preventDefault()),s.addEventListener("blur",m),s.addEventListener("keydown",c=>{c.key==="Escape"&&(c.stopPropagation(),m())})}function o(){d()?S():m()}function m(){a&&k(!1,e,"","search")}function d(){return i.style.display.length===0?!(n.offsetHeight===0||R(M.SITE_MAX_WIDTH_MOBILE)&&n.querySelector(".navbar-container-mobile-top").offsetHeight===0&&n.querySelector(".navbar-container-mobile-up").offsetHeight===0):!1}function S(){f(),k(!0,t,"flex","close"),s.focus(),s.setSelectionRange(9999,9999)}function k(c,b,j,X){a=c,document.dispatchEvent(b),i.style.display=j,document.querySelectorAll("div.nav-search-toggle span").forEach(Ye=>Ye.textContent=X),a?document.getElementById("playback-controls").classList.add("hide"):document.getElementById("playback-controls").classList.remove("hide")}function f(){let c={};if(R(M.SITE_MAX_WIDTH_MOBILE))r.offsetHeight!==0?c.top=r.offsetTop:c.top=n.querySelector(".navbar-container-mobile-up").offsetTop,c=new DOMRect(63,c.top+3,document.body.clientWidth-60,30);else if(r.offsetHeight!==0){let b=r.getBoundingClientRect();c=new DOMRect(b.left,b.top+7,b.right,b.height-15)}else{let b=n.querySelector(".navbar-container").getBoundingClientRect();c=new DOMRect(b.left+88,b.top,b.right-90,b.height-1)}i.style.left=`${c.left}px`,i.style.top=`${c.top}px`,i.style.width=`${c.width-c.left}px`,i.style.height=`${c.height}px`}},$=st();var Fe=E("index"),u={siteHeader:null,introBanner:null,siteContent:null,siteContentSearch:null,fullscreenTarget:null};document.addEventListener("DOMContentLoaded",()=>{Fe.log("DOMContentLoaded"),rt(),u.introBanner!==null&&lt(),document.getElementById("termlist-container")!==null&&Oe(),u.siteContentSearch!==null&&(u.siteContentSearch.focus(),u.siteContentSearch.setSelectionRange(9999,9999)),ct(),de()});function rt(){Fe.log("initIndex()"),u.siteHeader=document.getElementById("site-header"),u.introBanner=document.getElementById("intro-banner"),u.siteContent=document.getElementById("site-content"),u.siteContentSearch=document.querySelector("#site-content form input.search-field"),Ee(),$.init(),I.init(),J.addEventListener(),ut.addEventListener(),document.addEventListener("fullscreenElement",e=>u.fullscreenTarget=e.fullscreenTarget),document.addEventListener("keydown",at)}document.addEventListener("settingsUpdated",()=>{fe(),we(),A(p.UF_GALLERY_PER_PAGE,g.gallery.tracksPerPage,Q*5),A(p.UF_PREFERRED_PLAYER,g.playback.preferredPlayer,Q*5)});function at(e){if(e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"Escape":I.isVisible()&&(e.preventDefault(),I.toggle());return}if(g.site.keyboardShortcuts&&e.repeat===!1&&e.ctrlKey===!1&&e.altKey===!1)switch(e.key){case"c":case"C":W()&&(e.preventDefault(),I.toggle());break;case"L":W()&&De()&&(V.toggle(e),J.trigger());break;case"s":case"S":W()&&ot()&&(e.preventDefault(),$.toggle());break;case"T":W()&&De()&&K.toggle(e);break;case"ArrowLeft":e.shiftKey&&x()&&(e.preventDefault(),T(L.prevPage));break;case"ArrowRight":e.shiftKey&&x()&&(e.preventDefault(),T(L.nextPage));break}}function W(){return $.isVisible()===!1&&u.siteContentSearch!==document.activeElement}function De(){return document.body.classList.contains("page-settings")===!1}function ot(){return u.fullscreenTarget===null}function lt(){me("localStorage")&&bannerProperty&&g.banners[bannerProperty]&&(u.introBanner.style.display="block",J.trigger(),_("#intro-banner .intro-banner-close-button","click",()=>{u.introBanner.style.display="",u.siteContent.style.marginTop="",g.banners[bannerProperty]=!1}))}function ct(){if(document.querySelector(".navbar-title .go-back-to")!==null){let e="";if(document.referrer.length===0)e="Previous Page";else{let t=new URL(decodeURIComponent(document.referrer));if(t.search.length!==0)e="Search Results";else if(t.pathname.length>1){let n=t.pathname.slice(-1)==="/"?1:0,i=t.pathname.slice(1,t.pathname.length-n).replace(/-/gi," ").split("/");i.forEach((s,r)=>{e+=r+1<i.length?s+" / ":s})}}document.querySelectorAll("#site-navigation .navbar-title").forEach(t=>{t.querySelector(".go-back-title").textContent=e.length>0?e:"Ultrafunk (home)",t.querySelector(".go-back-to").style.opacity=1})}}var J=(()=>{let e=0;return{getSiteHeaderYOffset(){return e},addEventListener:t,trigger:n};function t(){n(),window.addEventListener("resize",n)}function n(){let i=0;x()?i=w("--site-header-height-no-playback"):i=w("--site-header-height"),e=Math.round(i>150?i/2:i/3),u.introBanner!==null&&u.introBanner.style.display.length!==0&&(u.introBanner.style.marginTop=`${i}px`,u.siteContent.style.marginTop=`${w("--site-content-margin-top",document.body)}px`)}})(),ut=(()=>{let e=0,t=0,n=0,i=!1,s=44;return{addEventListener:r};function r(){a(),window.addEventListener("scroll",a)}function a(){let d=window.pageYOffset;d===0&&l(),d>e?(n+=d-e,n>s&&d>J.getSiteHeaderYOffset()&&(t=0,o())):(t+=e-d,t>s&&(n=0,m())),e=d}function l(){u.siteHeader.classList.remove("sticky-nav-down","sticky-nav-up"),u.siteHeader.classList.add("hide-nav-menu"),$.hide(),I.scrolledTop()}function o(){i===!1&&(i=!0,H(u.siteHeader,"sticky-nav-up","sticky-nav-down"),$.hide())}function m(){i===!0&&(i=!1,H(u.siteHeader,"sticky-nav-down","sticky-nav-up"))}})();
//# sourceMappingURL=index.js.map
