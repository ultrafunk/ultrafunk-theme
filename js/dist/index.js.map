{
  "version": 3,
  "sources": ["../src/site/theme-layout.js", "../src/settings/settings-ui.js", "../src/site/nav-menu.js", "../src/site/artists-channels-templates.js", "../src/site/artists-channels-rest.js", "../src/site/artists-channels.js", "../src/index.js"],
  "sourcesContent": ["//\r\n// Ultrafunk site theme and layout module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport { newDebugLogger }   from '../shared/debuglogger.js';\r\nimport { ElementToggle }    from '../shared/element-toggle.js';\r\nimport { KEY, setValue }    from '../shared/storage.js';\r\nimport { getCssPropString } from '../shared/utils.js';\r\n\r\nimport {\r\n  settings,\r\n  readSettings,\r\n} from '../shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = newDebugLogger('theme-layout');\r\nconst htmlClassList = document.documentElement.classList;\r\n\r\nexport let siteTheme     = {};\r\nexport let galleryLayout = {};\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nexport function init()\r\n{\r\n  debug.log('init()');\r\n\r\n  siteTheme     = new SiteThemeToggle('footer-site-theme-toggle');\r\n  galleryLayout = new GalleryLayoutToggle('footer-gallery-layout-toggle');\r\n\r\n  document.addEventListener('settingsUpdated', () =>\r\n  {\r\n    readSettings();\r\n    siteTheme.setCurrent();\r\n    galleryLayout.setCurrent();\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme and layout settings helpers\r\n// ************************************************************************************************\r\n\r\nfunction getCurrentSetting(settingsObject, currentId, defaultSetting)\r\n{\r\n  const setting = Object.values(settingsObject).find(value => (value.id === currentId));\r\n  return ((setting !== undefined) ? setting : defaultSetting);\r\n}\r\n\r\nfunction getNextSetting(settingsObject, currentSetting)\r\n{\r\n  const index = Object.values(settingsObject).findIndex(value => (value.id === currentSetting.id));\r\n  const keys  = Object.keys(settingsObject);\r\n\r\n  return (((index + 1) < keys.length)\r\n           ? settingsObject[keys[index + 1]]\r\n           : settingsObject[keys[0]]);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme handling\r\n// ************************************************************************************************\r\n\r\nclass SiteThemeToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.themes = {\r\n      light: { id: 'light', text: 'light', class: 'site-theme-light' },\r\n      dark:  { id: 'dark',  text: 'dark',  class: 'site-theme-dark'  },\r\n      black: { id: 'black', text: 'black', class: 'site-theme-black' },\r\n      auto:  { id: 'auto',  text: 'auto'                             }, // This has no CSS class since auto is always light or dark\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => this.matchMediaPrefColorScheme());\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentTheme = getCurrentSetting(this.themes, settings.site.theme, this.themes.auto);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaPrefColorScheme()\r\n  {\r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n      this.update();\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentTheme   = getNextSetting(this.themes, this.currentTheme);\r\n    settings.site.theme = this.currentTheme.id;\r\n  }\r\n\r\n  update()\r\n  {\r\n    let newTheme = this.currentTheme;\r\n\r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n    {\r\n      newTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\r\n                   ? this.themes.dark\r\n                   : this.themes.light;\r\n    }\r\n\r\n    setValue(KEY.UF_SITE_THEME, newTheme.id);\r\n\r\n    // Only update DOM if something has actually changed...\r\n    if (htmlClassList.contains(newTheme.class) === false)\r\n    {\r\n      debug.log(`SiteThemeToggle.update() - newSiteTheme: ${newTheme.id}`);\r\n\r\n      htmlClassList.remove(this.themes.light.class, this.themes.dark.class, this.themes.black.class);\r\n      htmlClassList.add(newTheme.class);\r\n    }\r\n\r\n    // Always update this because AUTO is not a separate class (only DARK + LIGHT are classes)\r\n    this.value = this.currentTheme.text;\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Gallery layout handling\r\n// ************************************************************************************************\r\n\r\nclass GalleryLayoutToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.minWidth = `(max-width: ${getCssPropString('--gallery-layout-min-width')})`;\r\n\r\n    this.layouts = {\r\n      oneColumn:   { id: '1-column', text: '1 column',     class: 'gallery-1-col' },\r\n      twoColumn:   { id: '2-column', text: '2 column',     class: 'gallery-2-col' },\r\n      threeColumn: { id: '3-column', text: '3 / 4 column', class: 'gallery-3-col' },\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia(this.minWidth).addEventListener('change', (event) => this.matchMediaMinWidth(event));\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentLayout = getCurrentSetting(this.layouts, settings.gallery.layout, this.layouts.threeColumn);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaMinWidth(event)\r\n  {\r\n    if (htmlClassList.contains('gallery-layout'))\r\n    {\r\n      if (event.matches)\r\n      {\r\n        htmlClassList.remove(this.currentLayout.class);\r\n        htmlClassList.add(this.layouts.oneColumn.class);\r\n      }\r\n      else\r\n      {\r\n        htmlClassList.remove(this.layouts.oneColumn.class);\r\n        htmlClassList.add(this.currentLayout.class);\r\n      }\r\n    }\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentLayout      = getNextSetting(this.layouts, this.currentLayout);\r\n    settings.gallery.layout = this.currentLayout.id;\r\n  }\r\n\r\n  update(event)\r\n  {\r\n    this.value = this.currentLayout.text;\r\n    setValue(KEY.UF_GALLERY_LAYOUT, this.currentLayout.id);\r\n\r\n    if (window.matchMedia(this.minWidth).matches)\r\n      return;\r\n\r\n    // Only update DOM if needed and when something has actually changed\r\n    if ((htmlClassList.contains('gallery-layout')) && (htmlClassList.contains(this.currentLayout.class) === false))\r\n    {\r\n      debug.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`);\r\n\r\n      htmlClassList.remove(this.layouts.oneColumn.class, this.layouts.twoColumn.class, this.layouts.threeColumn.class);\r\n      htmlClassList.add(this.currentLayout.class);\r\n    }\r\n\r\n    if (event?.type === 'click')\r\n      this.element.scrollIntoView();\r\n  }\r\n}\r\n", "//\r\n// View / change settings UI\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport { newDebugLogger } from '../shared/debuglogger.js';\r\nimport { showModal }      from '../shared/modal.js';\r\n\r\nimport {\r\n  showSnackbar,\r\n  showSnackbarLog,\r\n} from '../shared/snackbar.js';\r\n\r\nimport {\r\n  addListener,\r\n  isPointerTypeTouch,\r\n} from '../shared/utils.js';\r\n\r\nimport {\r\n  settings as storedSettings\r\n} from '../shared/session-data.js';\r\n\r\nimport {\r\n  KEY,\r\n  YEAR_IN_SECONDS,\r\n  setCookie,\r\n  deleteCookie,\r\n  readJson,\r\n  writeJson,\r\n  cleanupOldData,\r\n} from '../shared/storage.js';\r\n\r\nimport {\r\n  TYPE_INTEGER,\r\n  TYPE_BOOLEAN,\r\n  TYPE_STRING,\r\n  settingsSchema,\r\n  defaultSettings,\r\n  settingsDescriptions,\r\n} from './settings.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = newDebugLogger('settings-ui');\r\n\r\nconst m = {\r\n  settings:     null,\r\n  container:    null,\r\n  updatedEvent: new Event('settingsUpdated'),\r\n};\r\n\r\nconst config = {\r\n  containerId:  'settings-container',\r\n  saveResetId:  'settings-save-reset',\r\n};\r\n\r\nconst settingsSections = [\r\n  { name: 'Playback',       id: 'playback',     schema: settingsSchema.playback     },\r\n  { name: 'List Player',    id: 'list',         schema: settingsSchema.list         },\r\n  { name: 'Gallery Player', id: 'gallery',      schema: settingsSchema.gallery      },\r\n  { name: 'Mobile',         id: 'mobile',       schema: settingsSchema.mobile       },\r\n  { name: 'Site',           id: 'site',         schema: settingsSchema.site         },\r\n  { name: 'Experimental',   id: 'experimental', schema: settingsSchema.experimental },\r\n];\r\n\r\n\r\n// ************************************************************************************************\r\n// Init + settings read error handling\r\n// ************************************************************************************************\r\n\r\nexport function initSettingsUi()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.container = document.getElementById(config.containerId);\r\n\r\n  if (m.container !== null)\r\n  {\r\n    // For quick access to the Clear All Settings page...\r\n    if (document.URL.includes('?clear=true'))\r\n    {\r\n      readSettingsError();\r\n      return;\r\n    }\r\n\r\n    readSettings(false);\r\n\r\n    if (m.settings !== null)\r\n    {\r\n      settingsSections.forEach(entry => setCurrentSettings(m.settings[entry.id], entry.schema));\r\n\r\n      insertSettingsHtml();\r\n      m.container.style.opacity = 1;\r\n      m.container.addEventListener('click',       (event) => settingClicked(event));\r\n      m.container.addEventListener('contextmenu', (event) => settingClicked(event));\r\n\r\n      addListener(`#${config.saveResetId} .settings-save-button`,  'click', settingsSaveClick);\r\n      addListener(`#${config.saveResetId} .settings-reset-button`, 'click', settingsResetClick);\r\n\r\n      initSaveChangesPrompt();\r\n      initViewSnackbarLog();\r\n    }\r\n    else\r\n    {\r\n      readSettingsError();\r\n    }\r\n  }\r\n}\r\n\r\nfunction initSaveChangesPrompt()\r\n{\r\n  window.addEventListener('beforeunload', (event) =>\r\n  {\r\n    m.container.querySelectorAll('table tr')?.forEach(tableRow =>\r\n    {\r\n      if (tableRow.classList.contains('value-changed'))\r\n      {\r\n        event.preventDefault();\r\n        event.returnValue = true;\r\n      }\r\n    });\r\n  });\r\n}\r\n\r\nfunction initViewSnackbarLog()\r\n{\r\n  if (m.settings.site.snackbarMessageLog)\r\n  {\r\n    const html = ' <span title=\"Click / tap to view log\" class=\"show-snackbar-log\">View Snackbar Message Log</span>.';\r\n    document.querySelector('.entry-content p').insertAdjacentHTML('beforeend', html);\r\n    document.querySelector('.entry-content .show-snackbar-log').addEventListener('click', () => showSnackbarLog());\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Read and write settings JSON data\r\n// ************************************************************************************************\r\n\r\nfunction readSettings(setDefault = false)\r\n{\r\n  m.settings = readJson(KEY.UF_SETTINGS, setDefault ? defaultSettings : null, setDefault);\r\n}\r\n\r\nfunction writeSettings()\r\n{\r\n  writeJson(KEY.UF_SETTINGS, m.settings);\r\n\r\n  setCookie(KEY.UF_GALLERY_PER_PAGE, m.settings.gallery.tracksPerPage,    (YEAR_IN_SECONDS * 5));\r\n  setCookie(KEY.UF_LIST_PER_PAGE,    m.settings.list.tracksPerPage,       (YEAR_IN_SECONDS * 5));\r\n  setCookie(KEY.UF_PREFERRED_PLAYER, m.settings.playback.preferredPlayer, (YEAR_IN_SECONDS * 5));\r\n\r\n  document.dispatchEvent(m.updatedEvent);\r\n}\r\n\r\nconst errorTemplate = /*html*/ `<h3>An error occurred while reading Playback and Site settings</h3>\r\n  <p>This can be caused by several issues, but most likely it happened because of corrupt or malformed JSON data in the browsers Local Storage.</p>\r\n  <p>Clearing all settings stored locally in the browser will probably fix the problem, click on the button below to do that.\r\n  <b>Note:</b> All Playback and Site settings will be reset to default values.</p>\r\n  <div class=\"settings-clear-container\"><button type=\"button\" class=\"settings-clear-button\"><b>Clear All Settings</b></button></div>\r\n  <p>If that does not work, another possible fix is to clear all cached data stored in the browser, the following links contain more information about how to do that for\r\n  <a href=\"https://support.google.com/accounts/answer/32050\">Chrome</a> and\r\n  <a href=\"https://support.mozilla.org/en-US/kb/clear-cookies-and-site-data-firefox\">Firefox</a>.</p>`;\r\n\r\nfunction readSettingsError()\r\n{\r\n  document.getElementById(config.saveResetId).style.display = 'none';\r\n\r\n  m.container.insertAdjacentHTML('afterbegin', errorTemplate);\r\n  m.container.style.minHeight = '100%';\r\n  m.container.style.opacity = 1;\r\n\r\n  addListener(`#${config.containerId} .settings-clear-button`, 'click', () =>\r\n  {\r\n    localStorage.removeItem(KEY.UF_SETTINGS);\r\n    localStorage.removeItem(KEY.UF_SITE_THEME);\r\n    localStorage.removeItem(KEY.UF_GALLERY_LAYOUT);\r\n    deleteCookie(KEY.UF_GALLERY_PER_PAGE);\r\n    deleteCookie(KEY.UF_LIST_PER_PAGE);\r\n    deleteCookie(KEY.UF_PREFERRED_PLAYER);\r\n    deleteCookie(KEY.UF_SHUFFLE_UID);\r\n\r\n    cleanupOldData(true);\r\n    readSettings(true);\r\n\r\n    if (m.settings !== null)\r\n    {\r\n      showSnackbar({\r\n        message: 'All settings have been cleared',\r\n        duration: 5,\r\n        actionText: 'Reload',\r\n        actionClickCallback: () => (window.location.href = '/settings/'),\r\n        afterCloseCallback:  () => (window.location.href = '/settings/'),\r\n      });\r\n    }\r\n    else\r\n    {\r\n      showSnackbar({ message: 'Sorry, unable to clear all settings', duration: 5 });\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Set current (read) and default settings values\r\n// ************************************************************************************************\r\n\r\nfunction setCurrentSettings(settings, schema)\r\n{\r\n  Object.entries(settings).forEach(([key, settingValue]) =>\r\n  {\r\n    if (key in schema)\r\n    {\r\n      schema[key].current = getValueStringsIndex(schema[key], settingValue);\r\n\r\n      if (schema[key].current === -1)\r\n        schema[key].current = getValueStringsIndex(schema[key], schema[key].default);\r\n    }\r\n  });\r\n}\r\n\r\nfunction setDefaultSettings(settings, schema)\r\n{\r\n  Object.keys(settings).forEach(key =>\r\n  {\r\n    if (key in schema)\r\n    {\r\n      settings[key]       = schema[key].default;\r\n      schema[key].current = getValueStringsIndex(schema[key], schema[key].default);\r\n    }\r\n  });\r\n}\r\n\r\nfunction getValueStringsIndex(schemaEntry, findValue)\r\n{\r\n  return schemaEntry.values.findIndex(value => (value === findValue));\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Create HTML table content for settings\r\n// ************************************************************************************************\r\n\r\nfunction insertSettingsHtml()\r\n{\r\n  let html = `\\n<h3>${settingsSections[0].name}</h3>\\n<table id=\"${settingsSections[0].id}-settings\" class=\"settings\">\\n<tbody>`;\r\n  Object.entries(settingsSections[0].schema).forEach(row => (html += addTableRow(settingsSections[0].id, row)));\r\n\r\n  settingsSections.slice(1).forEach(entry =>\r\n  {\r\n    if (Object.keys(entry.schema).length > 0)\r\n    {\r\n      html += `\\n</tbody>\\n</table>\\n<h3>${entry.name}</h3>\\n<table id=\"${entry.id}-settings\" class=\"settings\">\\n<tbody>`;\r\n      Object.entries(entry.schema).forEach(row => (html += addTableRow(entry.id, row)));\r\n    }\r\n  });\r\n\r\n  m.container.insertAdjacentHTML('afterbegin', html + '\\n</tbody>\\n</table>\\n');\r\n}\r\n\r\nfunction addTableRow(idPrefix, entry)\r\n{\r\n  const defaultValueString = entry[1].valueStrings[getValueStringsIndex(entry[1], entry[1].default)];\r\n\r\n  const html = /*html*/\r\n    `\\n<tr id=\"${idPrefix}:${entry[0]}\" class=\"settings-entry\" title=\"Default: ${defaultValueString}\">\r\n      <td class=\"changed-indicator\"></td>\r\n      <td class=\"spacer\"></td>\r\n      <td class=\"description\">${entry[1].description}</td>\r\n      <td class=\"${getTypeValueClasses(entry[1])}\">${entry[1].valueStrings[entry[1].current]}</td>\r\n    </tr>`;\r\n\r\n  return html;\r\n}\r\n\r\nfunction getTypeValueClasses(entry)\r\n{\r\n  switch (entry.type)\r\n  {\r\n    case TYPE_INTEGER: return 'value-string type-integer';\r\n    case TYPE_STRING:  return 'value-string type-string';\r\n\r\n    case TYPE_BOOLEAN:\r\n      {\r\n        const currentValue = (entry.values[entry.current] === true) ? 'true' : 'false';\r\n        return `value-string type-boolean current-value-${currentValue}`;\r\n      }\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Update row data and DOM\r\n// ************************************************************************************************\r\n\r\nfunction updateRowData(element, settingsSection, settingsKey, schemaEntry)\r\n{\r\n  schemaEntry.current = ((schemaEntry.current + 1) < schemaEntry.values.length)\r\n                          ? schemaEntry.current + 1\r\n                          : schemaEntry.current = 0;\r\n  m.settings[settingsSection][settingsKey] = schemaEntry.values[schemaEntry.current];\r\n\r\n  if (m.settings[settingsSection][settingsKey] !== storedSettings[settingsSection][settingsKey])\r\n    element.classList.add('value-changed');\r\n  else\r\n    element.classList.remove('value-changed');\r\n\r\n  updateRowDOM(element.querySelector('.value-string'), schemaEntry);\r\n}\r\n\r\nfunction updateRowDOM(element, schemaEntry)\r\n{\r\n  element.classList   = getTypeValueClasses(schemaEntry);\r\n  element.textContent = schemaEntry.valueStrings[schemaEntry.current];\r\n}\r\n\r\nfunction updateSettingsDOM(settings, schema, idPrefix)\r\n{\r\n  Object.keys(settings).forEach(key =>\r\n  {\r\n    if (key in schema)\r\n      updateRowDOM(document.getElementById(`${idPrefix}:${key}`).querySelector('.value-string'), schema[key]);\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Update data and DOM on UI-events (click)\r\n// ************************************************************************************************\r\n\r\nfunction settingClicked(event)\r\n{\r\n  const clickedSetting = event.target.closest('tr');\r\n\r\n  if (clickedSetting !== null)\r\n  {\r\n    const settingsId   = clickedSetting.id.split(':')[0];\r\n    const settingsKey  = clickedSetting.id.split(':')[1];\r\n    const sectionIndex = settingsSections.findIndex(entry => (entry.id === settingsId));\r\n\r\n    if (event.type === 'contextmenu')\r\n    {\r\n      if (isPointerTypeTouch(event))\r\n      {\r\n        event.preventDefault();\r\n        showSettingDetailsModal(settingsId, settingsKey, sectionIndex);\r\n      }\r\n    }\r\n    else\r\n    {\r\n      if (event.shiftKey === true)\r\n        showSettingDetailsModal(settingsId, settingsKey, sectionIndex);\r\n      else\r\n        updateRowData(clickedSetting, settingsSections[sectionIndex].id, settingsKey, settingsSections[sectionIndex].schema[settingsKey]);\r\n    }\r\n  }\r\n}\r\n\r\nfunction showSettingDetailsModal(settingsId, settingsKey, sectionIndex)\r\n{\r\n  const schemaEntry = settingsSections[sectionIndex].schema[settingsKey];\r\n  let description   = schemaEntry.description;\r\n  let valueStrings  = '';\r\n\r\n  if ((settingsDescriptions[settingsId] !== undefined) && (settingsDescriptions[settingsId][settingsKey] !== undefined))\r\n    description = `<span class=\"normal-text\">${description}: </span>${settingsDescriptions[settingsId][settingsKey]}`;\r\n\r\n  schemaEntry.valueStrings.forEach(entry => (valueStrings += `${entry}, `));\r\n\r\n  showModal({\r\n    modalTitle: `${settingsSections[sectionIndex].name} setting details`,\r\n    modalBody:  `<p><b>Description</b><br>${description}</p>\r\n                 <p><b>Values</b><br>${valueStrings.slice(0, (valueStrings.length - 2))}</p>\r\n                 <p><b>Current Value</b><br>${schemaEntry.valueStrings[schemaEntry.current]}</p>\r\n                 <p><b>Default Value</b><br>${schemaEntry.valueStrings[getValueStringsIndex(schemaEntry, schemaEntry.default)]}</p>`,\r\n  });\r\n}\r\n\r\nfunction clearValueChanged()\r\n{\r\n  m.container.querySelectorAll('table  tr')?.forEach((tableRow) => tableRow.classList.remove('value-changed'));\r\n}\r\n\r\nfunction settingsSaveClick()\r\n{\r\n  writeSettings();\r\n  clearValueChanged();\r\n  showSnackbar({ message: 'All settings saved', duration: 3 });\r\n}\r\n\r\nfunction settingsResetClick()\r\n{\r\n  settingsSections.forEach(entry =>\r\n  {\r\n    setDefaultSettings(m.settings[entry.id], entry.schema);\r\n    updateSettingsDOM(m.settings[entry.id], entry.schema, entry.id);\r\n  });\r\n\r\n  clearValueChanged();\r\n\r\n  showSnackbar({\r\n    message: 'All settings reset',\r\n    duration: 4,\r\n    actionText: 'Undo',\r\n    actionClickCallback: () => location.reload(),\r\n    afterCloseCallback:  () => writeSettings(),\r\n  });\r\n}\r\n", "//\r\n// Ultrafunk site nav-menu\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils             from '../shared/utils.js';\r\nimport { playerType }         from './footer-toggles.js';\r\nimport { isSingleTrackFetch } from '../playback/gallery/single-track-fetch.js';\r\n\r\nimport {\r\n  noPlayback,\r\n  shuffleClickNavTo,\r\n} from '../playback/common/shared-gallery-list.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Main navigation menu handling closure\r\n// ************************************************************************************************\r\n\r\nconst navMenuClosure = (() =>\r\n{\r\n  let siteHeader = null, navMenuOuter = null, navMenuInner = null, navMenuOverlay = null;\r\n  let isVisible = false;\r\n  let siteHeaderHeight = 0;\r\n\r\n  window.addEventListener('load', () =>\r\n  {\r\n    utils.addListener('#menu-primary-sections .menu-item-reshuffle a', 'click', shuffleClickNavTo);\r\n    utils.addListener('#menu-primary-sections .menu-item-pref-player', 'click', (event) =>\r\n    {\r\n      event.preventDefault();\r\n      playerType.toggle();\r\n    });\r\n\r\n    document.getElementById('menu-primary-channels')?.addEventListener('click', menuClickUsePrefPlayer);\r\n  });\r\n\r\n  return {\r\n    isVisible() { return isVisible; },\r\n    init,\r\n    toggle,\r\n    hide,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    siteHeader     = document.getElementById('site-header');\r\n    navMenuOuter   = document.querySelector('#site-navigation .nav-menu-outer');\r\n    navMenuInner   = document.querySelector('#site-navigation .nav-menu-inner');\r\n    navMenuOverlay = document.getElementById('nav-menu-overlay');\r\n\r\n    utils.addListenerAll('button.nav-menu-toggle', 'click', toggle);\r\n    navMenuOverlay.addEventListener('click', hide);\r\n    window.addEventListener('resize', () => setNavMenuInnerSize());\r\n  }\r\n\r\n  function toggle()\r\n  {\r\n    siteHeaderHeight = siteHeader.offsetHeight;\r\n    isVisible ? hide() : show();\r\n  }\r\n\r\n  function show()\r\n  {\r\n    if (siteHeader.classList.contains('scrolling-down') === false)\r\n    {\r\n      isVisible = true;\r\n\r\n      siteHeader.classList.remove('hide-nav-menu');\r\n      navMenuOuter.style.display = 'flex';\r\n      navMenuOverlay.style.backgroundColor = utils.getOverlayOpacityCssValue();\r\n      navMenuOverlay.classList.add('show');\r\n\r\n      if (utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n        setNavMenuProps('hidden', 'close', '100vh');\r\n\r\n      setNavMenuInnerSize();\r\n    }\r\n  }\r\n\r\n  function hide()\r\n  {\r\n    isVisible = false;\r\n\r\n    siteHeader.classList.add('hide-nav-menu');\r\n    navMenuOuter.style.display = '';\r\n    navMenuOverlay.className = '';\r\n\r\n    setNavMenuProps();\r\n  }\r\n\r\n  function menuClickUsePrefPlayer(event)\r\n  {\r\n    const menuElement = event.target.closest('li.menu-item.menu-item-object-uf_channel');\r\n\r\n    if (menuElement !== null)\r\n    {\r\n      if (isSingleTrackFetch() || noPlayback())\r\n      {\r\n        event?.preventDefault();\r\n        utils.navToUrl(utils.getPrefPlayerUrl(menuElement.querySelector('a').href));\r\n      }\r\n    }\r\n  }\r\n\r\n  function setNavMenuInnerSize()\r\n  {\r\n    if (isVisible && utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n    {\r\n      const margins = utils.getCssPropValue('margin-top', navMenuInner) + utils.getCssPropValue('margin-bottom', navMenuInner);\r\n      navMenuInner.style = `overflow-y: auto; max-height: ${window.innerHeight - (siteHeaderHeight + margins)}px`;\r\n    }\r\n  }\r\n\r\n  function setNavMenuProps(overflowY = '', textContent = 'menu', height = '')\r\n  {\r\n    document.body.style.overflowY = overflowY;\r\n    siteHeader.querySelectorAll('.nav-menu-toggle span')?.forEach(element => element.textContent = textContent);\r\n    siteHeader.style.height = height;\r\n    navMenuInner.style = '';\r\n  }\r\n});\r\n\r\nexport const navMenu = navMenuClosure();\r\n", "//\r\n// Artists & Channels template functions\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport { THEME_ENV }        from '../config.js';\r\nimport { getPrefPlayerUrl } from '../shared/utils.js';\r\nimport { getThumbnailData } from '../playback/common/mediaplayer.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Render fetched track and meta-data as HTML\r\n// ************************************************************************************************\r\n\r\nexport function getTermlistHtml(header, termSlug, termData)\r\n{\r\n  let html = `<b>${header}</b>`;\r\n\r\n  termData.forEach((track, index) =>\r\n  {\r\n    const thumbnailData = getThumbnailData(track.meta);\r\n\r\n    html += /*html*/ `\r\n    <div class=\"track\">\r\n      <div class=\"thumbnail ${thumbnailData.class}\"\r\n        data-term-url=\"${track.link}\"\r\n        data-term-slug=\"${termSlug}\"\r\n        data-track-num=\"${index + 1}\"\r\n        data-track-type=\"${track.meta.track_source_type}\"\r\n        data-track-id=\"track-${track.id}\"\r\n        data-track-source-uid=\"${thumbnailData.uid}\" title=\"Play Track\"\r\n        >\r\n        <img src=\"${thumbnailData.src}\">\r\n      </div>\r\n      <div class=\"artist-title text-nowrap-ellipsis\">\r\n        <a href=\"${track.link}\" title=\"Go to track\"><span><b>${track.meta.track_artist}</b></span><br><span>${track.meta.track_title}</span></a>\r\n      </div>\r\n    </div>`;\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\nexport function getTermLinksHtml(header, termData)\r\n{\r\n  let html = `<b>${header}</b><br>`;\r\n\r\n  termData.forEach(item => (html += `<a href=\"${getPrefPlayerUrl(item.link)}\">${item.name}</a>, `));\r\n\r\n  return html.slice(0, (html.length - 2));\r\n}\r\n\r\nexport function getTopArtistsLinksHtml(header, artistsData, channelSlug)\r\n{\r\n  let html = `<b>${header}</b><br>`;\r\n\r\n  artistsData.forEach((item) =>\r\n  {\r\n    const artistLink = getPrefPlayerUrl(`${THEME_ENV.siteUrl}/artist/${item.artist_slug}/?channel=${channelSlug}`);\r\n    html += `<a href=\"${artistLink}\">${item.artist_name}</a> (${item.track_count})<br>`;\r\n  });\r\n\r\n  return html;\r\n}\r\n", "//\r\n// Artists & Channels REST data fetch and caching\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport { KEY }            from '../shared/storage.js';\r\nimport { showSnackbar }   from '../shared/snackbar.js';\r\nimport { stripAttribute } from '../shared/utils.js';\r\n\r\nimport {\r\n  HTTP_RESPONSE,\r\n  fetchRest,\r\n} from '../shared/fetch-rest.js';\r\n\r\nimport {\r\n  getTermlistHtml,\r\n  getTermLinksHtml,\r\n  getTopArtistsLinksHtml,\r\n} from './artists-channels-templates.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst m = { termCache: {} };\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch data via REST API and update DOM with results\r\n// ************************************************************************************************\r\n\r\nexport function loadTermlist(termlistContainer, termlistEntry, termlistBody)\r\n{\r\n  const termType      = stripAttribute(termlistContainer, 'data-term-type');\r\n  const termId        = parseInt(termlistEntry.getAttribute('data-term-id'));\r\n  const termSlug      = stripAttribute(termlistEntry, 'data-term-slug');\r\n  const isAllChannels = (termType === 'channels');\r\n\r\n  fetchTracks(termType, termId, (isAllChannels ? 10 : 50), (termData) =>\r\n  {\r\n    const header  = isAllChannels ? 'Latest Tracks' : 'All Tracks';\r\n    const element = termlistBody.querySelector('.body-left');\r\n\r\n    if (termData !== null)\r\n    {\r\n      element.innerHTML = getTermlistHtml(header, termSlug, termData);\r\n      termlistEntry.setAttribute('data-is-fetched', 1);\r\n    }\r\n    else\r\n    {\r\n      showSnackbar({\r\n        message: 'Failed to fetch track data!',\r\n        duration: 30,\r\n        actionText: 'retry',\r\n        actionClickCallback: () => loadTermlist(termlistContainer, termlistEntry, termlistBody),\r\n      });\r\n    }\r\n\r\n    if (!isAllChannels && (termData !== null))\r\n      setArtistsMeta(termData, termId, termlistBody);\r\n    else if (termData !== null)\r\n      setTopArtists(termId, termlistBody, termSlug);\r\n  });\r\n}\r\n\r\nfunction setArtistsMeta(termData, termId, termlistBody)\r\n{\r\n  fetchArtistMeta(termData, termId, 50, (metaType, metadata) =>\r\n  {\r\n    const header  = (metaType === 'artists') ? 'Related Artists' : 'In Channels';\r\n    const element = (metaType === 'artists')\r\n                      ? termlistBody.querySelector('.artists')\r\n                      : termlistBody.querySelector('.channels');\r\n\r\n    if (metadata !== null)\r\n      element.innerHTML = getTermLinksHtml(header, metadata);\r\n    else\r\n      element.innerHTML = `<b>${header}</b><br>None found`;\r\n  });\r\n}\r\n\r\nasync function setTopArtists(termId, termlistBody, termSlug)\r\n{\r\n  if (('topArtists' in m.termCache[termId]) === false)\r\n  {\r\n    const restResponse = await fetchRest({\r\n      endpoint: 'top-artists',\r\n      query:    `channel_id=${termId}`,\r\n      path:     '/wp-json/ultrafunk/v1/',\r\n    });\r\n\r\n    if (restResponse.status.code === HTTP_RESPONSE.OK)\r\n      m.termCache[termId]['topArtists'] = restResponse.data;\r\n  }\r\n\r\n  termlistBody.querySelector('.top-artists').innerHTML = getTopArtistsLinksHtml('Top Artists (tracks)', m.termCache[termId]['topArtists'], termSlug);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch tracks for a given termType with termId (channel or artist)\r\n// ************************************************************************************************\r\n\r\nasync function fetchTracks(termType, termId, maxItems, callback)\r\n{\r\n  if ((termId in m.termCache) === false)\r\n  {\r\n    const restResponse = await fetchRest({\r\n      endpoint: 'tracks',\r\n      query:    `${termType}=${termId}&per_page=${maxItems}&_fields=id,link,artists,channels,meta`,\r\n    });\r\n\r\n    if (restResponse.status.code === HTTP_RESPONSE.OK)\r\n      m.termCache[termId] = { tracks: restResponse.data };\r\n  }\r\n\r\n  callback((m.termCache[termId] !== undefined) ? m.termCache[termId].tracks : null);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Merge then fetch channels and artists for a given artist (termId)\r\n// ************************************************************************************************\r\n\r\nfunction fetchArtistMeta(termData, termId, maxItems, callback)\r\n{\r\n  if (('channels' in m.termCache[termId]) && ('artists' in m.termCache[termId]))\r\n  {\r\n    callback('channels', m.termCache[termId].channels);\r\n    callback('artists',  m.termCache[termId].artists);\r\n  }\r\n  else\r\n  {\r\n    const channels = [];\r\n    let   artists  = [];\r\n\r\n    termData.forEach(item =>\r\n    {\r\n      channels.push.apply(channels, item.channels);\r\n      artists.push.apply(artists, item.artists);\r\n    });\r\n\r\n    artists = artists.filter(item => (item !== termId));\r\n\r\n    fetchMeta('channels', termId, [...new Set(channels)], maxItems, callback);\r\n    fetchMeta('artists',  termId, [...new Set(artists)],  maxItems, callback);\r\n  }\r\n}\r\n\r\n// eslint-disable-next-line max-params\r\nasync function fetchMeta(\r\n  termType,\r\n  termId,\r\n  termIds,\r\n  maxItems,\r\n  callback\r\n)\r\n{\r\n  if (termIds.length > 0)\r\n  {\r\n    const restResponse = await fetchRest({\r\n      endpoint: termType,\r\n      query:    `include=${termIds}&per_page=${maxItems}&_fields=link,name`,\r\n    });\r\n\r\n    if (restResponse.status.code === HTTP_RESPONSE.OK)\r\n      m.termCache[termId][termType] = restResponse.data;\r\n  }\r\n  else\r\n  {\r\n    m.termCache[termId][termType] = null;\r\n  }\r\n\r\n  callback(termType, (m.termCache[termId][termType] !== undefined) ? m.termCache[termId][termType] : null);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Term cache functions\r\n// ************************************************************************************************\r\n\r\nexport function readCache()\r\n{\r\n  m.termCache = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_CACHE));\r\n\r\n  if (m.termCache === null)\r\n    m.termCache = {};\r\n}\r\n\r\nexport function writeCache()\r\n{\r\n  sessionStorage.setItem(KEY.UF_TERMLIST_CACHE, JSON.stringify(m.termCache));\r\n}\r\n\r\nexport function deleteCache()\r\n{\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_CACHE);\r\n}\r\n\r\nexport function hasCache()\r\n{\r\n  return (Object.keys(m.termCache).length > 0);\r\n}\r\n", "//\r\n// Artists & Channels UI module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as termlistRest      from './artists-channels-rest.js';\r\nimport * as utils             from '../shared/utils.js';\r\nimport { newDebugLogger }     from '../shared/debuglogger.js';\r\nimport { THEME_ENV }          from '../config.js';\r\nimport { ElementClick }       from '../shared/element-click.js';\r\nimport { shareModal }         from '../shared/share-modal.js';\r\nimport { KEY, setCookie }     from '../shared/storage.js';\r\nimport { PREF_PLAYER }        from '../settings/settings.js';\r\nimport { response, settings } from '../shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = newDebugLogger('artists-channels');\r\n\r\nconst m = {\r\n  listContainer:       null,\r\n  uiElements:          null,\r\n  navTitleFoundItems:  null,\r\n  termlistFilterInput: null,\r\n  termlistEntries:     null,\r\n  transitionTimeoutId: 0,\r\n};\r\n\r\nconst allowKeyboardShortcutsEvent = new Event('allowKeyboardShortcuts');\r\nconst denyKeyboardShortcutsEvent  = new Event('denyKeyboardShortcuts');\r\n\r\n\r\n// ************************************************************************************************\r\n// Init module\r\n// ************************************************************************************************\r\n\r\nexport function initArtistsChannels()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.listContainer = document.getElementById('termlist-container');\r\n  m.uiElements    = new UiElements('#termlist-container');\r\n\r\n  initArtistsChannelsFilter();\r\n  restoreState();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Save and restore Termlist state\r\n// ************************************************************************************************\r\n\r\nfunction saveState()\r\n{\r\n  if (termlistRest.hasCache())\r\n  {\r\n    const termlistState = {\r\n      pageUrl:     window.location.href,\r\n      scrollPos:   Math.round(window.scrollY),\r\n      openTermIds: [],\r\n    };\r\n\r\n    document.querySelectorAll('.termlist-entry').forEach(element =>\r\n    {\r\n      if (element.getAttribute('data-is-expanded') === '1')\r\n        termlistState.openTermIds.push(element.id);\r\n    });\r\n\r\n    sessionStorage.setItem(KEY.UF_TERMLIST_STATE, JSON.stringify(termlistState));\r\n    termlistRest.writeCache();\r\n  }\r\n}\r\n\r\nfunction restoreState()\r\n{\r\n  termlistRest.readCache();\r\n\r\n  if (performance.getEntriesByType('navigation')[0].type !== 'reload')\r\n  {\r\n    const termlistState = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_STATE));\r\n\r\n    if ((termlistState !== null) && (termlistState.pageUrl === window.location.href))\r\n    {\r\n      history.scrollRestoration = 'manual';\r\n\r\n      termlistState.openTermIds.forEach(item =>\r\n      {\r\n        document.getElementById(item).querySelector('div.termlist-header').click();\r\n      });\r\n\r\n      // Sometimes yield (setTimeout(0)) is needed for scrolling to actually happen... But why?\r\n      setTimeout(() => { window.scroll({ top: termlistState.scrollPos, left: 0 }); }, 0);\r\n    }\r\n    else\r\n    {\r\n      history.scrollRestoration = 'auto';\r\n    }\r\n  }\r\n\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_STATE);\r\n  termlistRest.deleteCache();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Realtime filtering of termlist items\r\n// ************************************************************************************************\r\n\r\nfunction initArtistsChannelsFilter()\r\n{\r\n  if (m.listContainer.getAttribute('data-term-type') === 'artists')\r\n  {\r\n    m.navTitleFoundItems  = document.querySelectorAll('div.navbar-title span.found-items');\r\n    m.termlistFilterInput = document.getElementById('termlist-filter-input');\r\n    m.termlistEntries     = m.listContainer.querySelectorAll('.termlist-entry');\r\n\r\n    m.termlistFilterInput.addEventListener('keyup', (event) => filterTermsList(event));\r\n    m.termlistFilterInput.addEventListener('focus', () => document.dispatchEvent(denyKeyboardShortcutsEvent));\r\n    m.termlistFilterInput.addEventListener('blur',  () => document.dispatchEvent(allowKeyboardShortcutsEvent));\r\n  //m.termlistFilterInput.focus();\r\n\r\n    // Lowercase all search term names now, optimizing comparison to user input later\r\n    termsListArray.forEach(entry => entry.name = entry.name.toLowerCase()); // eslint-disable-line no-undef\r\n\r\n    // Scroll current selection (artist letter) into view if needed...\r\n    document.querySelector('div.artist-letter.current').scrollIntoView(false);\r\n    m.termlistFilterInput.focus();\r\n  }\r\n}\r\n\r\nfunction filterTermsList(event)\r\n{\r\n  // Skip updating on keys that are not relevant\r\n  if (utils.isControlKey(event.key))\r\n    return;\r\n\r\n  const filterStart  = performance.now();\r\n  const filterString = m.termlistFilterInput.value.toLowerCase();\r\n  let   foundCount   = m.termlistEntries.length;\r\n\r\n  // Disable all CSS transitions when updating the filtered items\r\n  m.listContainer.classList.add('notransitions');\r\n\r\n  if (filterString.length >= 3)\r\n  {\r\n    // eslint-disable-next-line no-undef\r\n    const foundEntries = termsListArray.filter(entry => (entry.name.includes(filterString)));\r\n    let filteredOddEvenRow = 1;\r\n    foundCount = (foundEntries.length > 0) ? foundEntries.length : 0;\r\n\r\n    m.termlistEntries.forEach(element =>\r\n    {\r\n      if (foundEntries.some(entry => (entry.id === element.id)) === false)\r\n        element.className = 'termlist-entry hidden';\r\n      else\r\n        element.className = `termlist-entry ${(filteredOddEvenRow++ % 2) ? 'odd' : 'even'}`;\r\n    });\r\n  }\r\n  else\r\n  {\r\n    m.termlistEntries.forEach(element => (element.className = 'termlist-entry'));\r\n  }\r\n\r\n  const matchString = ((foundCount > 1) || (foundCount === 0)) ? 'matches' : 'match';\r\n\r\n  const foundItemsString = (filterString.length >= 3)\r\n    ? ` ( ${foundCount} ${matchString} <b>${utils.escHtml(filterString)}</b> )`\r\n    : ` ( ${foundCount} found )`;\r\n\r\n  m.navTitleFoundItems.forEach(element => (element.innerHTML = foundItemsString));\r\n\r\n  // Cancel previous timeout if already running to prevent multiple setTimeout()s\r\n  clearTimeout(m.transitionTimeoutId);\r\n  // Restore all CSS transitions when done updating\r\n  m.transitionTimeoutId = setTimeout(() => m.listContainer.classList.remove('notransitions'), 250);\r\n\r\n  const filterStop = performance.now();\r\n  debug.log(`filterTermsList(): ${(Math.round((filterStop - filterStart) * 100) / 100)} ms.`);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Click event functions\r\n// ************************************************************************************************\r\n\r\nclass UiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('button.play-button'))\r\n      return playClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n\r\n    if (this.clicked('button.shuffle-button'))\r\n      return shuffleClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n\r\n    if (this.clicked('button.share-find-button'))\r\n      return shareFindClick(this.element);\r\n\r\n    if (this.clicked('div.termlist-header'))\r\n      return termlistHeaderClick(this.event);\r\n\r\n    if (this.clicked('div.thumbnail'))\r\n      return playTrackClick(this.event, this.element);\r\n\r\n    if (this.clicked('a'))\r\n      return permalinkClick(this.event, this.element);\r\n  }\r\n}\r\n\r\nfunction playClick(event, destUrl, trackId = null)\r\n{\r\n  event?.preventDefault();\r\n  saveState();\r\n\r\n  // ToDo: Create a playbackSetting for this? Or use SHIFT + click to skip autoplay\r\n  sessionStorage.setItem(KEY.UF_AUTOPLAY, JSON.stringify({ autoplay: (event.shiftKey === false), trackId: trackId, position: 0 }));\r\n\r\n  utils.navToUrl(destUrl);\r\n}\r\n\r\nfunction shuffleClick(event, destUrl)\r\n{\r\n  setCookie(KEY.UF_RESHUFFLE, 'true');\r\n  playClick(event, destUrl);\r\n}\r\n\r\nfunction shareFindClick(element)\r\n{\r\n  const termName = utils.stripAttribute(element, 'data-term-name');\r\n  const urlType  = (m.listContainer.getAttribute('data-term-type') === 'channels') ? 'Channel Link' : 'Artist Link';\r\n\r\n  shareModal.show({\r\n    title:    `Share / Find ${utils.stripAttribute(element, 'data-term-path')}`,\r\n    bodyText: termName,\r\n    bodyHtml: `<b>${termName}</b>`,\r\n    url:      utils.getPrefPlayerUrl(element.getAttribute('data-term-url')),\r\n    urlType:  urlType,\r\n    verb:     'Find',\r\n    icon:     'search',\r\n  });\r\n}\r\n\r\nfunction playTrackClick(event, element)\r\n{\r\n  const termType  = (m.listContainer.getAttribute('data-term-type') === 'channels') ? 'channel' : 'artist';\r\n  const termSlug  = utils.stripAttribute(element, 'data-term-slug');\r\n\r\n  if (settings.playback.preferredPlayer === PREF_PLAYER.GALLERY)\r\n  {\r\n    playClick(event, element.getAttribute('data-term-url'), null);\r\n  }\r\n  else\r\n  {\r\n    const trackNum = parseInt(element.getAttribute('data-track-num'));\r\n    let pagination = '';\r\n\r\n    if (trackNum > response.listPerPage)\r\n      pagination = `page/${Math.ceil(trackNum / response.listPerPage)}/`;\r\n\r\n    playClick(event, `${THEME_ENV.siteUrl}/list/${termType}/${termSlug}/${pagination}`, utils.stripAttribute(element, 'data-track-id'));\r\n  }\r\n}\r\n\r\nfunction permalinkClick(event, element)\r\n{\r\n  saveState();\r\n\r\n  if (element.closest('div.permalink') !== null)\r\n    utils.linkClickUsePrefPlayer(event);\r\n}\r\n\r\nfunction termlistHeaderClick(event)\r\n{\r\n  const termlistEntry = event.target.closest('div.termlist-entry');\r\n  const expandToggle  = termlistEntry.querySelector('button.expand-toggle span');\r\n  const termlistBody  = termlistEntry.querySelector('div.termlist-body');\r\n  const isExpanded    = (termlistEntry.getAttribute('data-is-expanded') === '1');\r\n  const isDataFetched = (termlistEntry.getAttribute('data-is-fetched') === '1');\r\n\r\n  termlistEntry.setAttribute('data-is-expanded', isExpanded ? '' : '1');\r\n\r\n  expandToggle.textContent   = isExpanded ? 'expand_more' : 'expand_less';\r\n  termlistBody.style.display = isExpanded ? ''            : 'flex';\r\n\r\n  if (!isExpanded && !isDataFetched)\r\n    termlistRest.loadTermlist(m.listContainer, termlistEntry, termlistBody);\r\n}\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils              from './shared/utils.js';\r\nimport * as themeLayout        from './site/theme-layout.js';\r\nimport { initSettingsUi }      from './settings/settings-ui.js';\r\nimport { navMenu }             from './site/nav-menu.js';\r\nimport { navSearch }           from './site/nav-search.js';\r\nimport { initArtistsChannels } from './site/artists-channels.js';\r\nimport { noPlayback }          from './playback/common/shared-gallery-list.js';\r\nimport { showSnackbarLog }     from './shared/snackbar.js';\r\n\r\nimport {\r\n  newDebugLogger,\r\n  logStartupExecutionTime,\r\n} from './shared/debuglogger.js';\r\n\r\nimport {\r\n  response,\r\n  settings,\r\n} from './shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = newDebugLogger('index');\r\nconst m     = { keyboardShortcuts: null };\r\n\r\nconst elements = {\r\n  siteHeader:        null,\r\n  siteContent:       null,\r\n  siteContentSearch: null,\r\n  fullscreenTarget:  null,\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Document ready and document / window event listeners\r\n// ************************************************************************************************\r\n\r\ndocument.addEventListener('DOMContentLoaded', () =>\r\n{\r\n  debug.log('DOMContentLoaded');\r\n\r\n  initIndex();\r\n\r\n  if (response?.get?.termlist)\r\n    initArtistsChannels();\r\n  else if (isSettingsPage())\r\n    initSettingsUi();\r\n\r\n  setSiteContentSearchFocus();\r\n  setPreviousPageTitle();\r\n  logStartupExecutionTime();\r\n});\r\n\r\nfunction initIndex()\r\n{\r\n  m.keyboardShortcuts = utils.keyboardShortcuts(settings.site.keyboardShortcuts);\r\n\r\n  elements.siteHeader        = document.getElementById('site-header');\r\n  elements.siteContent       = document.getElementById('site-content');\r\n  elements.siteContentSearch = document.querySelector('#site-content form input.search-field');\r\n\r\n  themeLayout.init();\r\n  navSearch.init();\r\n  navMenu.init();\r\n\r\n  resize.addEventListener();\r\n  scroll.addEventListener();\r\n\r\n  document.addEventListener('fullscreenElement', (event) => (elements.fullscreenTarget = event.fullscreenTarget));\r\n  document.addEventListener('keydown', documentEventKeyDown);\r\n\r\n  window.addEventListener('load', () => utils.addListener('aside.widget-area', 'click', utils.linkClickUsePrefPlayer));\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Keyboard events handling\r\n// ************************************************************************************************\r\n\r\nfunction documentEventKeyDown(event)\r\n{\r\n  // UI keyboard events (cannot be disable by the user)\r\n  if ((event.repeat  === false) &&\r\n      (event.ctrlKey === false) &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'Escape':\r\n        if (navMenu.isVisible())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.hide();\r\n        }\r\n        return;\r\n    }\r\n  }\r\n\r\n  // User enabled keyboard shortcuts (on by default)\r\n  if (m.keyboardShortcuts.allow() &&\r\n      (event.repeat  === false)   &&\r\n      (event.ctrlKey === false)   &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'L':\r\n        if (searchNotFocused() && !isSettingsPage())\r\n        {\r\n          themeLayout.galleryLayout.toggle(event);\r\n          resize.trigger();\r\n        }\r\n        break;\r\n\r\n      case 'n':\r\n      case 'N':\r\n        if (searchNotFocused())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.toggle();\r\n        }\r\n        break;\r\n\r\n      case 's':\r\n      case 'S':\r\n        if (searchNotFocused() && notFullscreenElement())\r\n        {\r\n          event.preventDefault();\r\n          navSearch.toggle();\r\n        }\r\n        break;\r\n\r\n      case 'T':\r\n        if (searchNotFocused() && !isSettingsPage())\r\n        {\r\n          themeLayout.siteTheme.toggle(event);\r\n        }\r\n        break;\r\n\r\n      case 'v':\r\n        if (settings.site.snackbarMessageLog && searchNotFocused())\r\n        {\r\n          event.preventDefault();\r\n          showSnackbarLog();\r\n        }\r\n        break;\r\n\r\n      case 'ArrowLeft':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.prevPage);\r\n        }\r\n        break;\r\n\r\n      case 'ArrowRight':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.nextPage);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction searchNotFocused()\r\n{\r\n  return ((navSearch.isVisible() === false) && (elements.siteContentSearch !== document.activeElement));\r\n}\r\n\r\nfunction isSettingsPage()\r\n{\r\n  return document.body.classList.contains('page-settings');\r\n}\r\n\r\nfunction notFullscreenElement()\r\n{\r\n  return ((elements.fullscreenTarget === null) ? true : false);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Misc. support functions\r\n// ************************************************************************************************\r\n\r\nfunction setSiteContentSearchFocus()\r\n{\r\n  if (elements.siteContentSearch !== null)\r\n  {\r\n    elements.siteContentSearch.focus();\r\n    elements.siteContentSearch.setSelectionRange(9999, 9999);\r\n  }\r\n}\r\n\r\nfunction setPreviousPageTitle()\r\n{\r\n  if (document.querySelector('.navbar-title .go-back-to') !== null)\r\n  {\r\n    let pathString = '';\r\n\r\n    if (document.referrer.length === 0)\r\n    {\r\n      pathString = 'Previous Page';\r\n    }\r\n    else\r\n    {\r\n      const referrerUrlParts = new URL(decodeURIComponent(document.referrer));\r\n\r\n      if (referrerUrlParts.search.length !== 0)\r\n      {\r\n        pathString = 'Search Results';\r\n      }\r\n      else if (referrerUrlParts.pathname.length > 1)\r\n      {\r\n        const endSlash  = (referrerUrlParts.pathname.slice(-1) === '/') ? 1 : 0;\r\n        const pathParts = referrerUrlParts.pathname.slice(1, referrerUrlParts.pathname.length - endSlash).replace(/-/gi, ' ').split('/');\r\n\r\n        pathParts.forEach((part, index) =>\r\n        {\r\n          pathString += ((index + 1) < pathParts.length) ? (part + ' / ') : part;\r\n        });\r\n      }\r\n    }\r\n\r\n    document.querySelectorAll('#site-navigation .navbar-title').forEach(element =>\r\n    {\r\n      element.querySelector('.go-back-title').textContent = (pathString.length > 0) ? pathString : 'Ultrafunk (home)';\r\n      element.querySelector('.go-back-to').style.opacity  = 1;\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// window.addEventListener('resize') handling\r\n// ************************************************************************************************\r\n\r\nconst resize = (() =>\r\n{\r\n  let siteHeaderYOffset = 0;\r\n\r\n  return {\r\n    getSiteHeaderYOffset() { return siteHeaderYOffset; },\r\n    addEventListener,\r\n    trigger: resizeEvent,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    resizeEvent();\r\n    window.addEventListener('resize', resizeEvent);\r\n  }\r\n\r\n  function resizeEvent()\r\n  {\r\n    let headerHeight = 0;\r\n\r\n    if (noPlayback())\r\n      headerHeight = utils.getCssPropValue('--site-header-height-no-playback');\r\n    else\r\n      headerHeight = utils.getCssPropValue('--site-header-height');\r\n\r\n    siteHeaderYOffset = Math.round((headerHeight > 150) ? (headerHeight / 2) : (headerHeight / 3));\r\n\r\n    // Setting the CSS variable --scrollbar-width only on resize events prevent document\r\n    // reflow / repaint delays when modals are shown (body.scrolling-disabled)\r\n    document.body.style.setProperty('--scrollbar-width', `${window.innerWidth - document.documentElement.clientWidth}px`);\r\n  }\r\n})();\r\n\r\n\r\n// ************************************************************************************************\r\n// window.addEventListener('scroll') handling\r\n// ************************************************************************************************\r\n\r\nconst scroll = (() =>\r\n{\r\n  let previousScrollPos = 0;\r\n  let scrollDeltaUp     = 0;\r\n  let scrollDeltaDown   = 0;\r\n  let isScrolledDown    = false;\r\n  const scrollThreshold = 44; // px minimum amount of scrolling for direction change\r\n\r\n  return {\r\n    addEventListener,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    scrollEvent();\r\n    window.addEventListener('scroll', scrollEvent);\r\n  }\r\n\r\n  function scrollEvent()\r\n  {\r\n    const currentScrollPos = window.scrollY;\r\n\r\n    if (currentScrollPos === 0)\r\n    {\r\n      scrolledTop();\r\n    }\r\n    else if (currentScrollPos > previousScrollPos)\r\n    {\r\n      scrollDeltaDown += (currentScrollPos - previousScrollPos);\r\n\r\n      if ((scrollDeltaDown > scrollThreshold) && (currentScrollPos > resize.getSiteHeaderYOffset()))\r\n      {\r\n        scrollDeltaUp = 0;\r\n        scrolledDown();\r\n      }\r\n    }\r\n    else\r\n    {\r\n      scrollDeltaUp += (previousScrollPos - currentScrollPos);\r\n\r\n      if (scrollDeltaUp > scrollThreshold)\r\n      {\r\n        scrollDeltaDown = 0;\r\n        scrolledUp();\r\n      }\r\n    }\r\n\r\n    previousScrollPos = currentScrollPos;\r\n  }\r\n\r\n  function scrolledTop()\r\n  {\r\n    elements.siteHeader.classList.remove('scrolling-down', 'scrolling-up');\r\n    elements.siteHeader.classList.add('hide-nav-menu');\r\n    navSearch.hide();\r\n    navMenu.hide();\r\n  }\r\n\r\n  function scrolledDown()\r\n  {\r\n    if (isScrolledDown === false)\r\n    {\r\n      isScrolledDown = true;\r\n      utils.replaceClass(elements.siteHeader, 'scrolling-up', 'scrolling-down');\r\n      navSearch.hide();\r\n      navMenu.hide();\r\n    }\r\n  }\r\n\r\n  function scrolledUp()\r\n  {\r\n    if (isScrolledDown === true)\r\n    {\r\n      isScrolledDown = false;\r\n      utils.replaceClass(elements.siteHeader, 'scrolling-down', 'scrolling-up');\r\n    }\r\n  }\r\n})();\r\n"],
  "mappings": "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",
  "names": ["debug", "newDebugLogger", "htmlClassList", "siteTheme", "galleryLayout", "init", "SiteThemeToggle", "GalleryLayoutToggle", "readSettings", "getCurrentSetting", "settingsObject", "currentId", "defaultSetting", "setting", "value", "getNextSetting", "currentSetting", "index", "keys", "ElementToggle", "elementId", "settings", "newTheme", "setValue", "KEY", "getCssPropString", "event", "debug", "newDebugLogger", "m", "config", "settingsSections", "settingsSchema", "initSettingsUi", "readSettingsError", "readSettings", "entry", "setCurrentSettings", "insertSettingsHtml", "event", "settingClicked", "addListener", "settingsSaveClick", "settingsResetClick", "initSaveChangesPrompt", "initViewSnackbarLog", "tableRow", "showSnackbarLog", "setDefault", "readJson", "KEY", "defaultSettings", "writeSettings", "writeJson", "setCookie", "YEAR_IN_SECONDS", "errorTemplate", "deleteCookie", "cleanupOldData", "showSnackbar", "settings", "schema", "key", "settingValue", "getValueStringsIndex", "setDefaultSettings", "schemaEntry", "findValue", "value", "html", "row", "addTableRow", "idPrefix", "defaultValueString", "getTypeValueClasses", "updateRowData", "element", "settingsSection", "settingsKey", "updateRowDOM", "updateSettingsDOM", "clickedSetting", "settingsId", "sectionIndex", "isPointerTypeTouch", "showSettingDetailsModal", "description", "valueStrings", "settingsDescriptions", "showModal", "clearValueChanged", "navMenuClosure", "siteHeader", "navMenuOuter", "navMenuInner", "navMenuOverlay", "isVisible", "siteHeaderHeight", "addListener", "shuffleClickNavTo", "event", "playerType", "menuClickUsePrefPlayer", "init", "toggle", "hide", "addListenerAll", "setNavMenuInnerSize", "show", "getOverlayOpacityCssValue", "matchesMedia", "MATCH", "setNavMenuProps", "menuElement", "isSingleTrackFetch", "noPlayback", "navToUrl", "getPrefPlayerUrl", "margins", "getCssPropValue", "overflowY", "textContent", "height", "element", "navMenu", "getTermlistHtml", "header", "termSlug", "termData", "html", "track", "index", "thumbnailData", "getThumbnailData", "getTermLinksHtml", "item", "getPrefPlayerUrl", "getTopArtistsLinksHtml", "artistsData", "channelSlug", "artistLink", "THEME_ENV", "m", "loadTermlist", "termlistContainer", "termlistEntry", "termlistBody", "termType", "stripAttribute", "termId", "termSlug", "isAllChannels", "fetchTracks", "termData", "header", "element", "getTermlistHtml", "showSnackbar", "setArtistsMeta", "setTopArtists", "fetchArtistMeta", "metaType", "metadata", "getTermLinksHtml", "restResponse", "fetchRest", "HTTP_RESPONSE", "getTopArtistsLinksHtml", "maxItems", "callback", "channels", "artists", "item", "fetchMeta", "termIds", "readCache", "KEY", "writeCache", "deleteCache", "hasCache", "debug", "newDebugLogger", "m", "allowKeyboardShortcutsEvent", "denyKeyboardShortcutsEvent", "initArtistsChannels", "UiElements", "initArtistsChannelsFilter", "restoreState", "saveState", "hasCache", "termlistState", "element", "KEY", "writeCache", "readCache", "item", "deleteCache", "event", "filterTermsList", "entry", "isControlKey", "filterStart", "filterString", "foundCount", "foundEntries", "filteredOddEvenRow", "matchString", "foundItemsString", "escHtml", "filterStop", "ElementClick", "playClick", "getPrefPlayerUrl", "shuffleClick", "shareFindClick", "termlistHeaderClick", "playTrackClick", "permalinkClick", "destUrl", "trackId", "navToUrl", "setCookie", "termName", "stripAttribute", "urlType", "shareModal", "termType", "termSlug", "settings", "PREF_PLAYER", "trackNum", "pagination", "response", "THEME_ENV", "linkClickUsePrefPlayer", "termlistEntry", "expandToggle", "termlistBody", "isExpanded", "isDataFetched", "loadTermlist", "debug", "newDebugLogger", "m", "elements", "initIndex", "response", "initArtistsChannels", "isSettingsPage", "initSettingsUi", "setSiteContentSearchFocus", "setPreviousPageTitle", "logStartupExecutionTime", "keyboardShortcuts", "settings", "init", "navSearch", "navMenu", "resize", "scroll", "event", "documentEventKeyDown", "addListener", "linkClickUsePrefPlayer", "searchNotFocused", "galleryLayout", "notFullscreenElement", "siteTheme", "showSnackbarLog", "noPlayback", "navToUrl", "pathString", "referrerUrlParts", "endSlash", "pathParts", "part", "index", "element", "siteHeaderYOffset", "addEventListener", "resizeEvent", "headerHeight", "getCssPropValue", "previousScrollPos", "scrollDeltaUp", "scrollDeltaDown", "isScrolledDown", "scrollThreshold", "scrollEvent", "currentScrollPos", "scrolledTop", "scrolledDown", "scrolledUp", "replaceClass"]
}
