{
  "version": 3,
  "sources": ["../src/site/share-modal.js", "../src/site/interaction.js", "../src/site/termlist-templates.js", "../src/site/termlist-rest.js", "../src/site/termlist.js", "../src/site/nav-menu.js", "../src/site/nav-search.js", "../src/index.js"],
  "sourcesContent": ["//\r\n// Share modal\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from '../shared/debuglogger.js';\r\nimport { showModal }    from '../shared/modal.js';\r\nimport { showSnackbar } from '../shared/snackbar.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('share-modal');\r\n\r\n\r\n// ************************************************************************************************\r\n// Share Modal Dialog closure\r\n// ************************************************************************************************\r\n\r\nconst shareModalClosure = (() =>\r\n{\r\n  const filterBodyTextRegEx = /\\s{1,}[\\u002D\\u00B7\\u2013]\\s{1,}/i;\r\n  let title, bodyText, filterBodyText, bodyHtml, url, sourceUid, verb;\r\n\r\n  return {\r\n    show,\r\n  };\r\n  \r\n  function show(args)\r\n  {\r\n    ({\r\n      title          = 'Share / Play Track',\r\n      bodyText       = null,\r\n      filterBodyText = false,\r\n      bodyHtml       = null,\r\n      url            = null,\r\n      sourceUid      = null,\r\n      verb           = 'Play'\r\n    } = args);\r\n\r\n    return showModal(title, getSingleChoiceList(), 'share', singleChoiceListClick);\r\n  }\r\n\r\n  function getSingleChoiceList()\r\n  {\r\n    const singleChoiceList = [\r\n      { clickId: 'copyToClipboardId', icon: 'content_copy', content: '<b>Copy Link</b> to Clipboard'   },\r\n      { clickId: 'shareOnEmailId',    icon: 'share',        content: '<b>Share</b> on Email'           },\r\n      { clickId: 'amazonMusicId',     icon: 'link',         content: `<b>${verb}</b> on Amazon Music`  },\r\n      { clickId: 'appleMusicId',      icon: 'link',         content: `<b>${verb}</b> on Apple Music`   },\r\n      { clickId: 'spotifyId',         icon: 'link',         content: `<b>${verb}</b> on Spotify`       },\r\n      { clickId: 'tidalId',           icon: 'link',         content: `<b>${verb}</b> on Tidal`         },\r\n      { clickId: 'youTubeMusicId',    icon: 'link',         content: `<b>${verb}</b> on YouTube Music` },\r\n    ];\r\n\r\n    if (bodyHtml !== null)\r\n      singleChoiceList.unshift({ class: 'track-share-entry', content: bodyHtml });\r\n\r\n    return singleChoiceList;\r\n  }\r\n\r\n  function singleChoiceListClick(clickedId)\r\n  {\r\n    debug.log(`singleChoiceListClick(): ${clickedId} - title: \"${title}\" - bodyText: \"${bodyText}\" - filterBodyText: ${filterBodyText} - url: ${url} - sourceUid: ${sourceUid} - verb: ${verb}`);\r\n\r\n    const searchString = filterBodyText\r\n                           ? encodeURIComponent(bodyText.replace(filterBodyTextRegEx, ' '))\r\n                           : encodeURIComponent(bodyText);\r\n\r\n    switch (clickedId)\r\n    {\r\n      case 'copyToClipboardId':\r\n        copyTextToClipboard(url, 'Track link copied to clipboard', 'Unable to copy Track link to clipboard');\r\n        break;\r\n\r\n      case 'shareOnEmailId':\r\n        window.location.href = `mailto:?subject=${encodeURIComponent(bodyText)}&body=${encodeURI(url)}%0d%0a`;\r\n        break;\r\n\r\n      case 'amazonMusicId':\r\n        window.open(`https://music.amazon.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'appleMusicId':\r\n        window.open(`https://music.apple.com/ca/search?term=${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'spotifyId':\r\n        window.open(`https://open.spotify.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'tidalId':\r\n        window.open(`https://google.com/search?q=${searchString}%20site:tidal.com`, \"_blank\");\r\n        break;\r\n\r\n      case 'youTubeMusicId':\r\n        {\r\n          if (sourceUid !== null)\r\n            window.open(`https://music.youtube.com/watch?v=${sourceUid}`, \"_blank\");\r\n          else\r\n            window.open(`https://music.youtube.com/search?q=${searchString}`, \"_blank\");\r\n        }\r\n        break;\r\n    }\r\n  }\r\n});\r\n\r\nexport const shareModal = shareModalClosure();\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nexport function copyTextToClipboard(clipboardText, successMessage = 'Text copied to clipboard', errorMessage = 'Unable to copy text to clipboard')\r\n{\r\n  navigator.clipboard.writeText(clipboardText).then(() =>\r\n  {\r\n    showSnackbar(successMessage, 3);\r\n  },\r\n  (reason) =>\r\n  {\r\n    debug.error(`copyTextToClipboard() failed because ${reason}`);\r\n    showSnackbar(errorMessage, 5);\r\n  });\r\n}\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger      from '../shared/debuglogger.js';\r\nimport * as utils            from '../shared/utils.js';\r\nimport ElementToggle         from '../shared/element-toggle.js';\r\nimport ElementClick          from '../shared/element-click.js';\r\nimport { settings }          from '../shared/session-data.js';\r\nimport { showModal }         from '../shared/modal.js';\r\nimport { KEY, setValue }     from '../shared/storage.js';\r\nimport { getModalTrackHtml } from '../shared/modal-templates.js';\r\n\r\nimport {\r\n  shareModal,\r\n  copyTextToClipboard,\r\n} from './share-modal.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('site-interaction');\r\nconst htmlClassList = document.documentElement.classList;\r\n\r\nconst m = {\r\n  metaUiElements: null,\r\n  listUiElements: null,\r\n};\r\n\r\nexport let siteTheme     = {};\r\nexport let galleryLayout = {};\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nexport function init()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.metaUiElements = new MetaUiElements();\r\n  m.listUiElements = new ListUiElements();\r\n  siteTheme        = new SiteThemeToggle('footer-site-theme-toggle');\r\n  galleryLayout    = new GalleryLayoutToggle('footer-gallery-layout-toggle');\r\n\r\n  utils.addListenerAll('.entry-meta', 'click', (event) => m.metaUiElements.clickHandler(event));\r\n  document.getElementById('tracklist')?.addEventListener('click', (event) => m.listUiElements.clickHandler(event));\r\n\r\n  window.addEventListener('load', () =>\r\n  {\r\n    document.querySelector('.widget ul.uf_channel')?.addEventListener('click', linkClick);\r\n    document.querySelector('.widget ul.uf_artist')?.addEventListener('click', linkClick);\r\n    document.querySelector('.widget.widget_archive ul')?.addEventListener('click', linkClick);\r\n  });\r\n}\r\n\r\nexport function settingsUpdated()\r\n{\r\n  siteTheme.setCurrent();\r\n  galleryLayout.setCurrent();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// UI elements event handling\r\n// ************************************************************************************************\r\n\r\nclass MetaUiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.track-share-control'))\r\n      return sharePlayClick(this.event.target);\r\n  \r\n    if (this.clicked('span.term-links'))\r\n      return linkClick(this.event);\r\n  }\r\n}\r\n\r\nclass ListUiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.share-play-button'))\r\n      return sharePlayClick(this.closest('div.track-entry'));\r\n    \r\n    if (this.clicked('div.details-button'))\r\n      return detailsClick(this.closest('div.track-entry'));\r\n  }\r\n}\r\n\r\nfunction linkClick(event)\r\n{\r\n  if (event.target.matches('a'))\r\n  {\r\n    event?.preventDefault();\r\n    utils.navToUrl(utils.getPrefPlayerUrl(event.target.href));\r\n  }\r\n}\r\n\r\nfunction sharePlayClick(element)\r\n{\r\n  const trackArtist = utils.stripAttribute(element, 'data-track-artist');\r\n  const trackTitle  = utils.stripAttribute(element, 'data-track-title');\r\n\r\n  const modalId = shareModal.show({\r\n    bodyText:       `${trackArtist} - ${trackTitle}`,\r\n    filterBodyText: true,\r\n    bodyHtml:       getModalTrackHtml(element, trackArtist, trackTitle),\r\n    url:            utils.stripAttribute(element, 'data-track-url'),\r\n    sourceUid:      utils.stripAttribute(element, 'data-track-source-uid'),\r\n  });\r\n\r\n  trackThumbnailClick(modalId, `${trackArtist} - ${trackTitle}`);\r\n}\r\n\r\nfunction detailsClick(element)\r\n{\r\n  const trackArtist   = utils.stripAttribute(element, 'data-track-artist');\r\n  const trackTitle    = utils.stripAttribute(element, 'data-track-title');\r\n  const trackDuration = parseInt(element.getAttribute('data-track-duration'));\r\n  const artists       = element.querySelector('.track-artists-links').querySelectorAll('a');\r\n  const channels      = element.querySelector('.track-channels-links').querySelectorAll('a');\r\n  const modalEntries  = [];\r\n\r\n  modalEntries.push({\r\n    class:   'track-details-entry',\r\n    content: getModalTrackHtml(element, trackArtist, trackTitle),\r\n  });\r\n  \r\n  modalEntries.push({ class: 'header-entry', content: 'Artists' });\r\n  \r\n  artists.forEach(item =>\r\n  {\r\n    modalEntries.push({\r\n      clickId: `entry-${modalEntries.length}`,\r\n      class:   `icon-text ${item.classList[0]}`,\r\n      title:   'Go to Artist',\r\n      content: item.innerText,\r\n      link:    item.href,\r\n      icon:    'link',\r\n    });\r\n  });\r\n  \r\n  modalEntries.push({ class: 'header-entry', content: 'Channels' });\r\n  \r\n  channels.forEach(item =>\r\n  {\r\n    modalEntries.push({\r\n      clickId: `entry-${modalEntries.length}`,\r\n      title:   'Go to Channel',\r\n      content: item.innerText,\r\n      link:    item.href,\r\n      icon:    'link'\r\n    });\r\n  });\r\n\r\n  const modalId = showModal(\r\n    `Track Details<span class=\"light-text lowercase-text\">${((trackDuration > 0) ? utils.getTimeString(trackDuration) : 'N / A')}</span>`,\r\n    modalEntries,\r\n    'track-details',\r\n    (clickedId) =>\r\n  {\r\n    utils.navToUrl(modalEntries.find(item => (item.clickId === clickedId)).link);\r\n  });\r\n\r\n  trackThumbnailClick(modalId, `${trackArtist} - ${trackTitle}`);\r\n}\r\n\r\nfunction trackThumbnailClick(modalId, artistTitle)\r\n{\r\n  document.getElementById(modalId).querySelector('.modal-track').title = 'Click thumbnail to Copy Artist & Title';\r\n  \r\n  document.getElementById(modalId)?.querySelector('img')?.addEventListener('click', () =>\r\n  {\r\n    copyTextToClipboard(artistTitle, 'Artist &amp Title copied to clipboard', 'Unable to copy Artist &amp Title to clipboard');\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme and layout settings helpers\r\n// ************************************************************************************************\r\n\r\nfunction getCurrentSetting(settingsObject, currentId, defaultSetting)\r\n{\r\n  const setting = Object.values(settingsObject).find(value => (value.id === currentId));\r\n  return ((setting !== undefined) ? setting : defaultSetting);\r\n}\r\n\r\nfunction getNextSetting(settingsObject, currentSetting)\r\n{\r\n  const index = Object.values(settingsObject).findIndex(value => (value.id === currentSetting.id));\r\n  const keys  = Object.keys(settingsObject);\r\n  \r\n  return (((index + 1) < keys.length)\r\n           ? settingsObject[keys[index + 1]]\r\n           : settingsObject[keys[0]]);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme handling\r\n// ************************************************************************************************\r\n\r\nclass SiteThemeToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.themes = {\r\n      light: { id: 'light', text: 'light', class: 'site-theme-light' },\r\n      dark:  { id: 'dark',  text: 'dark',  class: 'site-theme-dark'  },\r\n      auto:  { id: 'auto',  text: 'auto'                             }, // This has no CSS class since auto is always light or dark\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => this.matchMediaPrefColorScheme());\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentTheme = getCurrentSetting(this.themes, settings.site.theme, this.themes.auto);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaPrefColorScheme()\r\n  {\r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n      this.update();\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentTheme   = getNextSetting(this.themes, this.currentTheme);\r\n    settings.site.theme = this.currentTheme.id;\r\n  }\r\n\r\n  update()\r\n  {\r\n    let newTheme = this.currentTheme;\r\n  \r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n    {\r\n      newTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\r\n                   ? this.themes.dark\r\n                   : this.themes.light;\r\n    }\r\n  \r\n    setValue(KEY.UF_SITE_THEME, newTheme.id);\r\n  \r\n    // Only update DOM if something has actually changed...\r\n    if (htmlClassList.contains(newTheme.class) === false)\r\n    {\r\n      debug.log(`SiteThemeToggle.update() - newSiteTheme: ${newTheme.id}`);\r\n    \r\n      htmlClassList.remove(this.themes.light.class, this.themes.dark.class);\r\n      htmlClassList.add(newTheme.class);\r\n    }\r\n\r\n    // Always update this because AUTO is not a separate class (only DARK + LIGHT are classes)\r\n    this.value = this.currentTheme.text;\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Gallery layout handling\r\n// ************************************************************************************************\r\n\r\nclass GalleryLayoutToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.minWidth = `(max-width: ${utils.getCssPropString('--site-gallery-layout-min-width')})`;\r\n\r\n    this.layouts = {\r\n      oneColumn:   { id: '1-column', text: '1 column',     class: 'gallery-layout-1-column' },\r\n      twoColumn:   { id: '2-column', text: '2 column',     class: 'gallery-layout-2-column' },\r\n      threeColumn: { id: '3-column', text: '3 / 4 column', class: 'gallery-layout-3-column' },\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia(this.minWidth).addEventListener('change', (event) => this.matchMediaMinWidth(event));\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentLayout = getCurrentSetting(this.layouts, settings.gallery.layout, this.layouts.threeColumn);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaMinWidth(event)\r\n  {\r\n    if (htmlClassList.contains('user-layout'))\r\n    {\r\n      if (event.matches)\r\n        htmlClassList.remove(this.currentLayout.class);\r\n      else\r\n        htmlClassList.add(this.currentLayout.class);\r\n    }\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentLayout      = getNextSetting(this.layouts, this.currentLayout);\r\n    settings.gallery.layout = this.currentLayout.id;\r\n  }\r\n\r\n  update(event)\r\n  {\r\n    setValue(KEY.UF_GALLERY_LAYOUT, this.currentLayout.id);\r\n\r\n    // Only update DOM if needed and when something has actually changed\r\n    if ((htmlClassList.contains('user-layout')) && (htmlClassList.contains(this.currentLayout.class) === false))\r\n    {\r\n      debug.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`);\r\n\r\n      htmlClassList.remove(this.layouts.oneColumn.class, this.layouts.twoColumn.class, this.layouts.threeColumn.class);\r\n\r\n      if (window.matchMedia(this.minWidth).matches === false)\r\n        htmlClassList.add(this.currentLayout.class);\r\n    }\r\n\r\n    this.value = this.currentLayout.text;\r\n\r\n    if (event?.type === 'click')\r\n      this.element.scrollIntoView();\r\n  }\r\n}\r\n", "//\r\n// Termlist template functions\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport {\r\n  getPrefPlayerUrl,\r\n  getThumbnailData,\r\n} from \"../shared/utils.js\";\r\n\r\n\r\n// ************************************************************************************************\r\n// Render fetched track and meta-data as HTML\r\n// ************************************************************************************************\r\n\r\nexport function getTermlistHtml(header, termSlug, termData)\r\n{\r\n  let html = `<b>${header}</b>`;\r\n\r\n  termData.forEach((track, index) =>\r\n  {\r\n    const thumbnailData = getThumbnailData(track.meta);\r\n\r\n    html += /*html*/ `\r\n    <div class=\"track\">\r\n      <div class=\"thumbnail ${thumbnailData.class}\"\r\n        data-term-url=\"${track.link}\"\r\n        data-term-slug=\"${termSlug}\"\r\n        data-track-num=\"${index + 1}\"\r\n        data-track-type=\"${track.meta.track_source_type}\"\r\n        data-track-id=\"track-${track.id}\"\r\n        data-track-source-uid=\"${thumbnailData.uid}\" title=\"Play Track\"\r\n        >\r\n        <img src=\"${thumbnailData.src}\">\r\n      </div>\r\n      <div class=\"artist-title text-nowrap-ellipsis\">\r\n        <a href=\"${track.link}\" title=\"Go to track\"><span><b>${track.meta.track_artist}</b></span><br><span>${track.meta.track_title}</span></a>\r\n      </div>\r\n    </div>`;\r\n  });\r\n  \r\n  return html;\r\n}\r\n\r\nexport function getTermLinksHtml(header, termData)\r\n{\r\n  let html = `<b>${header}</b><br>`;\r\n\r\n  termData.forEach(item => (html += `<a href=\"${getPrefPlayerUrl(item.link)}\">${item.name}</a>, `));\r\n\r\n  return html.slice(0, (html.length - 2));\r\n}\r\n", "//\r\n// Termlist REST data fetch and caching\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger   from '../shared/debuglogger.js';\r\nimport { KEY }            from '../shared/storage.js';\r\nimport { showSnackbar }   from '../shared/snackbar.js';\r\nimport { stripAttribute } from '../shared/utils.js';\r\n\r\nimport {\r\n  getTermlistHtml,\r\n  getTermLinksHtml,\r\n} from './termlist-templates.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('termlist-rest');\r\nconst m     = { termCache: {} };\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch data via REST API and update DOM with results\r\n// ************************************************************************************************\r\n\r\nexport function loadTermlist(termlistContainer, termlistEntry, termlistBody)\r\n{\r\n  const termType      = stripAttribute(termlistContainer, 'data-term-type');\r\n  const termId        = parseInt(termlistEntry.getAttribute('data-term-id'));\r\n  const termSlug      = stripAttribute(termlistEntry, 'data-term-slug');\r\n  const isAllChannels = (termType === 'channels');\r\n\r\n  fetchTracks(termType, termId, (isAllChannels ? 10 : 50), (termData) => \r\n  {\r\n    let header  = isAllChannels ? 'Latest Tracks' : 'All Tracks';\r\n    let element = termlistBody.querySelector('.body-left');\r\n\r\n    if (termData !== null)\r\n    {\r\n      element.innerHTML = getTermlistHtml(header, termSlug, termData);\r\n      termlistEntry.classList.add('data-fetched');\r\n    }\r\n    else\r\n    {\r\n      showSnackbar('Unable to fetch track data, please try again...', 10);\r\n    }\r\n\r\n    if (!isAllChannels && (termData !== null))\r\n    {\r\n      fetchTermMeta(termData, termId, 50, (metaType, metadata) =>\r\n      {\r\n        header  = (metaType === 'artists') ? 'Related Artists' : 'In Channels';\r\n        element = (metaType === 'artists')\r\n                    ? termlistBody.querySelector('.artists')\r\n                    : termlistBody.querySelector('.channels');\r\n\r\n        if (metadata !== null)\r\n          element.innerHTML = getTermLinksHtml(header, metadata);\r\n        else\r\n          element.innerHTML = `<b>${header}</b><br>None found`;\r\n      });\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch tracks for a given termType with termId (taxonomy: channel or artist)\r\n// ************************************************************************************************\r\n\r\nfunction fetchTracks(termType, termId, maxItems, callback)\r\n{ \r\n  if (termId in m.termCache)\r\n  {\r\n    callback(m.termCache[termId].tracks);\r\n  }\r\n  else\r\n  {\r\n    debug.log(`fetchTracks() - termType: ${termType} - termId: ${termId} - maxItems: ${maxItems}`);\r\n\r\n    fetch(`/wp-json/wp/v2/tracks?${termType}=${termId}&per_page=${maxItems}&_fields=id,link,artists,channels,meta`)\r\n    .then(response => \r\n    {\r\n      if (!response.ok)\r\n      {\r\n        debug.error(response);\r\n        return null;\r\n      }\r\n      \r\n      return response.json();\r\n    })\r\n    .then(data =>\r\n    {\r\n      m.termCache[termId] = { tracks: data };\r\n      callback(data);\r\n    })\r\n    .catch(reason =>\r\n    {\r\n      debug.warn(reason);\r\n      callback(null);\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Merge then fetch metadata for a given termType with termIds (taxonomy: category or tag)\r\n// ************************************************************************************************\r\n\r\nfunction fetchTermMeta(termData, termId, maxItems, callback)\r\n{\r\n  if (('channels' in m.termCache[termId]) && ('artists' in m.termCache[termId]))\r\n  {\r\n    callback('channels', m.termCache[termId].channels);\r\n    callback('artists',  m.termCache[termId].artists);\r\n  }\r\n  else\r\n  {\r\n    const channels = [];\r\n    let   artists  = [];\r\n  \r\n    termData.forEach(item =>\r\n    {\r\n      channels.push.apply(channels, item.channels);\r\n      artists.push.apply(artists, item.artists);\r\n    });\r\n  \r\n    artists = artists.filter(item => (item !== termId));\r\n  \r\n    fetchMeta('channels', termId, [...new Set(channels)], maxItems, callback);\r\n    fetchMeta('artists',  termId, [...new Set(artists)],  maxItems, callback);\r\n  }\r\n}\r\n\r\nfunction fetchMeta(\r\n  termType,\r\n  termId,\r\n  termIds,\r\n  maxItems,\r\n  callback\r\n)\r\n{\r\n  /*\r\n  if ((termId in termCache) === false)\r\n    termCache[termId] = {};\r\n  */\r\n\r\n  if (termIds.length > 0)\r\n  {\r\n    debug.log(`fetchMeta() - termType: ${termType} - termIds: ${(termIds.length > 0) ? termIds : 'Empty'} - maxItems: ${maxItems}`);\r\n\r\n    fetch(`/wp-json/wp/v2/${termType}?include=${termIds}&per_page=${maxItems}&_fields=link,name`)\r\n    .then(response => \r\n    {\r\n      if (!response.ok)\r\n      {\r\n        debug.error(response);\r\n        return null;\r\n      }\r\n      \r\n      return response.json();\r\n    })\r\n    .then(data =>\r\n    {\r\n      m.termCache[termId][termType] = data;\r\n      callback(termType, data);\r\n    })\r\n    .catch(reason =>\r\n    {\r\n      debug.warn(reason);\r\n      callback(null);\r\n    });\r\n  }\r\n  else\r\n  {\r\n    m.termCache[termId][termType] = null;\r\n    callback(termType, null);\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Term cache functions\r\n// ************************************************************************************************\r\n\r\nexport function readCache()\r\n{\r\n  m.termCache = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_CACHE));\r\n  \r\n  if (m.termCache === null)\r\n    m.termCache = {};\r\n}\r\n\r\nexport function writeCache()\r\n{\r\n  sessionStorage.setItem(KEY.UF_TERMLIST_CACHE, JSON.stringify(m.termCache));\r\n}\r\n\r\nexport function deleteCache()\r\n{\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_CACHE);\r\n}\r\n\r\nexport function hasCache()\r\n{\r\n  return (Object.keys(m.termCache).length > 0);\r\n}\r\n", "//\r\n// Termlist UI module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger       from '../shared/debuglogger.js';\r\nimport * as termlistRest      from './termlist-rest.js';\r\nimport * as utils             from '../shared/utils.js';\r\nimport ElementClick           from '../shared/element-click.js';\r\nimport { shareModal }         from './share-modal.js';\r\nimport { TRACK_TYPE }         from '../playback/mediaplayers.js';\r\nimport { KEY, setCookie }     from '../shared/storage.js';\r\nimport { PREF_PLAYER }        from '../shared/settings/settings.js';\r\nimport { response, settings } from '../shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('termlist-controls');\r\n\r\nconst m = {\r\n  listContainer: null,\r\n  uiElements:    null,\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Setup module\r\n// ************************************************************************************************\r\n\r\nexport function init()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.listContainer = document.getElementById('termlist-container');\r\n  m.uiElements    = new UiElements();\r\n\r\n  m.listContainer.addEventListener('click', (event) => m.uiElements.clickHandler(event));\r\n\r\n  restoreState();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Save and restore Termlist state\r\n// ************************************************************************************************\r\n\r\nfunction saveState()\r\n{\r\n  if (termlistRest.hasCache())\r\n  {\r\n    const termlistState = {\r\n      pageUrl:     window.location.href,\r\n      scrollPos:   Math.round(window.pageYOffset),\r\n      openTermIds: [],\r\n    };\r\n\r\n    document.querySelectorAll('.termlist-entry').forEach(element =>\r\n    {\r\n      if (element.classList.contains('open'))\r\n        termlistState.openTermIds.push(element.id);\r\n    });\r\n    \r\n    sessionStorage.setItem(KEY.UF_TERMLIST_STATE, JSON.stringify(termlistState));\r\n    termlistRest.writeCache();\r\n  }\r\n}\r\n\r\nfunction restoreState()\r\n{\r\n  termlistRest.readCache();\r\n\r\n  if (performance.getEntriesByType('navigation')[0].type !== 'reload')\r\n  {\r\n    const termlistState = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_STATE));\r\n \r\n    if ((termlistState !== null) && (termlistState.pageUrl === window.location.href))\r\n    {\r\n      history.scrollRestoration = 'manual';\r\n      \r\n      termlistState.openTermIds.forEach(item =>\r\n      {\r\n        document.getElementById(item).querySelector('div.termlist-header').click();\r\n      });\r\n      \r\n      window.scroll({ top: termlistState.scrollPos, left: 0, behavior: 'auto' });\r\n    }\r\n    else\r\n    {\r\n      history.scrollRestoration = 'auto';\r\n    }\r\n  }\r\n\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_STATE);\r\n  termlistRest.deleteCache();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Click event functions\r\n// ************************************************************************************************\r\n\r\nclass UiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.play-button'))\r\n      return playClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n  \r\n    if (this.clicked('div.shuffle-button'))\r\n      return shuffleClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n  \r\n    if (this.clicked('div.share-find-button'))\r\n      return shareFindClick(this.element);\r\n  \r\n    if (this.clicked('div.termlist-header'))\r\n      return termlistHeaderClick(this.event);\r\n  \r\n    if (this.clicked('div.thumbnail'))\r\n      return playTrackClick(this.event, this.element);\r\n  \r\n    if (this.clicked('a'))\r\n      return linkClicked(this.event, this.element);\r\n  }\r\n}\r\n\r\nfunction playClick(event, destUrl, trackId = null)\r\n{\r\n  event?.preventDefault();\r\n  saveState();\r\n\r\n  // ToDo: Create a playbackSetting for this? Or use SHIFT + click to skip autoplay\r\n  sessionStorage.setItem(KEY.UF_AUTOPLAY, JSON.stringify({ autoplay: (event.shiftKey === false), trackId: trackId, position: 0 }));\r\n\r\n  utils.navToUrl(destUrl);\r\n}\r\n\r\nfunction shuffleClick(event, destUrl)\r\n{\r\n  setCookie(KEY.UF_RESHUFFLE, 'true');\r\n  playClick(event, destUrl);\r\n}\r\n\r\nfunction shareFindClick(element)\r\n{\r\n  const termName = utils.stripAttribute(element, 'data-term-name');\r\n\r\n  shareModal.show({\r\n    title:    `Share / Find ${utils.stripAttribute(element, 'data-term-path')}`,\r\n    bodyText: termName,\r\n    bodyHtml: `<b>${termName}</b>`,\r\n    url:      utils.getPrefPlayerUrl(element.getAttribute('data-term-url')),\r\n    verb:     'Find',\r\n  });\r\n}\r\n\r\nfunction playTrackClick(event, element)\r\n{\r\n  const termType       = (m.listContainer.getAttribute('data-term-type') === 'channels') ? 'channel' : 'artist';\r\n  const termSlug       = utils.stripAttribute(element, 'data-term-slug');\r\n  const trackType      = parseInt(element.getAttribute('data-track-type'));\r\n  const trackSourceUid = element.getAttribute('data-track-source-uid');\r\n\r\n  if ((settings.playback.preferredPlayer === PREF_PLAYER.GALLERY) || (trackType === TRACK_TYPE.SOUNDCLOUD))\r\n  {\r\n    playClick(event, element.getAttribute('data-term-url'), null);\r\n  }\r\n  else\r\n  {\r\n    const trackNum = parseInt(element.getAttribute('data-track-num'));\r\n    let pagination = '';\r\n\r\n    if (trackNum > response.listPerPage)\r\n      pagination = `page/${Math.ceil(trackNum / response.listPerPage)}/`;\r\n\r\n    playClick(event, `${utils.SITE_URL}/list/${termType}/${termSlug}/${pagination}`, trackSourceUid);\r\n  }\r\n}\r\n\r\nfunction linkClicked(event, element)\r\n{\r\n  saveState();\r\n\r\n  if (element.closest('div.permalink') !== null)\r\n  {\r\n    event?.preventDefault();\r\n    utils.navToUrl(utils.getPrefPlayerUrl(element.href));\r\n  }\r\n}\r\n\r\nfunction termlistHeaderClick(event)\r\n{\r\n  const termlistEntry = event.target.closest('div.termlist-entry');\r\n  const expandToggle  = termlistEntry.querySelector('div.expand-toggle span');\r\n  const termlistBody  = termlistEntry.querySelector('div.termlist-body');\r\n  const isExpanded    = (termlistBody.style.display.length !== 0);\r\n  const isDataFetched = termlistEntry.classList.contains('data-fetched');\r\n\r\n  utils.replaceClass(termlistEntry, (isExpanded ? 'open' : 'closed'), (isExpanded ? 'closed' : 'open'));\r\n\r\n  expandToggle.textContent   = isExpanded ? 'expand_more' : 'expand_less';\r\n  termlistBody.style.display = isExpanded ? ''            : 'flex';\r\n\r\n  if (!isExpanded && !isDataFetched)\r\n    termlistRest.loadTermlist(m.listContainer, termlistEntry, termlistBody);\r\n}\r\n", "//\r\n// Ultrafunk site nav-menu\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils   from '../shared/utils.js';\r\nimport { settings } from '../shared/session-data.js';\r\nimport { isSingleTrackNext } from '../playback/gallery/single-track-next.js';\r\n\r\nimport {\r\n  noPlayback,\r\n  shuffleClickNavTo,\r\n} from '../playback/shared-gallery-list.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Main navigation menu handling closure\r\n// ************************************************************************************************\r\n\r\nconst navMenuClosure = (() =>\r\n{\r\n  const observer = new ResizeObserver(observerCallback);\r\n  let siteHeader = null, navMenuOuter = null, modalOverlay = null;\r\n  let isVisible = false;\r\n\r\n  window.addEventListener('load', () =>\r\n  {\r\n    utils.addListener('#menu-primary-menu .menu-item-reshuffle a', 'click', shuffleClickNavTo);\r\n    document.getElementById('menu-primary-menu')?.addEventListener('click', menuClickUsePrefPlayer);\r\n  });\r\n\r\n  return {\r\n    isVisible()   { return isVisible;                },\r\n    scrolledTop() { navMenuOuter.style.display = ''; },\r\n    init,\r\n    toggle,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    siteHeader   = document.getElementById('site-header');\r\n    navMenuOuter = document.querySelector('#site-navigation .nav-menu-outer');\r\n    modalOverlay = document.getElementById('nav-menu-modal-overlay');\r\n\r\n    utils.addListenerAll('.nav-menu-toggle', 'click', toggle);\r\n    modalOverlay.addEventListener('click', toggle);\r\n    modalOverlay.addEventListener('transitionend', transitionEnd);\r\n    observer.observe(navMenuOuter.querySelector('.menu-primary-menu-container'));\r\n  }\r\n\r\n  function menuClickUsePrefPlayer(event)\r\n  {\r\n    const menuElement = event.target.closest('li.menu-item.menu-item-object-uf_channel');\r\n\r\n    if (menuElement !== null)\r\n    {\r\n      if (isSingleTrackNext() || noPlayback())\r\n      {\r\n        event?.preventDefault();\r\n        utils.navToUrl(utils.getPrefPlayerUrl(menuElement.querySelector('a').href));\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggle()\r\n  {\r\n    if (siteHeader.classList.contains('sticky-nav-up'))\r\n    {\r\n      if (isVisible)\r\n        navMenuOuter.style.display = 'none';\r\n      else\r\n        navMenuOuter.style.display = 'flex';\r\n    }\r\n    else\r\n    {\r\n      if (siteHeader.classList.contains('sticky-nav-down') === false)\r\n        siteHeader.classList.toggle('hide-nav-menu');\r\n    }\r\n  }\r\n\r\n  function observerCallback(entries)\r\n  {\r\n    isVisible = (entries[0].contentRect.height !== 0) ? true : false;\r\n\r\n    if (isVisible)\r\n    {\r\n      modalOverlay.className = '';\r\n      modalOverlay.style.backgroundColor = `rgba(0, 0, 0, ${Math.round(10 * (settings.site.modalOverlayOpacity / 100)) / 10})`;\r\n      modalOverlay.classList.add('show');\r\n      setTimeout(() => modalOverlay.classList.add('fadein'), 50);\r\n    }\r\n    else\r\n    {\r\n      modalOverlay.classList.add('fadeout');\r\n    }\r\n  }\r\n\r\n  function transitionEnd()\r\n  {\r\n    if (isVisible === false)\r\n    {\r\n      modalOverlay.className     = '';\r\n      navMenuOuter.style.display = '';\r\n    }\r\n  }\r\n});\r\n\r\nexport const navMenu = navMenuClosure();\r\n", "//\r\n// Ultrafunk site nav-search\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils from '../shared/utils.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Main navigation search handling closure\r\n// ************************************************************************************************\r\n\r\nconst navSearchClosure = (() =>\r\n{\r\n  const allowKeyboardShortcutsEvent = new Event('allowKeyboardShortcuts');\r\n  const denyKeyboardShortcutsEvent  = new Event('denyKeyboardShortcuts');\r\n  let siteHeader = null, searchContainer = null, searchField = null, brandingContainer = null;\r\n  let isVisible = false;\r\n\r\n  return {\r\n    isVisible() { return isVisible; },\r\n    init,\r\n    toggle,\r\n    hide,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    siteHeader        = document.getElementById('site-header');\r\n    searchContainer   = document.getElementById('search-container');\r\n    searchField       = searchContainer.querySelector('.search-field');\r\n    brandingContainer = siteHeader.querySelector('div.site-branding-container');\r\n\r\n    utils.addListenerAll('.nav-search-toggle', 'click', toggle);\r\n    // To prevent extra 'blur' event before 'click' event\r\n    utils.addListenerAll('.nav-search-toggle', 'mousedown', (event) => event.preventDefault());\r\n    // Hide nav search bar on focus loss\r\n    searchField.addEventListener('blur', hide);\r\n    \r\n    // Hide nav search bar on ESC\r\n    searchField.addEventListener('keydown', (event) =>\r\n    {\r\n      if (event.key === 'Escape')\r\n      {\r\n        event.stopPropagation();\r\n        hide();\r\n      }\r\n    });\r\n  }\r\n\r\n  function toggle()\r\n  {\r\n    hasVisibleSearchContainer() ? show() : hide();\r\n  }\r\n  \r\n  function hide()\r\n  {\r\n    if (isVisible)\r\n      setProps(false, allowKeyboardShortcutsEvent, '', 'search');\r\n  }\r\n  \r\n  function hasVisibleSearchContainer()\r\n  {\r\n    if (searchContainer.style.display.length === 0)\r\n    {\r\n      // Has no visible site header at all, bail out...\r\n      if (siteHeader.offsetHeight === 0)\r\n        return false;\r\n\r\n      // Is mobile with no visible navbar, bail out...\r\n      if (utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n      {\r\n        if ((siteHeader.querySelector('.navbar-container-mobile-top').offsetHeight === 0) &&\r\n            (siteHeader.querySelector('.navbar-container-mobile-up').offsetHeight  === 0))\r\n        {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function show()\r\n  {\r\n    setPosSize();\r\n    setProps(true, denyKeyboardShortcutsEvent, 'flex', 'clear');\r\n    searchField.focus();\r\n    searchField.setSelectionRange(9999, 9999);    \r\n  }\r\n  \r\n  function setProps(visible, keyboardShortcutsEvent, display, icon)\r\n  {\r\n    isVisible = visible;\r\n    document.dispatchEvent(keyboardShortcutsEvent);\r\n    searchContainer.style.display = display;\r\n    document.querySelectorAll('div.nav-search-toggle span').forEach(element => (element.textContent = icon));\r\n    \r\n    if (isVisible)\r\n      document.getElementById('playback-controls').classList.add('hide');\r\n    else\r\n      document.getElementById('playback-controls').classList.remove('hide');\r\n  }\r\n\r\n  function setPosSize()\r\n  {\r\n    let position = {};\r\n\r\n    if (utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n    {\r\n      if (brandingContainer.offsetHeight !== 0)\r\n        position.top = brandingContainer.offsetTop;\r\n      else\r\n        position.top = siteHeader.querySelector('.navbar-container-mobile-up').offsetTop;\r\n\r\n      position = new DOMRect(63, (position.top + 3), (document.body.clientWidth - 60), 30);\r\n    }\r\n    else\r\n    {\r\n      if (brandingContainer.offsetHeight !== 0)\r\n      {\r\n        const rect = brandingContainer.getBoundingClientRect();\r\n        position   = new DOMRect(rect.left, (rect.top + 7), rect.right, (rect.height - 15));\r\n      }\r\n      else\r\n      {\r\n        const rect = siteHeader.querySelector('.navbar-container').getBoundingClientRect();\r\n        position   = new DOMRect((rect.left + 88), rect.top, (rect.right - 90), (rect.height - 1));\r\n      }\r\n    }\r\n  \r\n    searchContainer.style.left   = `${position.left}px`;\r\n    searchContainer.style.top    = `${position.top}px`;\r\n    searchContainer.style.width  = `${position.width - position.left}px`;\r\n    searchContainer.style.height = `${position.height}px`;\r\n  }\r\n});\r\n\r\nexport const navSearch = navSearchClosure();\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './shared/debuglogger.js';\r\nimport * as storage     from './shared/storage.js';\r\nimport * as utils       from './shared/utils.js';\r\nimport * as interaction from './site/interaction.js';\r\nimport * as termlist    from './site/termlist.js';\r\nimport { navMenu }      from './site/nav-menu.js';\r\nimport { navSearch }    from './site/nav-search.js';\r\nimport { noPlayback }   from './playback/shared-gallery-list.js';\r\n\r\nimport {\r\n  response,\r\n  settings,\r\n  readSettings,\r\n} from './shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('index');\r\n\r\nconst elements = {\r\n  siteHeader:        null,\r\n  introBanner:       null,\r\n  siteContent:       null,\r\n  siteContentSearch: null,\r\n  fullscreenTarget:  null,  \r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Document ready and document / window event listeners\r\n// ************************************************************************************************\r\n\r\ndocument.addEventListener('DOMContentLoaded', () =>\r\n{ \r\n  debug.log('DOMContentLoaded');\r\n\r\n  initIndex();\r\n  \r\n  if (elements.introBanner !== null)\r\n    showIntroBanner();\r\n  \r\n  if (document.getElementById('termlist-container') !== null)\r\n    termlist.init();\r\n\r\n  if (elements.siteContentSearch !== null)\r\n  {\r\n    elements.siteContentSearch.focus();\r\n    elements.siteContentSearch.setSelectionRange(9999, 9999);\r\n  }\r\n\r\n  setPreviousPageTitle();\r\n});\r\n\r\nfunction initIndex()\r\n{\r\n  debug.log('initIndex()');\r\n\r\n  elements.siteHeader        = document.getElementById('site-header');\r\n  elements.introBanner       = document.getElementById('intro-banner');\r\n  elements.siteContent       = document.getElementById('site-content');\r\n  elements.siteContentSearch = document.querySelector('#site-content form input.search-field');\r\n\r\n  interaction.init();\r\n  navSearch.init();\r\n  navMenu.init();\r\n  \r\n  resize.addEventListener();\r\n  scroll.addEventListener();\r\n\r\n  document.addEventListener('fullscreenElement', (event) => (elements.fullscreenTarget = event.fullscreenTarget));\r\n  document.addEventListener('keydown', documentEventKeyDown);\r\n}\r\n\r\ndocument.addEventListener('settingsUpdated', () =>\r\n{\r\n  readSettings();\r\n  interaction.settingsUpdated();\r\n  storage.setCookie(storage.KEY.UF_GALLERY_PER_PAGE, settings.gallery.tracksPerPage,    (storage.YEAR_IN_SECONDS * 5));\r\n  storage.setCookie(storage.KEY.UF_PREFERRED_PLAYER, settings.playback.preferredPlayer, (storage.YEAR_IN_SECONDS * 5));\r\n});\r\n\r\n\r\n// ************************************************************************************************\r\n// Keyboard events handling\r\n// ************************************************************************************************\r\n\r\nfunction documentEventKeyDown(event)\r\n{\r\n  // UI keyboard events (cannot be disable by the user)\r\n  if ((event.repeat  === false) &&\r\n      (event.ctrlKey === false) &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'Escape':\r\n        if (navMenu.isVisible())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.toggle();\r\n        }\r\n        return;\r\n    }\r\n  }\r\n\r\n  // User enabled keyboard shortcuts (on by default)\r\n  if (settings.site.keyboardShortcuts &&\r\n      (event.repeat  === false)       &&\r\n      (event.ctrlKey === false)       &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'c':\r\n      case 'C':\r\n        if (searchNotFocused())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.toggle();\r\n        }\r\n        break;\r\n\r\n      case 'L':\r\n        if (searchNotFocused() && notSettingsPage())\r\n        {\r\n          interaction.galleryLayout.toggle(event);\r\n          resize.trigger();\r\n        }\r\n        break;\r\n\r\n      case 's':\r\n      case 'S':\r\n        if (searchNotFocused() && notFullscreenElement())\r\n        {\r\n          event.preventDefault();\r\n          navSearch.toggle();\r\n        }\r\n        break;\r\n\r\n      case 'T':\r\n        if (searchNotFocused() && notSettingsPage())\r\n        {\r\n          interaction.siteTheme.toggle(event);\r\n        }\r\n        break;\r\n\r\n      case 'ArrowLeft':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.prevPage);\r\n        }\r\n        break;\r\n\r\n      case 'ArrowRight':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.nextPage);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction searchNotFocused()\r\n{\r\n  return ((navSearch.isVisible() === false) && (elements.siteContentSearch !== document.activeElement));\r\n}\r\n\r\nfunction notSettingsPage()\r\n{\r\n  return (document.body.classList.contains('page-settings') === false);\r\n}\r\n\r\nfunction notFullscreenElement()\r\n{\r\n  return ((elements.fullscreenTarget === null) ? true : false);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Misc. support functions\r\n// ************************************************************************************************\r\n\r\nfunction showIntroBanner()\r\n{\r\n  // Only show intro banners if they can be permanently dismissed\r\n  if (storage.isAvailable('localStorage') && bannerProperty) // eslint-disable-line no-undef\r\n  {\r\n    if (settings.banners[bannerProperty]) // eslint-disable-line no-undef\r\n    {\r\n      elements.introBanner.style.display = 'block';\r\n      resize.trigger();\r\n\r\n      utils.addListener('#intro-banner .intro-banner-close-button', 'click', () =>\r\n      {\r\n        elements.introBanner.style.display   = '';\r\n        elements.siteContent.style.marginTop = '';\r\n        settings.banners[bannerProperty]     = false; // eslint-disable-line no-undef\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction setPreviousPageTitle()\r\n{\r\n  if (document.querySelector('.navbar-title .go-back-to') !== null)\r\n  {\r\n    let pathString = '';\r\n\r\n    if (document.referrer.length === 0)\r\n    {\r\n      pathString = 'Previous Page';\r\n    }\r\n    else\r\n    {\r\n      const referrerUrlParts = new URL(decodeURIComponent(document.referrer));\r\n\r\n      if (referrerUrlParts.search.length !== 0)\r\n      {\r\n        pathString = 'Search Results';\r\n      }\r\n      else if (referrerUrlParts.pathname.length > 1)\r\n      {\r\n        const endSlash  = (referrerUrlParts.pathname.slice(-1) === '/') ? 1 : 0;\r\n        const pathParts = referrerUrlParts.pathname.slice(1, referrerUrlParts.pathname.length - endSlash).replace(/-/gi, ' ').split('/');\r\n\r\n        pathParts.forEach((part, index) =>\r\n        {\r\n          pathString += ((index + 1) < pathParts.length)\r\n                          ? part + ' / '\r\n                          : part;\r\n        });\r\n      }\r\n    }\r\n\r\n    document.querySelectorAll('#site-navigation .navbar-title').forEach(element =>\r\n    {\r\n      element.querySelector('.go-back-title').textContent = (pathString.length > 0) ? pathString : 'Ultrafunk (home)';\r\n      element.querySelector('.go-back-to').style.opacity  = 1;\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// window.addEventListener('resize') handling\r\n// ************************************************************************************************\r\n\r\nconst resize = (() =>\r\n{\r\n  let headerHeight = 0;\r\n\r\n  return {\r\n    getHeaderHeight() { return headerHeight; },\r\n    addEventListener,\r\n    trigger: resizeEvent,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    resizeEvent();\r\n    window.addEventListener('resize', resizeEvent);\r\n  }\r\n  \r\n  function resizeEvent()\r\n  {\r\n    if (noPlayback())\r\n      headerHeight = utils.getCssPropValue('--site-header-height-no-playback');\r\n    else\r\n      headerHeight = utils.getCssPropValue('--site-header-height');\r\n\r\n    if ((elements.introBanner !== null) && (elements.introBanner.style.display.length !== 0))\r\n    {\r\n      elements.introBanner.style.marginTop = `${headerHeight}px`;\r\n      elements.siteContent.style.marginTop = `${utils.getCssPropValue('--site-content-margin-top', document.body)}px`;\r\n    }\r\n  }\r\n})();\r\n\r\n  \r\n// ************************************************************************************************\r\n// window.addEventListener('scroll') handling\r\n// ************************************************************************************************\r\n\r\nconst scroll = (() =>\r\n{\r\n  let lastScrollPos  = 0;\r\n  let isScrolledDown = false;\r\n\r\n  return {\r\n    addEventListener,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    scrollEvent();\r\n    window.addEventListener('scroll', scrollEvent);\r\n  }\r\n\r\n  function scrollEvent()\r\n  {\r\n    const currentScrollPos   = window.pageYOffset;\r\n    const scrollDownMenuHide = Math.round((resize.getHeaderHeight() > 150)\r\n                                 ? (resize.getHeaderHeight() / 2)\r\n                                 : (resize.getHeaderHeight() / 3));\r\n\r\n    // Extra check with Math.round() for non 0 and fractional pixel values when scrolled to top\r\n    if ((currentScrollPos === 0) || (Math.round(currentScrollPos) <= 1))\r\n    {\r\n      scrolledTop();\r\n    }\r\n    else if ((currentScrollPos > scrollDownMenuHide) && (currentScrollPos > lastScrollPos))\r\n    {\r\n      scrolledDown();\r\n    }\r\n    else\r\n    {\r\n      scrolledUp();\r\n    }\r\n\r\n    // Hide navigation search form on any scroll event\r\n    navSearch.hide();\r\n\r\n    lastScrollPos = currentScrollPos;\r\n  }\r\n\r\n  function scrolledTop()\r\n  {\r\n    elements.siteHeader.classList.remove('sticky-nav-down', 'sticky-nav-up');\r\n    elements.siteHeader.classList.add('hide-nav-menu');\r\n    navMenu.scrolledTop();\r\n  }\r\n\r\n  function scrolledDown()\r\n  {\r\n    if (isScrolledDown === false)\r\n    {\r\n      isScrolledDown = true;\r\n      utils.replaceClass(elements.siteHeader, 'sticky-nav-up', 'sticky-nav-down');\r\n    }\r\n  }\r\n\r\n  function scrolledUp()\r\n  {\r\n    if (isScrolledDown === true)\r\n    {\r\n      isScrolledDown = false;\r\n      utils.replaceClass(elements.siteHeader, 'sticky-nav-down', 'sticky-nav-up');\r\n    }\r\n\r\n    if (navMenu.isVisible())\r\n      navMenu.toggle();\r\n  }\r\n})();\r\n"],
  "mappings": "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",
  "names": []
}
