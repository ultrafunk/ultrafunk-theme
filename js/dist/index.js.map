{
  "version": 3,
  "sources": ["../src/site/share-modal.js", "../src/site/interaction.js", "../src/site/termlist-templates.js", "../src/site/termlist-rest.js", "../src/site/termlist.js", "../src/site/nav-menu.js", "../src/site/nav-search.js", "../src/index.js"],
  "sourcesContent": ["//\r\n// Share modal\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from '../shared/debuglogger.js';\r\nimport { showModal }    from '../shared/modal.js';\r\nimport { showSnackbar } from '../shared/snackbar.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('share-modal');\r\n\r\n\r\n// ************************************************************************************************\r\n// Share Modal Dialog closure\r\n// ************************************************************************************************\r\n\r\nconst shareModalClosure = (() =>\r\n{\r\n  const filterBodyTextRegEx = /\\s{1,}[\\u002D\\u00B7\\u2013]\\s{1,}/i;\r\n  let title, bodyText, filterBodyText, bodyHtml, url, sourceUid, verb;\r\n\r\n  return {\r\n    show,\r\n  };\r\n\r\n  function show(args)\r\n  {\r\n    ({\r\n      title          = 'Share / Play Track',\r\n      bodyText       = null,\r\n      filterBodyText = false,\r\n      bodyHtml       = null,\r\n      url            = null,\r\n      sourceUid      = null,\r\n      verb           = 'Play'\r\n    } = args);\r\n\r\n    return showModal(title, getSingleChoiceList(), 'share', singleChoiceListClick);\r\n  }\r\n\r\n  function getSingleChoiceList()\r\n  {\r\n    const singleChoiceList = [\r\n      { clickId: 'copyToClipboardId', icon: 'content_copy', content: '<b>Copy Link</b> to Clipboard'   },\r\n      { clickId: 'shareOnEmailId',    icon: 'share',        content: '<b>Share</b> on Email'           },\r\n      { clickId: 'amazonMusicId',     icon: 'link',         content: `<b>${verb}</b> on Amazon Music`  },\r\n      { clickId: 'appleMusicId',      icon: 'link',         content: `<b>${verb}</b> on Apple Music`   },\r\n      { clickId: 'spotifyId',         icon: 'link',         content: `<b>${verb}</b> on Spotify`       },\r\n      { clickId: 'tidalId',           icon: 'link',         content: `<b>${verb}</b> on Tidal`         },\r\n      { clickId: 'youTubeMusicId',    icon: 'link',         content: `<b>${verb}</b> on YouTube Music` },\r\n    ];\r\n\r\n    if (bodyHtml !== null)\r\n      singleChoiceList.unshift({ class: 'track-share-entry', content: bodyHtml });\r\n\r\n    return singleChoiceList;\r\n  }\r\n\r\n  function singleChoiceListClick(clickedId)\r\n  {\r\n    debug.log(`singleChoiceListClick(): ${clickedId} - title: \"${title}\" - bodyText: \"${bodyText}\" - filterBodyText: ${filterBodyText} - url: ${url} - sourceUid: ${sourceUid} - verb: ${verb}`);\r\n\r\n    const searchString = filterBodyText\r\n                           ? encodeURIComponent(bodyText.replace(filterBodyTextRegEx, ' '))\r\n                           : encodeURIComponent(bodyText);\r\n\r\n    switch (clickedId)\r\n    {\r\n      case 'copyToClipboardId':\r\n        copyTextToClipboard(url, 'Track link copied to clipboard', 'Unable to copy Track link to clipboard');\r\n        break;\r\n\r\n      case 'shareOnEmailId':\r\n        window.location.href = `mailto:?subject=${encodeURIComponent(bodyText)}&body=${encodeURI(url)}%0d%0a`;\r\n        break;\r\n\r\n      case 'amazonMusicId':\r\n        window.open(`https://music.amazon.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'appleMusicId':\r\n        window.open(`https://music.apple.com/ca/search?term=${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'spotifyId':\r\n        window.open(`https://open.spotify.com/search/${searchString}`, \"_blank\");\r\n        break;\r\n\r\n      case 'tidalId':\r\n        window.open(`https://google.com/search?q=${searchString}%20site:tidal.com`, \"_blank\");\r\n        break;\r\n\r\n      case 'youTubeMusicId':\r\n        {\r\n          if (sourceUid !== null)\r\n            window.open(`https://music.youtube.com/watch?v=${sourceUid}`, \"_blank\");\r\n          else\r\n            window.open(`https://music.youtube.com/search?q=${searchString}`, \"_blank\");\r\n        }\r\n        break;\r\n    }\r\n  }\r\n});\r\n\r\nexport const shareModal = shareModalClosure();\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nexport function copyTextToClipboard(clipboardText, successMessage = 'Text copied to clipboard', errorMessage = 'Unable to copy text to clipboard')\r\n{\r\n  navigator.clipboard.writeText(clipboardText).then(() =>\r\n  {\r\n    showSnackbar(successMessage, 3);\r\n  },\r\n  (reason) =>\r\n  {\r\n    debug.error(`copyTextToClipboard() failed because ${reason}`);\r\n    showSnackbar(errorMessage, 5);\r\n  });\r\n}\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger      from '../shared/debuglogger.js';\r\nimport * as utils            from '../shared/utils.js';\r\nimport ElementToggle         from '../shared/element-toggle.js';\r\nimport ElementClick          from '../shared/element-click.js';\r\nimport { settings }          from '../shared/session-data.js';\r\nimport { showModal }         from '../shared/modal.js';\r\nimport { KEY, setValue }     from '../shared/storage.js';\r\nimport { getModalTrackHtml } from '../shared/modal-templates.js';\r\n\r\nimport {\r\n  shareModal,\r\n  copyTextToClipboard,\r\n} from './share-modal.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('site-interaction');\r\nconst htmlClassList = document.documentElement.classList;\r\n\r\nconst m = {\r\n  metaUiElements: null,\r\n  listUiElements: null,\r\n};\r\n\r\nexport let siteTheme     = {};\r\nexport let galleryLayout = {};\r\n\r\n\r\n// ************************************************************************************************\r\n//\r\n// ************************************************************************************************\r\n\r\nexport function init()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.metaUiElements = new MetaUiElements('div.track-meta', true);\r\n  m.listUiElements = new ListUiElements('#tracklist');\r\n  siteTheme        = new SiteThemeToggle('footer-site-theme-toggle');\r\n  galleryLayout    = new GalleryLayoutToggle('footer-gallery-layout-toggle');\r\n\r\n  window.addEventListener('load', () =>\r\n  {\r\n    document.querySelector('.widget ul.uf_channel')?.addEventListener('click', linkClick);\r\n    document.querySelector('.widget ul.uf_artist')?.addEventListener('click', linkClick);\r\n    document.querySelector('.widget.widget_archive ul')?.addEventListener('click', linkClick);\r\n  });\r\n}\r\n\r\nexport function settingsUpdated()\r\n{\r\n  siteTheme.setCurrent();\r\n  galleryLayout.setCurrent();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// UI elements event handling\r\n// ************************************************************************************************\r\n\r\nclass MetaUiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.track-share-control'))\r\n      return sharePlayClick(this.closest('single-track, gallery-track'));\r\n\r\n    if (this.clicked('span.term-links'))\r\n      return linkClick(this.event);\r\n  }\r\n}\r\n\r\nclass ListUiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.share-play-button'))\r\n      return sharePlayClick(this.closest('div.track-entry'));\r\n\r\n    if (this.clicked('div.details-button'))\r\n      return detailsClick(this.closest('div.track-entry'));\r\n  }\r\n}\r\n\r\nfunction linkClick(event)\r\n{\r\n  if (event.target.matches('a'))\r\n  {\r\n    event?.preventDefault();\r\n    utils.navToUrl(utils.getPrefPlayerUrl(event.target.href));\r\n  }\r\n}\r\n\r\nfunction sharePlayClick(element)\r\n{\r\n  const trackArtist = utils.stripAttribute(element, 'data-track-artist');\r\n  const trackTitle  = utils.stripAttribute(element, 'data-track-title');\r\n\r\n  const modalId = shareModal.show({\r\n    bodyText:       `${trackArtist} - ${trackTitle}`,\r\n    filterBodyText: true,\r\n    bodyHtml:       getModalTrackHtml(element, trackArtist, trackTitle),\r\n    url:            utils.stripAttribute(element, 'data-track-url'),\r\n    sourceUid:      utils.stripAttribute(element, 'data-track-source-uid'),\r\n  });\r\n\r\n  trackThumbnailClick(modalId, `${trackArtist} - ${trackTitle}`);\r\n}\r\n\r\nfunction detailsClick(element)\r\n{\r\n  const trackArtist   = utils.stripAttribute(element, 'data-track-artist');\r\n  const trackTitle    = utils.stripAttribute(element, 'data-track-title');\r\n  const trackDuration = parseInt(element.getAttribute('data-track-duration'));\r\n  const artists       = element.querySelector('.track-artists-links').querySelectorAll('a');\r\n  const channels      = element.querySelector('.track-channels-links').querySelectorAll('a');\r\n  const modalEntries  = [];\r\n\r\n  modalEntries.push({\r\n    class:   'track-details-entry',\r\n    content: getModalTrackHtml(element, trackArtist, trackTitle),\r\n  });\r\n\r\n  modalEntries.push({ class: 'header-entry', content: 'Artists' });\r\n\r\n  artists.forEach(item =>\r\n  {\r\n    modalEntries.push({\r\n      clickId: `entry-${modalEntries.length}`,\r\n      class:   `icon-text ${item.classList[0]}`,\r\n      title:   'Go to Artist',\r\n      content: item.innerText,\r\n      link:    item.href,\r\n      icon:    'link',\r\n    });\r\n  });\r\n\r\n  modalEntries.push({ class: 'header-entry', content: 'Channels' });\r\n\r\n  channels.forEach(item =>\r\n  {\r\n    modalEntries.push({\r\n      clickId: `entry-${modalEntries.length}`,\r\n      title:   'Go to Channel',\r\n      content: item.innerText,\r\n      link:    item.href,\r\n      icon:    'link'\r\n    });\r\n  });\r\n\r\n  const modalId = showModal(\r\n    `Track Details<span class=\"light-text lowercase-text\">${((trackDuration > 0) ? utils.getTimeString(trackDuration) : 'N / A')}</span>`,\r\n    modalEntries,\r\n    'track-details',\r\n    (clickedId) =>\r\n  {\r\n    utils.navToUrl(modalEntries.find(item => (item.clickId === clickedId)).link);\r\n  });\r\n\r\n  trackThumbnailClick(modalId, `${trackArtist} - ${trackTitle}`);\r\n}\r\n\r\nfunction trackThumbnailClick(modalId, artistTitle)\r\n{\r\n  document.getElementById(modalId).querySelector('.modal-track').title = 'Click / tap to Copy Artist & Title';\r\n\r\n  document.getElementById(modalId)?.querySelector('img')?.addEventListener('click', () =>\r\n  {\r\n    copyTextToClipboard(artistTitle, 'Artist &amp Title copied to clipboard', 'Unable to copy Artist &amp Title to clipboard');\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme and layout settings helpers\r\n// ************************************************************************************************\r\n\r\nfunction getCurrentSetting(settingsObject, currentId, defaultSetting)\r\n{\r\n  const setting = Object.values(settingsObject).find(value => (value.id === currentId));\r\n  return ((setting !== undefined) ? setting : defaultSetting);\r\n}\r\n\r\nfunction getNextSetting(settingsObject, currentSetting)\r\n{\r\n  const index = Object.values(settingsObject).findIndex(value => (value.id === currentSetting.id));\r\n  const keys  = Object.keys(settingsObject);\r\n\r\n  return (((index + 1) < keys.length)\r\n           ? settingsObject[keys[index + 1]]\r\n           : settingsObject[keys[0]]);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Site theme handling\r\n// ************************************************************************************************\r\n\r\nclass SiteThemeToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.themes = {\r\n      light: { id: 'light', text: 'light', class: 'site-theme-light' },\r\n      dark:  { id: 'dark',  text: 'dark',  class: 'site-theme-dark'  },\r\n      auto:  { id: 'auto',  text: 'auto'                             }, // This has no CSS class since auto is always light or dark\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', () => this.matchMediaPrefColorScheme());\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentTheme = getCurrentSetting(this.themes, settings.site.theme, this.themes.auto);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaPrefColorScheme()\r\n  {\r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n      this.update();\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentTheme   = getNextSetting(this.themes, this.currentTheme);\r\n    settings.site.theme = this.currentTheme.id;\r\n  }\r\n\r\n  update()\r\n  {\r\n    let newTheme = this.currentTheme;\r\n\r\n    if (this.currentTheme.id === this.themes.auto.id)\r\n    {\r\n      newTheme = window.matchMedia('(prefers-color-scheme: dark)').matches\r\n                   ? this.themes.dark\r\n                   : this.themes.light;\r\n    }\r\n\r\n    setValue(KEY.UF_SITE_THEME, newTheme.id);\r\n\r\n    // Only update DOM if something has actually changed...\r\n    if (htmlClassList.contains(newTheme.class) === false)\r\n    {\r\n      debug.log(`SiteThemeToggle.update() - newSiteTheme: ${newTheme.id}`);\r\n\r\n      htmlClassList.remove(this.themes.light.class, this.themes.dark.class);\r\n      htmlClassList.add(newTheme.class);\r\n    }\r\n\r\n    // Always update this because AUTO is not a separate class (only DARK + LIGHT are classes)\r\n    this.value = this.currentTheme.text;\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Gallery layout handling\r\n// ************************************************************************************************\r\n\r\nclass GalleryLayoutToggle extends ElementToggle\r\n{\r\n  constructor(elementId)\r\n  {\r\n    super(elementId, false);\r\n\r\n    this.minWidth = `(max-width: ${utils.getCssPropString('--gallery-layout-min-width')})`;\r\n\r\n    this.layouts = {\r\n      oneColumn:   { id: '1-column', text: '1 column',     class: 'gallery-1-col' },\r\n      twoColumn:   { id: '2-column', text: '2 column',     class: 'gallery-2-col' },\r\n      threeColumn: { id: '3-column', text: '3 / 4 column', class: 'gallery-3-col' },\r\n    };\r\n\r\n    this.setCurrent();\r\n\r\n    window.matchMedia(this.minWidth).addEventListener('change', (event) => this.matchMediaMinWidth(event));\r\n  }\r\n\r\n  setCurrent()\r\n  {\r\n    this.currentLayout = getCurrentSetting(this.layouts, settings.gallery.layout, this.layouts.threeColumn);\r\n    this.update();\r\n  }\r\n\r\n  matchMediaMinWidth(event)\r\n  {\r\n    if (htmlClassList.contains('gallery-layout'))\r\n    {\r\n      if (event.matches)\r\n      {\r\n        htmlClassList.remove(this.currentLayout.class);\r\n        htmlClassList.add(this.layouts.oneColumn.class);\r\n      }\r\n      else\r\n      {\r\n        htmlClassList.remove(this.layouts.oneColumn.class);\r\n        htmlClassList.add(this.currentLayout.class);\r\n      }\r\n    }\r\n  }\r\n\r\n  toggle()\r\n  {\r\n    this.currentLayout      = getNextSetting(this.layouts, this.currentLayout);\r\n    settings.gallery.layout = this.currentLayout.id;\r\n  }\r\n\r\n  update(event)\r\n  {\r\n    this.value = this.currentLayout.text;\r\n    setValue(KEY.UF_GALLERY_LAYOUT, this.currentLayout.id);\r\n\r\n    if (window.matchMedia(this.minWidth).matches)\r\n      return;\r\n\r\n    // Only update DOM if needed and when something has actually changed\r\n    if ((htmlClassList.contains('gallery-layout')) && (htmlClassList.contains(this.currentLayout.class) === false))\r\n    {\r\n      debug.log(`GalleryLayoutToggle.update() - newGalleryLayout: ${this.currentLayout.id}`);\r\n\r\n      htmlClassList.remove(this.layouts.oneColumn.class, this.layouts.twoColumn.class, this.layouts.threeColumn.class);\r\n      htmlClassList.add(this.currentLayout.class);\r\n    }\r\n\r\n    if (event?.type === 'click')\r\n      this.element.scrollIntoView();\r\n  }\r\n}\r\n", "//\r\n// Termlist template functions\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport {\r\n  SITE_URL,\r\n  getPrefPlayerUrl,\r\n  getThumbnailData,\r\n} from \"../shared/utils.js\";\r\n\r\n\r\n// ************************************************************************************************\r\n// Render fetched track and meta-data as HTML\r\n// ************************************************************************************************\r\n\r\nexport function getTermlistHtml(header, termSlug, termData)\r\n{\r\n  let html = `<b>${header}</b>`;\r\n\r\n  termData.forEach((track, index) =>\r\n  {\r\n    const thumbnailData = getThumbnailData(track.meta);\r\n\r\n    html += /*html*/ `\r\n    <div class=\"track\">\r\n      <div class=\"thumbnail ${thumbnailData.class}\"\r\n        data-term-url=\"${track.link}\"\r\n        data-term-slug=\"${termSlug}\"\r\n        data-track-num=\"${index + 1}\"\r\n        data-track-type=\"${track.meta.track_source_type}\"\r\n        data-track-id=\"track-${track.id}\"\r\n        data-track-source-uid=\"${thumbnailData.uid}\" title=\"Play Track\"\r\n        >\r\n        <img src=\"${thumbnailData.src}\">\r\n      </div>\r\n      <div class=\"artist-title text-nowrap-ellipsis\">\r\n        <a href=\"${track.link}\" title=\"Go to track\"><span><b>${track.meta.track_artist}</b></span><br><span>${track.meta.track_title}</span></a>\r\n      </div>\r\n    </div>`;\r\n  });\r\n\r\n  return html;\r\n}\r\n\r\nexport function getTermLinksHtml(header, termData)\r\n{\r\n  let html = `<b>${header}</b><br>`;\r\n\r\n  termData.forEach(item => (html += `<a href=\"${getPrefPlayerUrl(item.link)}\">${item.name}</a>, `));\r\n\r\n  return html.slice(0, (html.length - 2));\r\n}\r\n\r\nexport function getTopArtistsLinksHtml(header, artistsData, channelSlug)\r\n{\r\n  let html = `<b>${header}</b><br>`;\r\n\r\n  artistsData.forEach((item) =>\r\n  {\r\n    const artistLink = getPrefPlayerUrl(`${SITE_URL}/artist/${item.artist_slug}/?channel=${channelSlug}`);\r\n    html += `<a href=\"${artistLink}\">${item.artist_name}</a> (${item.track_count})<br>`;\r\n  });\r\n\r\n  return html;\r\n}\r\n", "//\r\n// Termlist REST data fetch and caching\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\n//import * as debugLogger from '../shared/debuglogger.js';\r\nimport { KEY }          from '../shared/storage.js';\r\nimport { showSnackbar } from '../shared/snackbar.js';\r\n\r\nimport {\r\n  fetchRest,\r\n  stripAttribute,\r\n} from '../shared/utils.js';\r\n\r\nimport {\r\n  getTermlistHtml,\r\n  getTermLinksHtml,\r\n  getTopArtistsLinksHtml,\r\n} from './termlist-templates.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\n//const debug = debugLogger.newInstance('termlist-rest');\r\nconst m     = { termCache: {} };\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch data via REST API and update DOM with results\r\n// ************************************************************************************************\r\n\r\nexport function loadTermlist(termlistContainer, termlistEntry, termlistBody)\r\n{\r\n  const termType      = stripAttribute(termlistContainer, 'data-term-type');\r\n  const termId        = parseInt(termlistEntry.getAttribute('data-term-id'));\r\n  const termSlug      = stripAttribute(termlistEntry, 'data-term-slug');\r\n  const isAllChannels = (termType === 'channels');\r\n\r\n  fetchTracks(termType, termId, (isAllChannels ? 10 : 50), async (termData) =>\r\n  {\r\n    let header  = isAllChannels ? 'Latest Tracks' : 'All Tracks';\r\n    let element = termlistBody.querySelector('.body-left');\r\n\r\n    if (termData !== null)\r\n    {\r\n      element.innerHTML = getTermlistHtml(header, termSlug, termData);\r\n      termlistEntry.classList.add('data-fetched');\r\n    }\r\n    else\r\n    {\r\n      showSnackbar('Failed to fetch track data!', 30, 'retry', () => loadTermlist(termlistContainer, termlistEntry, termlistBody));\r\n    }\r\n\r\n    if (!isAllChannels && (termData !== null))\r\n    {\r\n      fetchArtistMeta(termData, termId, 50, (metaType, metadata) =>\r\n      {\r\n        header  = (metaType === 'artists') ? 'Related Artists' : 'In Channels';\r\n        element = (metaType === 'artists')\r\n                    ? termlistBody.querySelector('.artists')\r\n                    : termlistBody.querySelector('.channels');\r\n\r\n        if (metadata !== null)\r\n          element.innerHTML = getTermLinksHtml(header, metadata);\r\n        else\r\n          element.innerHTML = `<b>${header}</b><br>None found`;\r\n      });\r\n    }\r\n    else if (termData !== null)\r\n    {\r\n      if (('topArtists' in m.termCache[termId]) === false)\r\n      {\r\n        const restResponse = await fetchRest('top-artists', `channelId=${termId}`, true, '/wp-json/ultrafunk/v1/');\r\n\r\n        if ((restResponse !== null) && (restResponse.status.code === 200))\r\n          m.termCache[termId]['topArtists'] = restResponse.data;\r\n      }\r\n\r\n      termlistBody.querySelector('.top-artists').innerHTML = getTopArtistsLinksHtml('Top Artists (tracks)', m.termCache[termId]['topArtists'], termSlug);\r\n    }\r\n  });\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Fetch tracks for a given termType with termId (channel or artist)\r\n// ************************************************************************************************\r\n\r\nasync function fetchTracks(termType, termId, maxItems, callback)\r\n{\r\n  if ((termId in m.termCache) === false)\r\n  {\r\n    const restResponse = await fetchRest('tracks', `${termType}=${termId}&per_page=${maxItems}&_fields=id,link,artists,channels,meta`, true);\r\n\r\n    if ((restResponse !== null) && (restResponse.status.code === 200))\r\n      m.termCache[termId] = { tracks: restResponse.data };\r\n  }\r\n\r\n  callback((m.termCache[termId] !== undefined) ? m.termCache[termId].tracks : null);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Merge then fetch channels and artists for a given artist (termId)\r\n// ************************************************************************************************\r\n\r\nfunction fetchArtistMeta(termData, termId, maxItems, callback)\r\n{\r\n  if (('channels' in m.termCache[termId]) && ('artists' in m.termCache[termId]))\r\n  {\r\n    callback('channels', m.termCache[termId].channels);\r\n    callback('artists',  m.termCache[termId].artists);\r\n  }\r\n  else\r\n  {\r\n    const channels = [];\r\n    let   artists  = [];\r\n\r\n    termData.forEach(item =>\r\n    {\r\n      channels.push.apply(channels, item.channels);\r\n      artists.push.apply(artists, item.artists);\r\n    });\r\n\r\n    artists = artists.filter(item => (item !== termId));\r\n\r\n    fetchMeta('channels', termId, [...new Set(channels)], maxItems, callback);\r\n    fetchMeta('artists',  termId, [...new Set(artists)],  maxItems, callback);\r\n  }\r\n}\r\n\r\nasync function fetchMeta(\r\n  termType,\r\n  termId,\r\n  termIds,\r\n  maxItems,\r\n  callback\r\n)\r\n{\r\n  if (termIds.length > 0)\r\n  {\r\n    const restResponse = await fetchRest(termType, `include=${termIds}&per_page=${maxItems}&_fields=link,name`, true);\r\n\r\n    if ((restResponse !== null) && (restResponse.status.code === 200))\r\n      m.termCache[termId][termType] = restResponse.data;\r\n  }\r\n\r\n  callback(termType, (m.termCache[termId][termType] !== undefined) ? m.termCache[termId][termType] : null);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Term cache functions\r\n// ************************************************************************************************\r\n\r\nexport function readCache()\r\n{\r\n  m.termCache = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_CACHE));\r\n\r\n  if (m.termCache === null)\r\n    m.termCache = {};\r\n}\r\n\r\nexport function writeCache()\r\n{\r\n  sessionStorage.setItem(KEY.UF_TERMLIST_CACHE, JSON.stringify(m.termCache));\r\n}\r\n\r\nexport function deleteCache()\r\n{\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_CACHE);\r\n}\r\n\r\nexport function hasCache()\r\n{\r\n  return (Object.keys(m.termCache).length > 0);\r\n}\r\n", "//\r\n// Termlist UI module\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger       from '../shared/debuglogger.js';\r\nimport * as termlistRest      from './termlist-rest.js';\r\nimport * as utils             from '../shared/utils.js';\r\nimport ElementClick           from '../shared/element-click.js';\r\nimport { shareModal }         from './share-modal.js';\r\nimport { TRACK_TYPE }         from '../playback/mediaplayers.js';\r\nimport { KEY, setCookie }     from '../shared/storage.js';\r\nimport { PREF_PLAYER }        from '../shared/settings/settings.js';\r\nimport { response, settings } from '../shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('termlist-controls');\r\n\r\nconst m = {\r\n  listContainer: null,\r\n  uiElements:    null,\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Setup module\r\n// ************************************************************************************************\r\n\r\nexport function init()\r\n{\r\n  debug.log('init()');\r\n\r\n  m.listContainer = document.getElementById('termlist-container');\r\n  m.uiElements    = new UiElements('#termlist-container');\r\n\r\n  restoreState();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Save and restore Termlist state\r\n// ************************************************************************************************\r\n\r\nfunction saveState()\r\n{\r\n  if (termlistRest.hasCache())\r\n  {\r\n    const termlistState = {\r\n      pageUrl:     window.location.href,\r\n      scrollPos:   Math.round(window.pageYOffset),\r\n      openTermIds: [],\r\n    };\r\n\r\n    document.querySelectorAll('.termlist-entry').forEach(element =>\r\n    {\r\n      if (element.classList.contains('open'))\r\n        termlistState.openTermIds.push(element.id);\r\n    });\r\n\r\n    sessionStorage.setItem(KEY.UF_TERMLIST_STATE, JSON.stringify(termlistState));\r\n    termlistRest.writeCache();\r\n  }\r\n}\r\n\r\nfunction restoreState()\r\n{\r\n  termlistRest.readCache();\r\n\r\n  if (performance.getEntriesByType('navigation')[0].type !== 'reload')\r\n  {\r\n    const termlistState = JSON.parse(sessionStorage.getItem(KEY.UF_TERMLIST_STATE));\r\n\r\n    if ((termlistState !== null) && (termlistState.pageUrl === window.location.href))\r\n    {\r\n      history.scrollRestoration = 'manual';\r\n\r\n      termlistState.openTermIds.forEach(item =>\r\n      {\r\n        document.getElementById(item).querySelector('div.termlist-header').click();\r\n      });\r\n\r\n      window.scroll({ top: termlistState.scrollPos, left: 0, behavior: 'auto' });\r\n    }\r\n    else\r\n    {\r\n      history.scrollRestoration = 'auto';\r\n    }\r\n  }\r\n\r\n  sessionStorage.removeItem(KEY.UF_TERMLIST_STATE);\r\n  termlistRest.deleteCache();\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Click event functions\r\n// ************************************************************************************************\r\n\r\nclass UiElements extends ElementClick\r\n{\r\n  elementClicked()\r\n  {\r\n    if (this.clicked('div.play-button'))\r\n      return playClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n\r\n    if (this.clicked('div.shuffle-button'))\r\n      return shuffleClick(this.event, utils.getPrefPlayerUrl(this.querySelector('a').href));\r\n\r\n    if (this.clicked('div.share-find-button'))\r\n      return shareFindClick(this.element);\r\n\r\n    if (this.clicked('div.termlist-header'))\r\n      return termlistHeaderClick(this.event);\r\n\r\n    if (this.clicked('div.thumbnail'))\r\n      return playTrackClick(this.event, this.element);\r\n\r\n    if (this.clicked('a'))\r\n      return linkClicked(this.event, this.element);\r\n  }\r\n}\r\n\r\nfunction playClick(event, destUrl, trackId = null)\r\n{\r\n  event?.preventDefault();\r\n  saveState();\r\n\r\n  // ToDo: Create a playbackSetting for this? Or use SHIFT + click to skip autoplay\r\n  sessionStorage.setItem(KEY.UF_AUTOPLAY, JSON.stringify({ autoplay: (event.shiftKey === false), trackId: trackId, position: 0 }));\r\n\r\n  utils.navToUrl(destUrl);\r\n}\r\n\r\nfunction shuffleClick(event, destUrl)\r\n{\r\n  setCookie(KEY.UF_RESHUFFLE, 'true');\r\n  playClick(event, destUrl);\r\n}\r\n\r\nfunction shareFindClick(element)\r\n{\r\n  const termName = utils.stripAttribute(element, 'data-term-name');\r\n\r\n  shareModal.show({\r\n    title:    `Share / Find ${utils.stripAttribute(element, 'data-term-path')}`,\r\n    bodyText: termName,\r\n    bodyHtml: `<b>${termName}</b>`,\r\n    url:      utils.getPrefPlayerUrl(element.getAttribute('data-term-url')),\r\n    verb:     'Find',\r\n  });\r\n}\r\n\r\nfunction playTrackClick(event, element)\r\n{\r\n  const termType       = (m.listContainer.getAttribute('data-term-type') === 'channels') ? 'channel' : 'artist';\r\n  const termSlug       = utils.stripAttribute(element, 'data-term-slug');\r\n  const trackType      = parseInt(element.getAttribute('data-track-type'));\r\n  const trackSourceUid = element.getAttribute('data-track-source-uid');\r\n\r\n  if ((settings.playback.preferredPlayer === PREF_PLAYER.GALLERY) || (trackType === TRACK_TYPE.SOUNDCLOUD))\r\n  {\r\n    playClick(event, element.getAttribute('data-term-url'), null);\r\n  }\r\n  else\r\n  {\r\n    const trackNum = parseInt(element.getAttribute('data-track-num'));\r\n    let pagination = '';\r\n\r\n    if (trackNum > response.listPerPage)\r\n      pagination = `page/${Math.ceil(trackNum / response.listPerPage)}/`;\r\n\r\n    playClick(event, `${utils.SITE_URL}/list/${termType}/${termSlug}/${pagination}`, trackSourceUid);\r\n  }\r\n}\r\n\r\nfunction linkClicked(event, element)\r\n{\r\n  saveState();\r\n\r\n  if (element.closest('div.permalink') !== null)\r\n  {\r\n    event?.preventDefault();\r\n    utils.navToUrl(utils.getPrefPlayerUrl(element.href));\r\n  }\r\n}\r\n\r\nfunction termlistHeaderClick(event)\r\n{\r\n  const termlistEntry = event.target.closest('div.termlist-entry');\r\n  const expandToggle  = termlistEntry.querySelector('div.expand-toggle span');\r\n  const termlistBody  = termlistEntry.querySelector('div.termlist-body');\r\n  const isExpanded    = (termlistBody.style.display.length !== 0);\r\n  const isDataFetched = termlistEntry.classList.contains('data-fetched');\r\n\r\n  utils.replaceClass(termlistEntry, (isExpanded ? 'open' : 'closed'), (isExpanded ? 'closed' : 'open'));\r\n\r\n  expandToggle.textContent   = isExpanded ? 'expand_more' : 'expand_less';\r\n  termlistBody.style.display = isExpanded ? ''            : 'flex';\r\n\r\n  if (!isExpanded && !isDataFetched)\r\n    termlistRest.loadTermlist(m.listContainer, termlistEntry, termlistBody);\r\n}\r\n", "//\r\n// Ultrafunk site nav-menu\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils   from '../shared/utils.js';\r\nimport { settings } from '../shared/session-data.js';\r\nimport { isSingleTrackFetch } from '../playback/gallery/single-track-fetch.js';\r\n\r\nimport {\r\n  noPlayback,\r\n  shuffleClickNavTo,\r\n} from '../playback/shared-gallery-list.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Main navigation menu handling closure\r\n// ************************************************************************************************\r\n\r\nconst navMenuClosure = (() =>\r\n{\r\n  const observer = new ResizeObserver(observerCallback);\r\n  let siteHeader = null, navMenuOuter = null, modalOverlay = null;\r\n  let isVisible = false;\r\n\r\n  window.addEventListener('load', () =>\r\n  {\r\n    utils.addListener('#menu-primary-menu .menu-item-reshuffle a', 'click', shuffleClickNavTo);\r\n    document.getElementById('menu-primary-menu')?.addEventListener('click', menuClickUsePrefPlayer);\r\n  });\r\n\r\n  return {\r\n    isVisible()   { return isVisible;                },\r\n    scrolledTop() { navMenuOuter.style.display = ''; },\r\n    init,\r\n    toggle,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    siteHeader   = document.getElementById('site-header');\r\n    navMenuOuter = document.querySelector('#site-navigation .nav-menu-outer');\r\n    modalOverlay = document.getElementById('nav-menu-modal-overlay');\r\n\r\n    utils.addListenerAll('.nav-menu-toggle', 'click', toggle);\r\n    modalOverlay.addEventListener('click', toggle);\r\n    modalOverlay.addEventListener('transitionend', transitionEnd);\r\n    observer.observe(navMenuOuter.querySelector('.menu-primary-menu-container'));\r\n  }\r\n\r\n  function menuClickUsePrefPlayer(event)\r\n  {\r\n    const menuElement = event.target.closest('li.menu-item.menu-item-object-uf_channel');\r\n\r\n    if (menuElement !== null)\r\n    {\r\n      if (isSingleTrackFetch() || noPlayback())\r\n      {\r\n        event?.preventDefault();\r\n        utils.navToUrl(utils.getPrefPlayerUrl(menuElement.querySelector('a').href));\r\n      }\r\n    }\r\n  }\r\n\r\n  function toggle()\r\n  {\r\n    if (siteHeader.classList.contains('sticky-nav-up'))\r\n    {\r\n      if (isVisible)\r\n        navMenuOuter.style.display = 'none';\r\n      else\r\n        navMenuOuter.style.display = 'flex';\r\n    }\r\n    else\r\n    {\r\n      if (siteHeader.classList.contains('sticky-nav-down') === false)\r\n        siteHeader.classList.toggle('hide-nav-menu');\r\n    }\r\n  }\r\n\r\n  function observerCallback(entries)\r\n  {\r\n    isVisible = (entries[0].contentRect.height !== 0) ? true : false;\r\n\r\n    if (isVisible)\r\n    {\r\n      modalOverlay.className = '';\r\n      modalOverlay.style.backgroundColor = `rgba(0, 0, 0, ${Math.round(10 * (settings.site.modalOverlayOpacity / 100)) / 10})`;\r\n      modalOverlay.classList.add('show');\r\n      setTimeout(() => modalOverlay.classList.add('fadein'), 50);\r\n    }\r\n    else\r\n    {\r\n      modalOverlay.classList.add('fadeout');\r\n    }\r\n  }\r\n\r\n  function transitionEnd()\r\n  {\r\n    if (isVisible === false)\r\n    {\r\n      modalOverlay.className     = '';\r\n      navMenuOuter.style.display = '';\r\n    }\r\n  }\r\n});\r\n\r\nexport const navMenu = navMenuClosure();\r\n", "//\r\n// Ultrafunk site nav-search\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as utils from '../shared/utils.js';\r\n\r\n\r\n// ************************************************************************************************\r\n// Main navigation search handling closure\r\n// ************************************************************************************************\r\n\r\nconst navSearchClosure = (() =>\r\n{\r\n  const allowKeyboardShortcutsEvent = new Event('allowKeyboardShortcuts');\r\n  const denyKeyboardShortcutsEvent  = new Event('denyKeyboardShortcuts');\r\n  let siteHeader = null, searchContainer = null, searchField = null, brandingContainer = null;\r\n  let isVisible = false;\r\n\r\n  return {\r\n    isVisible() { return isVisible; },\r\n    init,\r\n    toggle,\r\n    hide,\r\n  };\r\n\r\n  function init()\r\n  {\r\n    siteHeader        = document.getElementById('site-header');\r\n    searchContainer   = document.getElementById('search-container');\r\n    searchField       = searchContainer.querySelector('.search-field');\r\n    brandingContainer = siteHeader.querySelector('div.site-branding-container');\r\n\r\n    utils.addListenerAll('.nav-search-toggle', 'click', toggle);\r\n    // To prevent extra 'blur' event before 'click' event\r\n    utils.addListenerAll('.nav-search-toggle', 'mousedown', (event) => event.preventDefault());\r\n    // Hide nav search bar on focus loss\r\n    searchField.addEventListener('blur', hide);\r\n\r\n    // Hide nav search bar on ESC\r\n    searchField.addEventListener('keydown', (event) =>\r\n    {\r\n      if (event.key === 'Escape')\r\n      {\r\n        event.stopPropagation();\r\n        hide();\r\n      }\r\n    });\r\n  }\r\n\r\n  function toggle()\r\n  {\r\n    hasVisibleSearchContainer() ? show() : hide();\r\n  }\r\n\r\n  function hide()\r\n  {\r\n    if (isVisible)\r\n      setProps(false, allowKeyboardShortcutsEvent, '', 'search');\r\n  }\r\n\r\n  function hasVisibleSearchContainer()\r\n  {\r\n    if (searchContainer.style.display.length === 0)\r\n    {\r\n      // Has no visible site header at all, bail out...\r\n      if (siteHeader.offsetHeight === 0)\r\n        return false;\r\n\r\n      // Is mobile with no visible navbar, bail out...\r\n      if (utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n      {\r\n        if ((siteHeader.querySelector('.navbar-container-mobile-top').offsetHeight === 0) &&\r\n            (siteHeader.querySelector('.navbar-container-mobile-up').offsetHeight  === 0))\r\n        {\r\n          return false;\r\n        }\r\n      }\r\n\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  function show()\r\n  {\r\n    setPosSize();\r\n    setProps(true, denyKeyboardShortcutsEvent, 'flex', 'clear');\r\n    searchField.focus();\r\n    searchField.setSelectionRange(9999, 9999);\r\n  }\r\n\r\n  function setProps(visible, keyboardShortcutsEvent, display, icon)\r\n  {\r\n    isVisible = visible;\r\n    document.dispatchEvent(keyboardShortcutsEvent);\r\n    searchContainer.style.display = display;\r\n    document.querySelectorAll('div.nav-search-toggle span').forEach(element => (element.textContent = icon));\r\n\r\n    if (isVisible)\r\n      document.getElementById('playback-controls').classList.add('hide');\r\n    else\r\n      document.getElementById('playback-controls').classList.remove('hide');\r\n  }\r\n\r\n  function setPosSize()\r\n  {\r\n    let position = {};\r\n\r\n    if (utils.matchesMedia(utils.MATCH.SITE_MAX_WIDTH_MOBILE))\r\n    {\r\n      if (brandingContainer.offsetHeight !== 0)\r\n        position.top = brandingContainer.offsetTop;\r\n      else\r\n        position.top = siteHeader.querySelector('.navbar-container-mobile-up').offsetTop;\r\n\r\n      position = new DOMRect(63, (position.top + 3), (document.body.clientWidth - 60), 30);\r\n    }\r\n    else\r\n    {\r\n      if (brandingContainer.offsetHeight !== 0)\r\n      {\r\n        const rect = brandingContainer.getBoundingClientRect();\r\n        position   = new DOMRect(rect.left, (rect.top + 7), rect.right, (rect.height - 15));\r\n      }\r\n      else\r\n      {\r\n        const rect = siteHeader.querySelector('.navbar-container').getBoundingClientRect();\r\n        position   = new DOMRect((rect.left + 88), rect.top, (rect.right - 90), (rect.height - 1));\r\n      }\r\n    }\r\n\r\n    searchContainer.style.left   = `${position.left}px`;\r\n    searchContainer.style.top    = `${position.top}px`;\r\n    searchContainer.style.width  = `${position.width - position.left}px`;\r\n    searchContainer.style.height = `${position.height}px`;\r\n  }\r\n});\r\n\r\nexport const navSearch = navSearchClosure();\r\n", "//\r\n// Ultrafunk site interaction\r\n//\r\n// https://ultrafunk.com\r\n//\r\n\r\n\r\nimport * as debugLogger from './shared/debuglogger.js';\r\nimport * as storage     from './shared/storage.js';\r\nimport * as utils       from './shared/utils.js';\r\nimport * as interaction from './site/interaction.js';\r\nimport * as termlist    from './site/termlist.js';\r\nimport { navMenu }      from './site/nav-menu.js';\r\nimport { navSearch }    from './site/nav-search.js';\r\nimport { noPlayback }   from './playback/shared-gallery-list.js';\r\n\r\nimport {\r\n  response,\r\n  settings,\r\n  readSettings,\r\n} from './shared/session-data.js';\r\n\r\n\r\n/*************************************************************************************************/\r\n\r\n\r\nconst debug = debugLogger.newInstance('index');\r\n\r\nconst elements = {\r\n  siteHeader:        null,\r\n  introBanner:       null,\r\n  siteContent:       null,\r\n  siteContentSearch: null,\r\n  fullscreenTarget:  null,\r\n};\r\n\r\n\r\n// ************************************************************************************************\r\n// Document ready and document / window event listeners\r\n// ************************************************************************************************\r\n\r\ndocument.addEventListener('DOMContentLoaded', () =>\r\n{\r\n  debug.log('DOMContentLoaded');\r\n\r\n  initIndex();\r\n\r\n  if (elements.introBanner !== null)\r\n    showIntroBanner();\r\n\r\n  if (document.getElementById('termlist-container') !== null)\r\n    termlist.init();\r\n\r\n  if (elements.siteContentSearch !== null)\r\n  {\r\n    elements.siteContentSearch.focus();\r\n    elements.siteContentSearch.setSelectionRange(9999, 9999);\r\n  }\r\n\r\n  setPreviousPageTitle();\r\n\r\n  debugLogger.logStartupExecutionTime();\r\n});\r\n\r\nfunction initIndex()\r\n{\r\n  debug.log('initIndex()');\r\n\r\n  elements.siteHeader        = document.getElementById('site-header');\r\n  elements.introBanner       = document.getElementById('intro-banner');\r\n  elements.siteContent       = document.getElementById('site-content');\r\n  elements.siteContentSearch = document.querySelector('#site-content form input.search-field');\r\n\r\n  interaction.init();\r\n  navSearch.init();\r\n  navMenu.init();\r\n\r\n  resize.addEventListener();\r\n  scroll.addEventListener();\r\n\r\n  document.addEventListener('fullscreenElement', (event) => (elements.fullscreenTarget = event.fullscreenTarget));\r\n  document.addEventListener('keydown', documentEventKeyDown);\r\n}\r\n\r\ndocument.addEventListener('settingsUpdated', () =>\r\n{\r\n  readSettings();\r\n  interaction.settingsUpdated();\r\n  storage.setCookie(storage.KEY.UF_GALLERY_PER_PAGE, settings.gallery.tracksPerPage,    (storage.YEAR_IN_SECONDS * 5));\r\n  storage.setCookie(storage.KEY.UF_PREFERRED_PLAYER, settings.playback.preferredPlayer, (storage.YEAR_IN_SECONDS * 5));\r\n});\r\n\r\n\r\n// ************************************************************************************************\r\n// Keyboard events handling\r\n// ************************************************************************************************\r\n\r\nfunction documentEventKeyDown(event)\r\n{\r\n  // UI keyboard events (cannot be disable by the user)\r\n  if ((event.repeat  === false) &&\r\n      (event.ctrlKey === false) &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'Escape':\r\n        if (navMenu.isVisible())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.toggle();\r\n        }\r\n        return;\r\n    }\r\n  }\r\n\r\n  // User enabled keyboard shortcuts (on by default)\r\n  if (settings.site.keyboardShortcuts &&\r\n      (event.repeat  === false)       &&\r\n      (event.ctrlKey === false)       &&\r\n      (event.altKey  === false))\r\n  {\r\n    switch (event.key)\r\n    {\r\n      case 'c':\r\n      case 'C':\r\n        if (searchNotFocused())\r\n        {\r\n          event.preventDefault();\r\n          navMenu.toggle();\r\n        }\r\n        break;\r\n\r\n      case 'L':\r\n        if (searchNotFocused() && notSettingsPage())\r\n        {\r\n          interaction.galleryLayout.toggle(event);\r\n          resize.trigger();\r\n        }\r\n        break;\r\n\r\n      case 's':\r\n      case 'S':\r\n        if (searchNotFocused() && notFullscreenElement())\r\n        {\r\n          event.preventDefault();\r\n          navSearch.toggle();\r\n        }\r\n        break;\r\n\r\n      case 'T':\r\n        if (searchNotFocused() && notSettingsPage())\r\n        {\r\n          interaction.siteTheme.toggle(event);\r\n        }\r\n        break;\r\n\r\n      case 'ArrowLeft':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.prevPage);\r\n        }\r\n        break;\r\n\r\n      case 'ArrowRight':\r\n        if (event.shiftKey && noPlayback())\r\n        {\r\n          event.preventDefault();\r\n          utils.navToUrl(response.nextPage);\r\n        }\r\n        break;\r\n    }\r\n  }\r\n}\r\n\r\nfunction searchNotFocused()\r\n{\r\n  return ((navSearch.isVisible() === false) && (elements.siteContentSearch !== document.activeElement));\r\n}\r\n\r\nfunction notSettingsPage()\r\n{\r\n  return (document.body.classList.contains('page-settings') === false);\r\n}\r\n\r\nfunction notFullscreenElement()\r\n{\r\n  return ((elements.fullscreenTarget === null) ? true : false);\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// Misc. support functions\r\n// ************************************************************************************************\r\n\r\nfunction showIntroBanner()\r\n{\r\n  // Only show intro banners if they can be permanently dismissed\r\n  if (storage.isAvailable('localStorage') && bannerProperty) // eslint-disable-line no-undef\r\n  {\r\n    if (settings.banners[bannerProperty]) // eslint-disable-line no-undef\r\n    {\r\n      elements.introBanner.style.display = 'block';\r\n      resize.trigger();\r\n\r\n      utils.addListener('#intro-banner .intro-banner-close-button', 'click', () =>\r\n      {\r\n        elements.introBanner.style.display   = '';\r\n        elements.siteContent.style.marginTop = '';\r\n        settings.banners[bannerProperty]     = false; // eslint-disable-line no-undef\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction setPreviousPageTitle()\r\n{\r\n  if (document.querySelector('.navbar-title .go-back-to') !== null)\r\n  {\r\n    let pathString = '';\r\n\r\n    if (document.referrer.length === 0)\r\n    {\r\n      pathString = 'Previous Page';\r\n    }\r\n    else\r\n    {\r\n      const referrerUrlParts = new URL(decodeURIComponent(document.referrer));\r\n\r\n      if (referrerUrlParts.search.length !== 0)\r\n      {\r\n        pathString = 'Search Results';\r\n      }\r\n      else if (referrerUrlParts.pathname.length > 1)\r\n      {\r\n        const endSlash  = (referrerUrlParts.pathname.slice(-1) === '/') ? 1 : 0;\r\n        const pathParts = referrerUrlParts.pathname.slice(1, referrerUrlParts.pathname.length - endSlash).replace(/-/gi, ' ').split('/');\r\n\r\n        pathParts.forEach((part, index) =>\r\n        {\r\n          pathString += ((index + 1) < pathParts.length)\r\n                          ? part + ' / '\r\n                          : part;\r\n        });\r\n      }\r\n    }\r\n\r\n    document.querySelectorAll('#site-navigation .navbar-title').forEach(element =>\r\n    {\r\n      element.querySelector('.go-back-title').textContent = (pathString.length > 0) ? pathString : 'Ultrafunk (home)';\r\n      element.querySelector('.go-back-to').style.opacity  = 1;\r\n    });\r\n  }\r\n}\r\n\r\n\r\n// ************************************************************************************************\r\n// window.addEventListener('resize') handling\r\n// ************************************************************************************************\r\n\r\nconst resize = (() =>\r\n{\r\n  let siteHeaderYOffset = 0;\r\n\r\n  return {\r\n    getSiteHeaderYOffset() { return siteHeaderYOffset; },\r\n    addEventListener,\r\n    trigger: resizeEvent,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    resizeEvent();\r\n    window.addEventListener('resize', resizeEvent);\r\n  }\r\n\r\n  function resizeEvent()\r\n  {\r\n    let headerHeight = 0;\r\n\r\n    if (noPlayback())\r\n      headerHeight = utils.getCssPropValue('--site-header-height-no-playback');\r\n    else\r\n      headerHeight = utils.getCssPropValue('--site-header-height');\r\n\r\n    siteHeaderYOffset = Math.round((headerHeight > 150) ? (headerHeight / 2) : (headerHeight / 3));\r\n\r\n    if ((elements.introBanner !== null) && (elements.introBanner.style.display.length !== 0))\r\n    {\r\n      elements.introBanner.style.marginTop = `${headerHeight}px`;\r\n      elements.siteContent.style.marginTop = `${utils.getCssPropValue('--site-content-margin-top', document.body)}px`;\r\n    }\r\n  }\r\n})();\r\n\r\n\r\n// ************************************************************************************************\r\n// window.addEventListener('scroll') handling\r\n// ************************************************************************************************\r\n\r\nconst scroll = (() =>\r\n{\r\n  let previousScrollPos = 0;\r\n  let scrollDeltaUp     = 0;\r\n  let scrollDeltaDown   = 0;\r\n  let isScrolledDown    = false;\r\n  const scrollThreshold = 44; // px minimum amount of scrolling for direction change\r\n\r\n  return {\r\n    addEventListener,\r\n  };\r\n\r\n  function addEventListener()\r\n  {\r\n    scrollEvent();\r\n    window.addEventListener('scroll', scrollEvent);\r\n  }\r\n\r\n  function scrollEvent()\r\n  {\r\n    const currentScrollPos = window.pageYOffset;\r\n\r\n    if (currentScrollPos === 0)\r\n    {\r\n      scrolledTop();\r\n    }\r\n    if (currentScrollPos > previousScrollPos)\r\n    {\r\n      scrollDeltaDown += (currentScrollPos - previousScrollPos);\r\n\r\n      if ((scrollDeltaDown > scrollThreshold) && (currentScrollPos > resize.getSiteHeaderYOffset()))\r\n      {\r\n        scrollDeltaUp = 0;\r\n        scrolledDown();\r\n      }\r\n    }\r\n    else\r\n    {\r\n      scrollDeltaUp += (previousScrollPos - currentScrollPos);\r\n\r\n      if (scrollDeltaUp > scrollThreshold)\r\n      {\r\n        scrollDeltaDown = 0;\r\n        scrolledUp();\r\n      }\r\n    }\r\n\r\n    previousScrollPos = currentScrollPos;\r\n  }\r\n\r\n  function scrolledTop()\r\n  {\r\n    elements.siteHeader.classList.remove('sticky-nav-down', 'sticky-nav-up');\r\n    elements.siteHeader.classList.add('hide-nav-menu');\r\n    navSearch.hide();\r\n    navMenu.scrolledTop();\r\n  }\r\n\r\n  function scrolledDown()\r\n  {\r\n    if (isScrolledDown === false)\r\n    {\r\n      isScrolledDown = true;\r\n      utils.replaceClass(elements.siteHeader, 'sticky-nav-up', 'sticky-nav-down');\r\n      navSearch.hide();\r\n    }\r\n  }\r\n\r\n  function scrolledUp()\r\n  {\r\n    if (isScrolledDown === true)\r\n    {\r\n      isScrolledDown = false;\r\n      utils.replaceClass(elements.siteHeader, 'sticky-nav-down', 'sticky-nav-up');\r\n    }\r\n  }\r\n})();\r\n"],
  "mappings": "4RAeA,IAAMA,GAAoBC,EAAY,aAAa,EAO7CC,GAAqB,IAC3B,CACE,IAAMC,EAAsB,oCACxBC,EAAOC,EAAUC,EAAgBC,EAAUC,EAAKC,EAAWC,EAE/D,MAAO,CACL,KAAAC,CACF,EAEA,SAASA,EAAKC,EACd,CACE,MAAC,CACC,MAAAR,EAAiB,qBACjB,SAAAC,EAAiB,KACjB,eAAAC,EAAiB,GACjB,SAAAC,EAAiB,KACjB,IAAAC,EAAiB,KACjB,UAAAC,EAAiB,KACjB,KAAAC,EAAiB,MACnB,EAAIE,EAEGC,EAAUT,EAAOU,EAAoB,EAAG,QAASC,CAAqB,CAC/E,CAEA,SAASD,GACT,CACE,IAAME,EAAmB,CACvB,CAAE,QAAS,oBAAqB,KAAM,eAAgB,QAAS,+BAAkC,EACjG,CAAE,QAAS,iBAAqB,KAAM,QAAgB,QAAS,uBAAkC,EACjG,CAAE,QAAS,gBAAqB,KAAM,OAAgB,QAAS,MAAMN,uBAA4B,EACjG,CAAE,QAAS,eAAqB,KAAM,OAAgB,QAAS,MAAMA,sBAA4B,EACjG,CAAE,QAAS,YAAqB,KAAM,OAAgB,QAAS,MAAMA,kBAA4B,EACjG,CAAE,QAAS,UAAqB,KAAM,OAAgB,QAAS,MAAMA,gBAA4B,EACjG,CAAE,QAAS,iBAAqB,KAAM,OAAgB,QAAS,MAAMA,wBAA4B,CACnG,EAEA,OAAIH,IAAa,MACfS,EAAiB,QAAQ,CAAE,MAAO,oBAAqB,QAAST,CAAS,CAAC,EAErES,CACT,CAEA,SAASD,EAAsBE,EAC/B,CACEjB,GAAM,IAAI,4BAA4BiB,eAAuBb,mBAAuBC,wBAA+BC,YAAyBE,kBAAoBC,aAAqBC,GAAM,EAE3L,IAAMQ,EACmB,mBADJZ,EACuBD,EAAS,QAAQF,EAAqB,GAAG,EACzCE,CAD0C,EAGtF,OAAQY,OAED,oBACHE,GAAoBX,EAAK,iCAAkC,wCAAwC,EACnG,UAEG,iBACH,OAAO,SAAS,KAAO,mBAAmB,mBAAmBH,CAAQ,UAAU,UAAUG,CAAG,UAC5F,UAEG,gBACH,OAAO,KAAK,mCAAmCU,IAAgB,QAAQ,EACvE,UAEG,eACH,OAAO,KAAK,0CAA0CA,IAAgB,QAAQ,EAC9E,UAEG,YACH,OAAO,KAAK,mCAAmCA,IAAgB,QAAQ,EACvE,UAEG,UACH,OAAO,KAAK,+BAA+BA,qBAAiC,QAAQ,EACpF,UAEG,iBAEGT,IAAc,KAChB,OAAO,KAAK,qCAAqCA,IAAa,QAAQ,EAEtE,OAAO,KAAK,sCAAsCS,IAAgB,QAAQ,EAE9E,MAEN,CACF,EAEaE,EAAalB,GAAkB,EAOrC,SAASiB,GAAoBE,EAAeC,EAAiB,2BAA4BC,EAAe,mCAC/G,CACE,UAAU,UAAU,UAAUF,CAAa,EAAE,KAAK,IAClD,CACEG,EAAaF,EAAgB,CAAC,CAChC,EACCG,GACD,CACEzB,GAAM,MAAM,wCAAwCyB,GAAQ,EAC5DD,EAAaD,EAAc,CAAC,CAC9B,CAAC,CACH,CCvGA,IAAMG,GAAoBC,EAAY,kBAAkB,EAClDC,EAAgB,SAAS,gBAAgB,UAEzCC,GAAI,CACR,eAAgB,KAChB,eAAgB,IAClB,EAEWC,EAAgB,CAAC,EACjBC,EAAgB,CAAC,EAOrB,SAASC,IAChB,CACEN,GAAM,IAAI,QAAQ,EAElBG,GAAE,eAAiB,IAAII,GAAe,iBAAkB,EAAI,EAC5DJ,GAAE,eAAiB,IAAIK,GAAe,YAAY,EAClDJ,EAAmB,IAAIK,GAAgB,0BAA0B,EACjEJ,EAAmB,IAAIK,GAAoB,8BAA8B,EAEzE,OAAO,iBAAiB,OAAQ,IAChC,CACE,SAAS,cAAc,uBAAuB,GAAG,iBAAiB,QAASC,CAAS,EACpF,SAAS,cAAc,sBAAsB,GAAG,iBAAiB,QAASA,CAAS,EACnF,SAAS,cAAc,2BAA2B,GAAG,iBAAiB,QAASA,CAAS,CAC1F,CAAC,CACH,CAEO,SAASC,IAChB,CACER,EAAU,WAAW,EACrBC,EAAc,WAAW,CAC3B,CAOA,IAAME,GAAN,cAA6BM,CAC7B,CACE,gBACA,CACE,GAAI,KAAK,QAAQ,yBAAyB,EACxC,OAAOC,GAAe,KAAK,QAAQ,6BAA6B,CAAC,EAEnE,GAAI,KAAK,QAAQ,iBAAiB,EAChC,OAAOH,EAAU,KAAK,KAAK,CAC/B,CACF,EAEMH,GAAN,cAA6BK,CAC7B,CACE,gBACA,CACE,GAAI,KAAK,QAAQ,uBAAuB,EACtC,OAAOC,GAAe,KAAK,QAAQ,iBAAiB,CAAC,EAEvD,GAAI,KAAK,QAAQ,oBAAoB,EACnC,OAAOC,GAAa,KAAK,QAAQ,iBAAiB,CAAC,CACvD,CACF,EAEA,SAASJ,EAAUK,EACnB,CACMA,EAAM,OAAO,QAAQ,GAAG,IAE1BA,GAAO,eAAe,EAChBC,EAAeC,EAAiBF,EAAM,OAAO,IAAI,CAAC,EAE5D,CAEA,SAASF,GAAeK,EACxB,CACE,IAAMC,EAAoBC,EAAeF,EAAS,mBAAmB,EAC/DG,EAAoBD,EAAeF,EAAS,kBAAkB,EAE9DI,EAAUC,EAAW,KAAK,CAC9B,SAAgB,GAAGJ,OAAiBE,IACpC,eAAgB,GAChB,SAAgBG,EAAkBN,EAASC,EAAaE,CAAU,EAClE,IAAsBD,EAAeF,EAAS,gBAAgB,EAC9D,UAAsBE,EAAeF,EAAS,uBAAuB,CACvE,CAAC,EAEDO,GAAoBH,EAAS,GAAGH,OAAiBE,GAAY,CAC/D,CAEA,SAASP,GAAaI,EACtB,CACE,IAAMC,EAAsBC,EAAeF,EAAS,mBAAmB,EACjEG,EAAsBD,EAAeF,EAAS,kBAAkB,EAChEQ,EAAgB,SAASR,EAAQ,aAAa,qBAAqB,CAAC,EACpES,EAAgBT,EAAQ,cAAc,sBAAsB,EAAE,iBAAiB,GAAG,EAClFU,EAAgBV,EAAQ,cAAc,uBAAuB,EAAE,iBAAiB,GAAG,EACnFW,EAAgB,CAAC,EAEvBA,EAAa,KAAK,CAChB,MAAS,sBACT,QAASL,EAAkBN,EAASC,EAAaE,CAAU,CAC7D,CAAC,EAEDQ,EAAa,KAAK,CAAE,MAAO,eAAgB,QAAS,SAAU,CAAC,EAE/DF,EAAQ,QAAQG,GAChB,CACED,EAAa,KAAK,CAChB,QAAS,SAASA,EAAa,SAC/B,MAAS,aAAaC,EAAK,UAAU,KACrC,MAAS,eACT,QAASA,EAAK,UACd,KAASA,EAAK,KACd,KAAS,MACX,CAAC,CACH,CAAC,EAEDD,EAAa,KAAK,CAAE,MAAO,eAAgB,QAAS,UAAW,CAAC,EAEhED,EAAS,QAAQE,GACjB,CACED,EAAa,KAAK,CAChB,QAAS,SAASA,EAAa,SAC/B,MAAS,gBACT,QAASC,EAAK,UACd,KAASA,EAAK,KACd,KAAS,MACX,CAAC,CACH,CAAC,EAED,IAAMR,EAAUS,EACd,wDAA0DL,EAAgB,EAAWM,GAAcN,CAAa,EAAI,iBACpHG,EACA,gBACCI,GACH,CACQjB,EAASa,EAAa,KAAKC,GAASA,EAAK,UAAYG,CAAU,EAAE,IAAI,CAC7E,CAAC,EAEDR,GAAoBH,EAAS,GAAGH,OAAiBE,GAAY,CAC/D,CAEA,SAASI,GAAoBH,EAASY,EACtC,CACE,SAAS,eAAeZ,CAAO,EAAE,cAAc,cAAc,EAAE,MAAQ,qCAEvE,SAAS,eAAeA,CAAO,GAAG,cAAc,KAAK,GAAG,iBAAiB,QAAS,IAClF,CACEa,GAAoBD,EAAa,wCAAyC,+CAA+C,CAC3H,CAAC,CACH,CAOA,SAASE,GAAkBC,EAAgBC,EAAWC,EACtD,CACE,IAAMC,EAAU,OAAO,OAAOH,CAAc,EAAE,KAAKI,GAAUA,EAAM,KAAOH,CAAU,EACpF,OAASE,IAAY,OAAaA,EAAUD,CAC9C,CAEA,SAASG,GAAeL,EAAgBM,EACxC,CACE,IAAMC,EAAQ,OAAO,OAAOP,CAAc,EAAE,UAAUI,GAAUA,EAAM,KAAOE,EAAe,EAAG,EACzFE,EAAQ,OAAO,KAAKR,CAAc,EAExC,OAAUO,EAAQ,EAAKC,EAAK,OACjBR,EAAeQ,EAAKD,EAAQ,IAC5BP,EAAeQ,EAAK,GACjC,CAOA,IAAMrC,GAAN,cAA8BsC,CAC9B,CACE,YAAYC,EACZ,CACE,MAAMA,EAAW,EAAK,EAEtB,KAAK,OAAS,CACZ,MAAO,CAAE,GAAI,QAAS,KAAM,QAAS,MAAO,kBAAmB,EAC/D,KAAO,CAAE,GAAI,OAAS,KAAM,OAAS,MAAO,iBAAmB,EAC/D,KAAO,CAAE,GAAI,OAAS,KAAM,MAAmC,CACjE,EAEA,KAAK,WAAW,EAEhB,OAAO,WAAW,8BAA8B,EAAE,iBAAiB,SAAU,IAAM,KAAK,0BAA0B,CAAC,CACrH,CAEA,YACA,CACE,KAAK,aAAeX,GAAkB,KAAK,OAAQY,EAAS,KAAK,MAAO,KAAK,OAAO,IAAI,EACxF,KAAK,OAAO,CACd,CAEA,2BACA,CACM,KAAK,aAAa,KAAO,KAAK,OAAO,KAAK,IAC5C,KAAK,OAAO,CAChB,CAEA,QACA,CACE,KAAK,aAAiBN,GAAe,KAAK,OAAQ,KAAK,YAAY,EACnEM,EAAS,KAAK,MAAQ,KAAK,aAAa,EAC1C,CAEA,QACA,CACE,IAAIC,EAAW,KAAK,aAEhB,KAAK,aAAa,KAAO,KAAK,OAAO,KAAK,KAE5CA,EAAW,OAAO,WAAW,8BAA8B,EAAE,QAC9C,KAAK,OAAO,KACZ,KAAK,OAAO,OAG7BC,EAASC,EAAI,cAAeF,EAAS,EAAE,EAGnChD,EAAc,SAASgD,EAAS,KAAK,IAAM,KAE7ClD,GAAM,IAAI,4CAA4CkD,EAAS,IAAI,EAEnEhD,EAAc,OAAO,KAAK,OAAO,MAAM,MAAO,KAAK,OAAO,KAAK,KAAK,EACpEA,EAAc,IAAIgD,EAAS,KAAK,GAIlC,KAAK,MAAQ,KAAK,aAAa,IACjC,CACF,EAOMxC,GAAN,cAAkCqC,CAClC,CACE,YAAYC,EACZ,CACE,MAAMA,EAAW,EAAK,EAEtB,KAAK,SAAW,eAAqBK,GAAiB,4BAA4B,KAElF,KAAK,QAAU,CACb,UAAa,CAAE,GAAI,WAAY,KAAM,WAAgB,MAAO,eAAgB,EAC5E,UAAa,CAAE,GAAI,WAAY,KAAM,WAAgB,MAAO,eAAgB,EAC5E,YAAa,CAAE,GAAI,WAAY,KAAM,eAAgB,MAAO,eAAgB,CAC9E,EAEA,KAAK,WAAW,EAEhB,OAAO,WAAW,KAAK,QAAQ,EAAE,iBAAiB,SAAWrC,GAAU,KAAK,mBAAmBA,CAAK,CAAC,CACvG,CAEA,YACA,CACE,KAAK,cAAgBqB,GAAkB,KAAK,QAASY,EAAS,QAAQ,OAAQ,KAAK,QAAQ,WAAW,EACtG,KAAK,OAAO,CACd,CAEA,mBAAmBjC,EACnB,CACMd,EAAc,SAAS,gBAAgB,IAErCc,EAAM,SAERd,EAAc,OAAO,KAAK,cAAc,KAAK,EAC7CA,EAAc,IAAI,KAAK,QAAQ,UAAU,KAAK,IAI9CA,EAAc,OAAO,KAAK,QAAQ,UAAU,KAAK,EACjDA,EAAc,IAAI,KAAK,cAAc,KAAK,GAGhD,CAEA,QACA,CACE,KAAK,cAAqByC,GAAe,KAAK,QAAS,KAAK,aAAa,EACzEM,EAAS,QAAQ,OAAS,KAAK,cAAc,EAC/C,CAEA,OAAOjC,EACP,CACE,KAAK,MAAQ,KAAK,cAAc,KAChCmC,EAASC,EAAI,kBAAmB,KAAK,cAAc,EAAE,EAEjD,QAAO,WAAW,KAAK,QAAQ,EAAE,UAIhClD,EAAc,SAAS,gBAAgB,GAAOA,EAAc,SAAS,KAAK,cAAc,KAAK,IAAM,KAEtGF,GAAM,IAAI,oDAAoD,KAAK,cAAc,IAAI,EAErFE,EAAc,OAAO,KAAK,QAAQ,UAAU,MAAO,KAAK,QAAQ,UAAU,MAAO,KAAK,QAAQ,YAAY,KAAK,EAC/GA,EAAc,IAAI,KAAK,cAAc,KAAK,GAGxCc,GAAO,OAAS,SAClB,KAAK,QAAQ,eAAe,EAChC,CACF,ECpUO,SAASsC,GAAgBC,EAAQC,EAAUC,EAClD,CACE,IAAIC,EAAO,MAAMH,QAEjB,OAAAE,EAAS,QAAQ,CAACE,EAAOC,IACzB,CACE,IAAMC,EAAgBC,GAAiBH,EAAM,IAAI,EAEjDD,GAAiB;AAAA;AAAA,8BAESG,EAAc;AAAA,yBACnBF,EAAM;AAAA,0BACLH;AAAA,0BACAI,EAAQ;AAAA,2BACPD,EAAM,KAAK;AAAA,+BACPA,EAAM;AAAA,iCACJE,EAAc;AAAA;AAAA,oBAE3BA,EAAc;AAAA;AAAA;AAAA,mBAGfF,EAAM,sCAAsCA,EAAM,KAAK,oCAAoCA,EAAM,KAAK;AAAA;AAAA,WAGvH,CAAC,EAEMD,CACT,CAEO,SAASK,GAAiBR,EAAQE,EACzC,CACE,IAAIC,EAAO,MAAMH,YAEjB,OAAAE,EAAS,QAAQO,GAASN,GAAQ,YAAYO,EAAiBD,EAAK,IAAI,MAAMA,EAAK,YAAa,EAEzFN,EAAK,MAAM,EAAIA,EAAK,OAAS,CAAE,CACxC,CAEO,SAASQ,GAAuBX,EAAQY,EAAaC,EAC5D,CACE,IAAIV,EAAO,MAAMH,YAEjB,OAAAY,EAAY,QAASH,GACrB,CAEEN,GAAQ,YADWO,EAAiB,GAAGI,YAAmBL,EAAK,wBAAwBI,GAAa,MACjEJ,EAAK,oBAAoBA,EAAK,kBACnE,CAAC,EAEMN,CACT,CCxCA,IAAMY,EAAQ,CAAE,UAAW,CAAC,CAAE,EAOvB,SAASC,GAAaC,EAAmBC,EAAeC,EAC/D,CACE,IAAMC,EAAgBC,EAAeJ,EAAmB,gBAAgB,EAClEK,EAAgB,SAASJ,EAAc,aAAa,cAAc,CAAC,EACnEK,EAAgBF,EAAeH,EAAe,gBAAgB,EAC9DM,EAAiBJ,IAAa,WAEpCK,GAAYL,EAAUE,EAASE,EAAgB,GAAK,GAAK,MAAOE,GAChE,CACE,IAAIC,EAAUH,EAAgB,gBAAkB,aAC5CI,EAAUT,EAAa,cAAc,YAAY,EAYrD,GAVIO,IAAa,MAEfE,EAAQ,UAAYC,GAAgBF,EAAQJ,EAAUG,CAAQ,EAC9DR,EAAc,UAAU,IAAI,cAAc,GAI1CY,EAAa,8BAA+B,GAAI,QAAS,IAAMd,GAAaC,EAAmBC,EAAeC,CAAY,CAAC,EAGzH,CAACK,GAAkBE,IAAa,KAElCK,GAAgBL,EAAUJ,EAAQ,GAAI,CAACU,EAAUC,IACjD,CACEN,EAAWK,IAAa,UAAa,kBAAoB,cACzDJ,EAAWI,IAAa,UACVb,EAAa,cAAc,UAAU,EACrCA,EAAa,cAAc,WAAW,EAEhDc,IAAa,KACfL,EAAQ,UAAYM,GAAiBP,EAAQM,CAAQ,EAErDL,EAAQ,UAAY,MAAMD,qBAC9B,CAAC,UAEMD,IAAa,KACtB,CACE,GAAK,iBAAgBX,EAAE,UAAUO,IACjC,CACE,IAAMa,EAAe,MAAMC,EAAU,cAAe,aAAad,IAAU,GAAM,wBAAwB,EAEpGa,IAAiB,MAAUA,EAAa,OAAO,OAAS,MAC3DpB,EAAE,UAAUO,GAAQ,WAAgBa,EAAa,KACrD,CAEAhB,EAAa,cAAc,cAAc,EAAE,UAAYkB,GAAuB,uBAAwBtB,EAAE,UAAUO,GAAQ,WAAeC,CAAQ,CACnJ,CACF,CAAC,CACH,CAOA,eAAeE,GAAYL,EAAUE,EAAQgB,EAAUC,EACvD,CACE,GAAK,EAAAjB,KAAUP,EAAE,WACjB,CACE,IAAMoB,EAAe,MAAMC,EAAU,SAAU,GAAGhB,KAAYE,cAAmBgB,0CAAkD,EAAI,EAElIH,IAAiB,MAAUA,EAAa,OAAO,OAAS,MAC3DpB,EAAE,UAAUO,GAAU,CAAE,OAAQa,EAAa,IAAK,EACtD,CAEAI,EAAUxB,EAAE,UAAUO,KAAY,OAAaP,EAAE,UAAUO,GAAQ,OAAS,IAAI,CAClF,CAOA,SAASS,GAAgBL,EAAUJ,EAAQgB,EAAUC,EACrD,CACE,GAAK,aAAcxB,EAAE,UAAUO,IAAa,YAAaP,EAAE,UAAUO,GAEnEiB,EAAS,WAAYxB,EAAE,UAAUO,GAAQ,QAAQ,EACjDiB,EAAS,UAAYxB,EAAE,UAAUO,GAAQ,OAAO,MAGlD,CACE,IAAMkB,EAAW,CAAC,EACZC,EAAW,CAAC,EAElBf,EAAS,QAAQgB,GACjB,CACEF,EAAS,KAAK,MAAMA,EAAUE,EAAK,QAAQ,EAC3CD,EAAQ,KAAK,MAAMA,EAASC,EAAK,OAAO,CAC1C,CAAC,EAEDD,EAAUA,EAAQ,OAAOC,GAASA,IAASpB,CAAO,EAElDqB,GAAU,WAAYrB,EAAQ,CAAC,GAAG,IAAI,IAAIkB,CAAQ,CAAC,EAAGF,EAAUC,CAAQ,EACxEI,GAAU,UAAYrB,EAAQ,CAAC,GAAG,IAAI,IAAImB,CAAO,CAAC,EAAIH,EAAUC,CAAQ,CAC1E,CACF,CAEA,eAAeI,GACbvB,EACAE,EACAsB,EACAN,EACAC,EAEF,CACE,GAAIK,EAAQ,OAAS,EACrB,CACE,IAAMT,EAAe,MAAMC,EAAUhB,EAAU,WAAWwB,cAAoBN,sBAA8B,EAAI,EAE3GH,IAAiB,MAAUA,EAAa,OAAO,OAAS,MAC3DpB,EAAE,UAAUO,GAAQF,GAAYe,EAAa,KACjD,CAEAI,EAASnB,EAAWL,EAAE,UAAUO,GAAQF,KAAc,OAAaL,EAAE,UAAUO,GAAQF,GAAY,IAAI,CACzG,CAOO,SAASyB,IAChB,CACE9B,EAAE,UAAY,KAAK,MAAM,eAAe,QAAQ+B,EAAI,iBAAiB,CAAC,EAElE/B,EAAE,YAAc,OAClBA,EAAE,UAAY,CAAC,EACnB,CAEO,SAASgC,IAChB,CACE,eAAe,QAAQD,EAAI,kBAAmB,KAAK,UAAU/B,EAAE,SAAS,CAAC,CAC3E,CAEO,SAASiC,IAChB,CACE,eAAe,WAAWF,EAAI,iBAAiB,CACjD,CAEO,SAASG,IAChB,CACE,OAAQ,OAAO,KAAKlC,EAAE,SAAS,EAAE,OAAS,CAC5C,CC9JA,IAAMmC,GAAoBC,EAAY,mBAAmB,EAEnDC,EAAI,CACR,cAAe,KACf,WAAe,IACjB,EAOO,SAASC,IAChB,CACEH,GAAM,IAAI,QAAQ,EAElBE,EAAE,cAAgB,SAAS,eAAe,oBAAoB,EAC9DA,EAAE,WAAgB,IAAIE,GAAW,qBAAqB,EAEtDC,GAAa,CACf,CAOA,SAASC,IACT,CACE,GAAiBC,GAAS,EAC1B,CACE,IAAMC,EAAgB,CACpB,QAAa,OAAO,SAAS,KAC7B,UAAa,KAAK,MAAM,OAAO,WAAW,EAC1C,YAAa,CAAC,CAChB,EAEA,SAAS,iBAAiB,iBAAiB,EAAE,QAAQC,GACrD,CACMA,EAAQ,UAAU,SAAS,MAAM,GACnCD,EAAc,YAAY,KAAKC,EAAQ,EAAE,CAC7C,CAAC,EAED,eAAe,QAAQC,EAAI,kBAAmB,KAAK,UAAUF,CAAa,CAAC,EAC9DG,GAAW,CAC1B,CACF,CAEA,SAASN,IACT,CAGE,GAFaO,GAAU,EAEnB,YAAY,iBAAiB,YAAY,EAAE,GAAG,OAAS,SAC3D,CACE,IAAMJ,EAAgB,KAAK,MAAM,eAAe,QAAQE,EAAI,iBAAiB,CAAC,EAEzEF,IAAkB,MAAUA,EAAc,UAAY,OAAO,SAAS,MAEzE,QAAQ,kBAAoB,SAE5BA,EAAc,YAAY,QAAQK,GAClC,CACE,SAAS,eAAeA,CAAI,EAAE,cAAc,qBAAqB,EAAE,MAAM,CAC3E,CAAC,EAED,OAAO,OAAO,CAAE,IAAKL,EAAc,UAAW,KAAM,EAAG,SAAU,MAAO,CAAC,GAIzE,QAAQ,kBAAoB,MAEhC,CAEA,eAAe,WAAWE,EAAI,iBAAiB,EAClCI,GAAY,CAC3B,CAOA,IAAMV,GAAN,cAAyBW,CACzB,CACE,gBACA,CACE,GAAI,KAAK,QAAQ,iBAAiB,EAChC,OAAOC,EAAU,KAAK,MAAaC,EAAiB,KAAK,cAAc,GAAG,EAAE,IAAI,CAAC,EAEnF,GAAI,KAAK,QAAQ,oBAAoB,EACnC,OAAOC,GAAa,KAAK,MAAaD,EAAiB,KAAK,cAAc,GAAG,EAAE,IAAI,CAAC,EAEtF,GAAI,KAAK,QAAQ,uBAAuB,EACtC,OAAOE,GAAe,KAAK,OAAO,EAEpC,GAAI,KAAK,QAAQ,qBAAqB,EACpC,OAAOC,GAAoB,KAAK,KAAK,EAEvC,GAAI,KAAK,QAAQ,eAAe,EAC9B,OAAOC,GAAe,KAAK,MAAO,KAAK,OAAO,EAEhD,GAAI,KAAK,QAAQ,GAAG,EAClB,OAAOC,GAAY,KAAK,MAAO,KAAK,OAAO,CAC/C,CACF,EAEA,SAASN,EAAUO,EAAOC,EAASC,EAAU,KAC7C,CACEF,GAAO,eAAe,EACtBjB,GAAU,EAGV,eAAe,QAAQI,EAAI,YAAa,KAAK,UAAU,CAAE,SAAWa,EAAM,WAAa,GAAQ,QAASE,EAAS,SAAU,CAAE,CAAC,CAAC,EAEzHC,EAASF,CAAO,CACxB,CAEA,SAASN,GAAaK,EAAOC,EAC7B,CACEG,EAAUjB,EAAI,aAAc,MAAM,EAClCM,EAAUO,EAAOC,CAAO,CAC1B,CAEA,SAASL,GAAeV,EACxB,CACE,IAAMmB,EAAiBC,EAAepB,EAAS,gBAAgB,EAE/DqB,EAAW,KAAK,CACd,MAAU,gBAAsBD,EAAepB,EAAS,gBAAgB,IACxE,SAAUmB,EACV,SAAU,MAAMA,QAChB,IAAgBX,EAAiBR,EAAQ,aAAa,eAAe,CAAC,EACtE,KAAU,MACZ,CAAC,CACH,CAEA,SAASY,GAAeE,EAAOd,EAC/B,CACE,IAAMsB,EAAkB7B,EAAE,cAAc,aAAa,gBAAgB,IAAM,WAAc,UAAY,SAC/F8B,EAAuBH,EAAepB,EAAS,gBAAgB,EAC/DwB,EAAiB,SAASxB,EAAQ,aAAa,iBAAiB,CAAC,EACjEyB,EAAiBzB,EAAQ,aAAa,uBAAuB,EAEnE,GAAK0B,EAAS,SAAS,kBAAoBC,GAAY,SAAaH,IAAcI,GAAW,WAE3FrB,EAAUO,EAAOd,EAAQ,aAAa,eAAe,EAAG,IAAI,MAG9D,CACE,IAAM6B,EAAW,SAAS7B,EAAQ,aAAa,gBAAgB,CAAC,EAC5D8B,EAAa,GAEbD,EAAWE,EAAS,cACtBD,EAAa,QAAQ,KAAK,KAAKD,EAAWE,EAAS,WAAW,MAEhExB,EAAUO,EAAO,GAASkB,UAAiBV,KAAYC,KAAYO,IAAcL,CAAc,CACjG,CACF,CAEA,SAASZ,GAAYC,EAAOd,EAC5B,CACEH,GAAU,EAENG,EAAQ,QAAQ,eAAe,IAAM,OAEvCc,GAAO,eAAe,EAChBG,EAAeT,EAAiBR,EAAQ,IAAI,CAAC,EAEvD,CAEA,SAASW,GAAoBG,EAC7B,CACE,IAAMmB,EAAgBnB,EAAM,OAAO,QAAQ,oBAAoB,EACzDoB,EAAgBD,EAAc,cAAc,wBAAwB,EACpEE,EAAgBF,EAAc,cAAc,mBAAmB,EAC/DG,EAAiBD,EAAa,MAAM,QAAQ,SAAW,EACvDE,EAAgBJ,EAAc,UAAU,SAAS,cAAc,EAE/DK,EAAaL,EAAgBG,EAAa,OAAS,SAAYA,EAAa,SAAW,MAAO,EAEpGF,EAAa,YAAgBE,EAAa,cAAgB,cAC1DD,EAAa,MAAM,QAAUC,EAAa,GAAgB,OAEtD,CAACA,GAAc,CAACC,GACLE,GAAa9C,EAAE,cAAewC,EAAeE,CAAY,CAC1E,CCzLA,IAAMK,GAAkB,IACxB,CACE,IAAMC,EAAW,IAAI,eAAeC,CAAgB,EAChDC,EAAa,KAAMC,EAAe,KAAMC,EAAe,KACvDC,EAAY,GAEhB,cAAO,iBAAiB,OAAQ,IAChC,CACQC,EAAY,4CAA6C,QAASC,EAAiB,EACzF,SAAS,eAAe,mBAAmB,GAAG,iBAAiB,QAASC,CAAsB,CAChG,CAAC,EAEM,CACL,WAAc,CAAE,OAAOH,CAA0B,EACjD,aAAc,CAAEF,EAAa,MAAM,QAAU,EAAI,EACjD,KAAAM,EACA,OAAAC,CACF,EAEA,SAASD,GACT,CACEP,EAAe,SAAS,eAAe,aAAa,EACpDC,EAAe,SAAS,cAAc,kCAAkC,EACxEC,EAAe,SAAS,eAAe,wBAAwB,EAEzDO,EAAe,mBAAoB,QAASD,CAAM,EACxDN,EAAa,iBAAiB,QAASM,CAAM,EAC7CN,EAAa,iBAAiB,gBAAiBQ,CAAa,EAC5DZ,EAAS,QAAQG,EAAa,cAAc,8BAA8B,CAAC,CAC7E,CAEA,SAASK,EAAuBK,EAChC,CACE,IAAMC,EAAcD,EAAM,OAAO,QAAQ,0CAA0C,EAE/EC,IAAgB,OAEdC,GAAmB,GAAKC,EAAW,KAErCH,GAAO,eAAe,EAChBI,EAAeC,EAAiBJ,EAAY,cAAc,GAAG,EAAE,IAAI,CAAC,EAGhF,CAEA,SAASJ,GACT,CACMR,EAAW,UAAU,SAAS,eAAe,EAE3CG,EACFF,EAAa,MAAM,QAAU,OAE7BA,EAAa,MAAM,QAAU,OAI3BD,EAAW,UAAU,SAAS,iBAAiB,IAAM,IACvDA,EAAW,UAAU,OAAO,eAAe,CAEjD,CAEA,SAASD,EAAiBkB,EAC1B,CACEd,EAAac,EAAQ,GAAG,YAAY,SAAW,EAE3Cd,GAEFD,EAAa,UAAY,GACzBA,EAAa,MAAM,gBAAkB,iBAAiB,KAAK,MAAM,IAAMgB,EAAS,KAAK,oBAAsB,IAAI,EAAI,MACnHhB,EAAa,UAAU,IAAI,MAAM,EACjC,WAAW,IAAMA,EAAa,UAAU,IAAI,QAAQ,EAAG,EAAE,GAIzDA,EAAa,UAAU,IAAI,SAAS,CAExC,CAEA,SAASQ,GACT,CACMP,IAAc,KAEhBD,EAAa,UAAgB,GAC7BD,EAAa,MAAM,QAAU,GAEjC,CACF,EAEakB,EAAUtB,GAAe,EC/FtC,IAAMuB,GAAoB,IAC1B,CACE,IAAMC,EAA8B,IAAI,MAAM,wBAAwB,EAChEC,EAA8B,IAAI,MAAM,uBAAuB,EACjEC,EAAa,KAAMC,EAAkB,KAAMC,EAAc,KAAMC,EAAoB,KACnFC,EAAY,GAEhB,MAAO,CACL,WAAY,CAAE,OAAOA,CAAW,EAChC,KAAAC,EACA,OAAAC,EACA,KAAAC,CACF,EAEA,SAASF,GACT,CACEL,EAAoB,SAAS,eAAe,aAAa,EACzDC,EAAoB,SAAS,eAAe,kBAAkB,EAC9DC,EAAoBD,EAAgB,cAAc,eAAe,EACjEE,EAAoBH,EAAW,cAAc,6BAA6B,EAEpEQ,EAAe,qBAAsB,QAASF,CAAM,EAEpDE,EAAe,qBAAsB,YAAcC,GAAUA,EAAM,eAAe,CAAC,EAEzFP,EAAY,iBAAiB,OAAQK,CAAI,EAGzCL,EAAY,iBAAiB,UAAYO,GACzC,CACMA,EAAM,MAAQ,WAEhBA,EAAM,gBAAgB,EACtBF,EAAK,EAET,CAAC,CACH,CAEA,SAASD,GACT,CACEI,EAA0B,EAAIC,EAAK,EAAIJ,EAAK,CAC9C,CAEA,SAASA,GACT,CACMH,GACFQ,EAAS,GAAOd,EAA6B,GAAI,QAAQ,CAC7D,CAEA,SAASY,GACT,CACE,OAAIT,EAAgB,MAAM,QAAQ,SAAW,EAGvC,EAAAD,EAAW,eAAiB,GAItBa,EAAmBC,EAAM,qBAAqB,GAEjDd,EAAW,cAAc,8BAA8B,EAAE,eAAiB,GAC1EA,EAAW,cAAc,6BAA6B,EAAE,eAAkB,GAS5E,EACT,CAEA,SAASW,GACT,CACEI,GAAW,EACXH,EAAS,GAAMb,EAA4B,OAAQ,OAAO,EAC1DG,EAAY,MAAM,EAClBA,EAAY,kBAAkB,KAAM,IAAI,CAC1C,CAEA,SAASU,EAASI,EAASC,EAAwBC,GAASC,GAC5D,CACEf,EAAYY,EACZ,SAAS,cAAcC,CAAsB,EAC7ChB,EAAgB,MAAM,QAAUiB,GAChC,SAAS,iBAAiB,4BAA4B,EAAE,QAAQE,IAAYA,GAAQ,YAAcD,EAAK,EAEnGf,EACF,SAAS,eAAe,mBAAmB,EAAE,UAAU,IAAI,MAAM,EAEjE,SAAS,eAAe,mBAAmB,EAAE,UAAU,OAAO,MAAM,CACxE,CAEA,SAASW,IACT,CACE,IAAIM,EAAW,CAAC,EAEhB,GAAUR,EAAmBC,EAAM,qBAAqB,EAElDX,EAAkB,eAAiB,EACrCkB,EAAS,IAAMlB,EAAkB,UAEjCkB,EAAS,IAAMrB,EAAW,cAAc,6BAA6B,EAAE,UAEzEqB,EAAW,IAAI,QAAQ,GAAKA,EAAS,IAAM,EAAK,SAAS,KAAK,YAAc,GAAK,EAAE,UAI/ElB,EAAkB,eAAiB,EACvC,CACE,IAAMmB,EAAOnB,EAAkB,sBAAsB,EACrDkB,EAAa,IAAI,QAAQC,EAAK,KAAOA,EAAK,IAAM,EAAIA,EAAK,MAAQA,EAAK,OAAS,EAAG,CACpF,KAEA,CACE,IAAMA,EAAOtB,EAAW,cAAc,mBAAmB,EAAE,sBAAsB,EACjFqB,EAAa,IAAI,QAASC,EAAK,KAAO,GAAKA,EAAK,IAAMA,EAAK,MAAQ,GAAMA,EAAK,OAAS,CAAE,CAC3F,CAGFrB,EAAgB,MAAM,KAAS,GAAGoB,EAAS,SAC3CpB,EAAgB,MAAM,IAAS,GAAGoB,EAAS,QAC3CpB,EAAgB,MAAM,MAAS,GAAGoB,EAAS,MAAQA,EAAS,SAC5DpB,EAAgB,MAAM,OAAS,GAAGoB,EAAS,UAC7C,CACF,EAEaE,EAAY1B,GAAiB,ECpH1C,IAAM2B,GAAoBC,EAAY,OAAO,EAEvCC,EAAW,CACf,WAAmB,KACnB,YAAmB,KACnB,YAAmB,KACnB,kBAAmB,KACnB,iBAAmB,IACrB,EAOA,SAAS,iBAAiB,mBAAoB,IAC9C,CACEF,GAAM,IAAI,kBAAkB,EAE5BG,GAAU,EAEND,EAAS,cAAgB,MAC3BE,GAAgB,EAEd,SAAS,eAAe,oBAAoB,IAAM,MAC3CC,GAAK,EAEZH,EAAS,oBAAsB,OAEjCA,EAAS,kBAAkB,MAAM,EACjCA,EAAS,kBAAkB,kBAAkB,KAAM,IAAI,GAGzDI,GAAqB,EAETC,GAAwB,CACtC,CAAC,EAED,SAASJ,IACT,CACEH,GAAM,IAAI,aAAa,EAEvBE,EAAS,WAAoB,SAAS,eAAe,aAAa,EAClEA,EAAS,YAAoB,SAAS,eAAe,cAAc,EACnEA,EAAS,YAAoB,SAAS,eAAe,cAAc,EACnEA,EAAS,kBAAoB,SAAS,cAAc,uCAAuC,EAE/EG,GAAK,EACjBG,EAAU,KAAK,EACfC,EAAQ,KAAK,EAEbC,EAAO,iBAAiB,EACxBC,GAAO,iBAAiB,EAExB,SAAS,iBAAiB,oBAAsBC,GAAWV,EAAS,iBAAmBU,EAAM,gBAAiB,EAC9G,SAAS,iBAAiB,UAAWC,EAAoB,CAC3D,CAEA,SAAS,iBAAiB,kBAAmB,IAC7C,CACEC,GAAa,EACDC,GAAgB,EACpBC,EAAkBC,EAAI,oBAAqBC,EAAS,QAAQ,cAA2BC,EAAkB,CAAE,EAC3GH,EAAkBC,EAAI,oBAAqBC,EAAS,SAAS,gBAA0BC,EAAkB,CAAE,CACrH,CAAC,EAOD,SAASN,GAAqBD,EAC9B,CAEE,GAAKA,EAAM,SAAY,IAClBA,EAAM,UAAY,IAClBA,EAAM,SAAY,GAErB,OAAQA,EAAM,SAEP,SACCH,EAAQ,UAAU,IAEpBG,EAAM,eAAe,EACrBH,EAAQ,OAAO,GAEjB,OAKN,GAAIS,EAAS,KAAK,mBACbN,EAAM,SAAY,IAClBA,EAAM,UAAY,IAClBA,EAAM,SAAY,GAErB,OAAQA,EAAM,SAEP,QACA,IACCQ,EAAiB,IAEnBR,EAAM,eAAe,EACrBH,EAAQ,OAAO,GAEjB,UAEG,IACCW,EAAiB,GAAKC,GAAgB,IAE5BC,EAAc,OAAOV,CAAK,EACtCF,EAAO,QAAQ,GAEjB,UAEG,QACA,IACCU,EAAiB,GAAKG,GAAqB,IAE7CX,EAAM,eAAe,EACrBJ,EAAU,OAAO,GAEnB,UAEG,IACCY,EAAiB,GAAKC,GAAgB,GAE5BG,EAAU,OAAOZ,CAAK,EAEpC,UAEG,YACCA,EAAM,UAAYa,EAAW,IAE/Bb,EAAM,eAAe,EACfc,EAASC,EAAS,QAAQ,GAElC,UAEG,aACCf,EAAM,UAAYa,EAAW,IAE/Bb,EAAM,eAAe,EACfc,EAASC,EAAS,QAAQ,GAElC,MAGR,CAEA,SAASP,GACT,CACE,OAASZ,EAAU,UAAU,IAAM,IAAWN,EAAS,oBAAsB,SAAS,aACxF,CAEA,SAASmB,IACT,CACE,OAAQ,SAAS,KAAK,UAAU,SAAS,eAAe,IAAM,EAChE,CAEA,SAASE,IACT,CACE,OAASrB,EAAS,mBAAqB,IACzC,CAOA,SAASE,IACT,CAEcwB,GAAY,cAAc,GAAK,gBAErCV,EAAS,QAAQ,kBAEnBhB,EAAS,YAAY,MAAM,QAAU,QACrCQ,EAAO,QAAQ,EAETmB,EAAY,2CAA4C,QAAS,IACvE,CACE3B,EAAS,YAAY,MAAM,QAAY,GACvCA,EAAS,YAAY,MAAM,UAAY,GACvCgB,EAAS,QAAQ,gBAAsB,EACzC,CAAC,EAGP,CAEA,SAASZ,IACT,CACE,GAAI,SAAS,cAAc,2BAA2B,IAAM,KAC5D,CACE,IAAIwB,EAAa,GAEjB,GAAI,SAAS,SAAS,SAAW,EAE/BA,EAAa,oBAGf,CACE,IAAMC,EAAmB,IAAI,IAAI,mBAAmB,SAAS,QAAQ,CAAC,EAEtE,GAAIA,EAAiB,OAAO,SAAW,EAErCD,EAAa,yBAENC,EAAiB,SAAS,OAAS,EAC5C,CACE,IAAMC,EAAaD,EAAiB,SAAS,MAAM,EAAE,IAAM,IAAO,EAAI,EAChEE,EAAYF,EAAiB,SAAS,MAAM,EAAGA,EAAiB,SAAS,OAASC,CAAQ,EAAE,QAAQ,MAAO,GAAG,EAAE,MAAM,GAAG,EAE/HC,EAAU,QAAQ,CAACC,EAAMC,IACzB,CACEL,GAAgBK,EAAQ,EAAKF,EAAU,OACrBC,EAAO,MACPA,CACpB,CAAC,CACH,CACF,CAEA,SAAS,iBAAiB,gCAAgC,EAAE,QAAQE,GACpE,CACEA,EAAQ,cAAc,gBAAgB,EAAE,YAAeN,EAAW,OAAS,EAAKA,EAAa,mBAC7FM,EAAQ,cAAc,aAAa,EAAE,MAAM,QAAW,CACxD,CAAC,CACH,CACF,CAOA,IAAM1B,GAAU,IAChB,CACE,IAAI2B,EAAoB,EAExB,MAAO,CACL,sBAAuB,CAAE,OAAOA,CAAmB,EACnD,iBAAAC,EACA,QAASC,CACX,EAEA,SAASD,GACT,CACEC,EAAY,EACZ,OAAO,iBAAiB,SAAUA,CAAW,CAC/C,CAEA,SAASA,GACT,CACE,IAAIC,EAAe,EAEff,EAAW,EACbe,EAAqBC,EAAgB,kCAAkC,EAEvED,EAAqBC,EAAgB,sBAAsB,EAE7DJ,EAAoB,KAAK,MAAOG,EAAe,IAAQA,EAAe,EAAMA,EAAe,CAAE,EAExFtC,EAAS,cAAgB,MAAUA,EAAS,YAAY,MAAM,QAAQ,SAAW,IAEpFA,EAAS,YAAY,MAAM,UAAY,GAAGsC,MAC1CtC,EAAS,YAAY,MAAM,UAAY,GAASuC,EAAgB,4BAA6B,SAAS,IAAI,MAE9G,CACF,GAAG,EAOG9B,IAAU,IAChB,CACE,IAAI+B,EAAoB,EACpBC,EAAoB,EACpBC,EAAoB,EACpBC,EAAoB,GAClBC,EAAkB,GAExB,MAAO,CACL,iBAAAR,CACF,EAEA,SAASA,GACT,CACES,EAAY,EACZ,OAAO,iBAAiB,SAAUA,CAAW,CAC/C,CAEA,SAASA,GACT,CACE,IAAMC,EAAmB,OAAO,YAE5BA,IAAqB,GAEvBC,EAAY,EAEVD,EAAmBN,GAErBE,GAAoBI,EAAmBN,EAElCE,EAAkBE,GAAqBE,EAAmBtC,EAAO,qBAAqB,IAEzFiC,EAAgB,EAChBO,EAAa,KAKfP,GAAkBD,EAAoBM,EAElCL,EAAgBG,IAElBF,EAAkB,EAClBO,EAAW,IAIfT,EAAoBM,CACtB,CAEA,SAASC,GACT,CACE/C,EAAS,WAAW,UAAU,OAAO,kBAAmB,eAAe,EACvEA,EAAS,WAAW,UAAU,IAAI,eAAe,EACjDM,EAAU,KAAK,EACfC,EAAQ,YAAY,CACtB,CAEA,SAASyC,GACT,CACML,IAAmB,KAErBA,EAAiB,GACXO,EAAalD,EAAS,WAAY,gBAAiB,iBAAiB,EAC1EM,EAAU,KAAK,EAEnB,CAEA,SAAS2C,GACT,CACMN,IAAmB,KAErBA,EAAiB,GACXO,EAAalD,EAAS,WAAY,kBAAmB,eAAe,EAE9E,CACF,GAAG",
  "names": ["debug", "newInstance", "shareModalClosure", "filterBodyTextRegEx", "title", "bodyText", "filterBodyText", "bodyHtml", "url", "sourceUid", "verb", "show", "args", "showModal", "getSingleChoiceList", "singleChoiceListClick", "singleChoiceList", "clickedId", "searchString", "copyTextToClipboard", "shareModal", "clipboardText", "successMessage", "errorMessage", "showSnackbar", "reason", "debug", "newInstance", "htmlClassList", "m", "siteTheme", "galleryLayout", "init", "MetaUiElements", "ListUiElements", "SiteThemeToggle", "GalleryLayoutToggle", "linkClick", "settingsUpdated", "ElementClick", "sharePlayClick", "detailsClick", "event", "navToUrl", "getPrefPlayerUrl", "element", "trackArtist", "stripAttribute", "trackTitle", "modalId", "shareModal", "getModalTrackHtml", "trackThumbnailClick", "trackDuration", "artists", "channels", "modalEntries", "item", "showModal", "getTimeString", "clickedId", "artistTitle", "copyTextToClipboard", "getCurrentSetting", "settingsObject", "currentId", "defaultSetting", "setting", "value", "getNextSetting", "currentSetting", "index", "keys", "ElementToggle", "elementId", "settings", "newTheme", "setValue", "KEY", "getCssPropString", "getTermlistHtml", "header", "termSlug", "termData", "html", "track", "index", "thumbnailData", "getThumbnailData", "getTermLinksHtml", "item", "getPrefPlayerUrl", "getTopArtistsLinksHtml", "artistsData", "channelSlug", "SITE_URL", "m", "loadTermlist", "termlistContainer", "termlistEntry", "termlistBody", "termType", "stripAttribute", "termId", "termSlug", "isAllChannels", "fetchTracks", "termData", "header", "element", "getTermlistHtml", "showSnackbar", "fetchArtistMeta", "metaType", "metadata", "getTermLinksHtml", "restResponse", "fetchRest", "getTopArtistsLinksHtml", "maxItems", "callback", "channels", "artists", "item", "fetchMeta", "termIds", "readCache", "KEY", "writeCache", "deleteCache", "hasCache", "debug", "newInstance", "m", "init", "UiElements", "restoreState", "saveState", "hasCache", "termlistState", "element", "KEY", "writeCache", "readCache", "item", "deleteCache", "ElementClick", "playClick", "getPrefPlayerUrl", "shuffleClick", "shareFindClick", "termlistHeaderClick", "playTrackClick", "linkClicked", "event", "destUrl", "trackId", "navToUrl", "setCookie", "termName", "stripAttribute", "shareModal", "termType", "termSlug", "trackType", "trackSourceUid", "settings", "PREF_PLAYER", "TRACK_TYPE", "trackNum", "pagination", "response", "SITE_URL", "termlistEntry", "expandToggle", "termlistBody", "isExpanded", "isDataFetched", "replaceClass", "loadTermlist", "navMenuClosure", "observer", "observerCallback", "siteHeader", "navMenuOuter", "modalOverlay", "isVisible", "addListener", "shuffleClickNavTo", "menuClickUsePrefPlayer", "init", "toggle", "addListenerAll", "transitionEnd", "event", "menuElement", "isSingleTrackFetch", "noPlayback", "navToUrl", "getPrefPlayerUrl", "entries", "settings", "navMenu", "navSearchClosure", "allowKeyboardShortcutsEvent", "denyKeyboardShortcutsEvent", "siteHeader", "searchContainer", "searchField", "brandingContainer", "isVisible", "init", "toggle", "hide", "addListenerAll", "event", "hasVisibleSearchContainer", "show", "setProps", "matchesMedia", "MATCH", "setPosSize", "visible", "keyboardShortcutsEvent", "display", "icon", "element", "position", "rect", "navSearch", "debug", "newInstance", "elements", "initIndex", "showIntroBanner", "init", "setPreviousPageTitle", "logStartupExecutionTime", "navSearch", "navMenu", "resize", "scroll", "event", "documentEventKeyDown", "readSettings", "settingsUpdated", "setCookie", "KEY", "settings", "YEAR_IN_SECONDS", "searchNotFocused", "notSettingsPage", "galleryLayout", "notFullscreenElement", "siteTheme", "noPlayback", "navToUrl", "response", "isAvailable", "addListener", "pathString", "referrerUrlParts", "endSlash", "pathParts", "part", "index", "element", "siteHeaderYOffset", "addEventListener", "resizeEvent", "headerHeight", "getCssPropValue", "previousScrollPos", "scrollDeltaUp", "scrollDeltaDown", "isScrolledDown", "scrollThreshold", "scrollEvent", "currentScrollPos", "scrolledTop", "scrolledDown", "scrolledUp", "replaceClass"]
}
